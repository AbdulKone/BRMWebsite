import{c as M,u as $,b as q,j as e,M as u,f as F,a as G}from"./index-DN8h3Y9b.js";import{r}from"./react-vendor-VkFUI6JC.js";import{P as I}from"./Pagination-BEwthcNS.js";import{C as Z}from"./ConfirmDialog-BT3SwRyR.js";import{M as v}from"./mail-0jcSGkfv.js";import{C as N}from"./clock-DYNXt7Fe.js";import{U as B}from"./user-CCxstMVk.js";import{T as J}from"./trash-2-BwtB9nAO.js";import"./ui-vendor-jY-liuQK.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=M("MailOpen",[["path",{d:"M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z",key:"1jhwl8"}],["path",{d:"m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10",key:"1qfld7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=M("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]),re=()=>{const{messages:t,updateMessageStatus:C,deleteMessage:S,isLoading:k,pagination:d,setPagination:D,fetchMessages:h}=$(),{handleSuccess:L}=q(),[R,c]=r.useState(!1),[p,g]=r.useState(null),[i,P]=r.useState("all"),[b,E]=r.useState(null),T=s=>{switch(s){case"replied":return{color:"bg-green-500/20 text-green-400 border-green-500/30",icon:w,label:"R√©pondu"};case"read":return{color:"bg-blue-500/20 text-blue-400 border-blue-500/30",icon:y,label:"Lu"};default:return{color:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",icon:v,label:"Nouveau"}}},f=r.useMemo(()=>i==="all"?t:t.filter(s=>s.status===i),[t,i]),l=r.useMemo(()=>{const s=t.length,n=t.filter(a=>a.status==="new").length,x=t.filter(a=>a.status==="read").length,o=t.filter(a=>a.status==="replied").length,m=t.filter(a=>{const U=new Date(a.created_at),_=new Date;return U.toDateString()===_.toDateString()}).length;return{total:s,newMessages:n,read:x,replied:o,todayMessages:m}},[t]),O=s=>{D({page:s}),h()},H=s=>{g(s),c(!0)},z=async()=>{p&&(await S(p),g(null),c(!1))},A=s=>{E(b===s?null:s)},V=()=>{L("Messages recharg√©s"),h()},j=Math.ceil(d.total/d.pageSize);return k?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Chargement des messages..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900",children:[e.jsxs("div",{className:"container mx-auto px-4 py-4 sm:py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl",children:e.jsx(u,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Gestion des Messages"}),e.jsx("p",{className:"text-gray-400 text-sm sm:text-base mt-1",children:"Suivez et r√©pondez √† tous vos messages de contact"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600/20 to-blue-800/20 border border-blue-500/30 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-300 text-sm font-medium",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:l.total})]}),e.jsx(u,{className:"w-8 h-8 text-blue-400"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-yellow-600/20 to-yellow-800/20 border border-yellow-500/30 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-300 text-sm font-medium",children:"Nouveaux"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:l.newMessages})]}),e.jsx(v,{className:"w-8 h-8 text-yellow-400"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-600/20 to-blue-800/20 border border-blue-500/30 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-300 text-sm font-medium",children:"Lus"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:l.read})]}),e.jsx(y,{className:"w-8 h-8 text-blue-400"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-600/20 to-green-800/20 border border-green-500/30 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-300 text-sm font-medium",children:"R√©pondus"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:l.replied})]}),e.jsx(w,{className:"w-8 h-8 text-green-400"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-600/20 to-purple-800/20 border border-purple-500/30 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-300 text-sm font-medium",children:"Aujourd'hui"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:l.todayMessages})]}),e.jsx(N,{className:"w-8 h-8 text-purple-400"})]})})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[e.jsxs("select",{value:i,onChange:s=>P(s.target.value),className:"bg-gray-800/50 backdrop-blur-sm border border-gray-700/50 rounded-xl px-4 py-2 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Tous les statuts"}),e.jsx("option",{value:"new",children:"Nouveaux"}),e.jsx("option",{value:"read",children:"Lus"}),e.jsx("option",{value:"replied",children:"R√©pondus"})]}),e.jsx("button",{onClick:V,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:"üîÑ Recharger les messages"})]})]}),e.jsx("div",{className:"space-y-4",children:f.map(s=>{const n=T(s.status),x=n.icon,o=b===s.id;return e.jsx("div",{className:"bg-gray-800/50 backdrop-blur-sm border border-gray-700/50 rounded-2xl overflow-hidden hover:border-gray-600/50 transition-all duration-200",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(B,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-1 truncate",children:s.subject}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-400",children:[e.jsxs("span",{children:["De : ",e.jsx("span",{className:"text-white font-medium",children:s.name})]}),e.jsxs("span",{children:["(",s.email,")"]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{children:F(new Date(s.created_at),"dd MMMM yyyy √† HH:mm",{locale:G})})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 flex-shrink-0",children:[e.jsxs("div",{className:`inline-flex items-center space-x-2 px-3 py-1 rounded-full border ${n.color}`,children:[e.jsx(x,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:n.label})]}),e.jsxs("select",{value:s.status,onChange:m=>C(s.id,m.target.value),className:"bg-gray-700/50 border border-gray-600/50 rounded-lg px-3 py-1 text-sm text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"new",children:"Nouveau"}),e.jsx("option",{value:"read",children:"Lu"}),e.jsx("option",{value:"replied",children:"R√©pondu"})]}),e.jsx("button",{onClick:()=>H(s.id),className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-all duration-200",title:"Supprimer",children:e.jsx(J,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"bg-gray-900/50 rounded-xl p-4",children:[e.jsx("div",{className:`text-gray-300 leading-relaxed ${o?"":"line-clamp-3"}`,children:s.message}),s.message.length>200&&e.jsx("button",{onClick:()=>A(s.id),className:"mt-3 text-blue-400 hover:text-blue-300 text-sm font-medium transition-colors",children:o?"Voir moins":"Voir plus"})]})]})},s.id)})}),f.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(u,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400 text-lg",children:"Aucun message trouv√©"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Les messages de contact appara√Ætront ici"})]}),j>1&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsx(I,{currentPage:d.page,totalPages:j,onPageChange:O})})]}),e.jsx(Z,{isOpen:R,onClose:()=>c(!1),onConfirm:z,title:"Supprimer le message",message:"√ätes-vous s√ªr de vouloir supprimer ce message ? Cette action est irr√©versible."})]})};export{re as default};
//# sourceMappingURL=MessagesList-DCUVLqI-.js.map
