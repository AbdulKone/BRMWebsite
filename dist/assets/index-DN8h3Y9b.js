const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/YouTube-BWSq3t6-.js","assets/react-vendor-VkFUI6JC.js","assets/SoundCloud-Do_h1BL-.js","assets/Vimeo-CadFkkeV.js","assets/Mux-BVmWYd20.js","assets/Facebook-BpQvcJ91.js","assets/Streamable-zwODS5I5.js","assets/Wistia-CsNqoXd-.js","assets/Twitch-idWwthSU.js","assets/DailyMotion-BVdZuCDG.js","assets/Mixcloud-CLz12SL1.js","assets/Vidyard-CPrZP_Y-.js","assets/Kaltura-B9-5r5Wl.js","assets/FilePlayer-YBKO6cAF.js","assets/Preview--eI_3dNB.js","assets/prospectApiService-DuRKMtOj.js","assets/ui-vendor-jY-liuQK.js","assets/BookingsList-BnjMB-eg.js","assets/Pagination-BEwthcNS.js","assets/clock-DYNXt7Fe.js","assets/ConfirmDialog-BT3SwRyR.js","assets/trash-2-BwtB9nAO.js","assets/check-circle-DsTvJVik.js","assets/alert-circle-BoGZEYs9.js","assets/MessagesList-DCUVLqI-.js","assets/mail-0jcSGkfv.js","assets/user-CCxstMVk.js","assets/ProjectsAdmin-CGxM5iYL.js","assets/DragDropReorder-Czt_8iWJ.js","assets/save-CY1Hemzt.js","assets/upload-t_bHCpCi.js","assets/ArtistsAdmin-BOzZydhh.js","assets/ServicesAdmin-DGmY20Xb.js","assets/ProspectionDashboard-dL8jucQG.js"])))=>i.map(i=>d[i]);
var po=Object.defineProperty;var mo=(s,e,t)=>e in s?po(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var q=(s,e,t)=>mo(s,typeof e!="symbol"?e+"":e,t);import{b as Bt,c as go,g as Vt,r as C,R as Q,d as Bi,u as qr,f as Hs,L as fe,h as Yr,N as zs,i as Vi,j as Pe,k as yo,B as vo}from"./react-vendor-VkFUI6JC.js";import{q as Gt,A as rr,m as K,e as bo,c as wo,a as ke,b as _o,s as Or,d as xo,f as vn,g as Gr,h as jo,S as Eo}from"./ui-vendor-jY-liuQK.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();var Kr={exports:{}},Kt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bn;function ko(){if(bn)return Kt;bn=1;var s=Bt(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,n=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(o,l,d){var h,u={},f=null,g=null;d!==void 0&&(f=""+d),l.key!==void 0&&(f=""+l.key),l.ref!==void 0&&(g=l.ref);for(h in l)r.call(l,h)&&!i.hasOwnProperty(h)&&(u[h]=l[h]);if(o&&o.defaultProps)for(h in l=o.defaultProps,l)u[h]===void 0&&(u[h]=l[h]);return{$$typeof:e,type:o,key:f,ref:g,props:u,_owner:n.current}}return Kt.Fragment=t,Kt.jsx=a,Kt.jsxs=a,Kt}var wn;function So(){return wn||(wn=1,Kr.exports=ko()),Kr.exports}var c=So(),vr={},_n;function Po(){if(_n)return vr;_n=1;var s=go();return vr.createRoot=s.createRoot,vr.hydrateRoot=s.hydrateRoot,vr}var Oo=Po();const To=Vt(Oo);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Co={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),we=(s,e)=>{const t=C.forwardRef(({color:r="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:o="",children:l,...d},h)=>C.createElement("svg",{ref:h,...Co,width:n,height:n,stroke:r,strokeWidth:a?Number(i)*24/Number(n):i,className:["lucide",`lucide-${No(s)}`,o].join(" "),...d},[...e.map(([u,f])=>C.createElement(u,f)),...Array.isArray(l)?l:[l]]));return t.displayName=`${s}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=we("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=we("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=we("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=we("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=we("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=we("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=we("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=we("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=we("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=we("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=we("Music2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=we("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=we("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=we("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=we("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=we("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=we("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=we("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=we("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=we("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),Uo={},En=s=>{let e;const t=new Set,r=(h,u)=>{const f=typeof h=="function"?h(e):h;if(!Object.is(f,e)){const g=e;e=u??(typeof f!="object"||f===null)?f:Object.assign({},e,f),t.forEach(y=>y(e,g))}},n=()=>e,l={setState:r,getState:n,getInitialState:()=>d,subscribe:h=>(t.add(h),()=>t.delete(h)),destroy:()=>{(Uo?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},d=e=s(r,n,l);return l},Fo=s=>s?En(s):En;var Jr={exports:{}},Xr={},Qr={exports:{}},Zr={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kn;function Bo(){if(kn)return Zr;kn=1;var s=Bt();function e(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var t=typeof Object.is=="function"?Object.is:e,r=s.useState,n=s.useEffect,i=s.useLayoutEffect,a=s.useDebugValue;function o(u,f){var g=f(),y=r({inst:{value:g,getSnapshot:f}}),b=y[0].inst,j=y[1];return i(function(){b.value=g,b.getSnapshot=f,l(b)&&j({inst:b})},[u,g,f]),n(function(){return l(b)&&j({inst:b}),u(function(){l(b)&&j({inst:b})})},[u]),a(g),g}function l(u){var f=u.getSnapshot;u=u.value;try{var g=f();return!t(u,g)}catch{return!0}}function d(u,f){return f()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:o;return Zr.useSyncExternalStore=s.useSyncExternalStore!==void 0?s.useSyncExternalStore:h,Zr}var Sn;function Vo(){return Sn||(Sn=1,Qr.exports=Bo()),Qr.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pn;function Wo(){if(Pn)return Xr;Pn=1;var s=Bt(),e=Vo();function t(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,i=s.useRef,a=s.useEffect,o=s.useMemo,l=s.useDebugValue;return Xr.useSyncExternalStoreWithSelector=function(d,h,u,f,g){var y=i(null);if(y.current===null){var b={hasValue:!1,value:null};y.current=b}else b=y.current;y=o(function(){function v(S){if(!p){if(p=!0,m=S,S=f(S),g!==void 0&&b.hasValue){var k=b.value;if(g(k,S))return w=k}return w=S}if(k=w,r(m,S))return k;var R=f(S);return g!==void 0&&g(k,R)?(m=S,k):(m=S,w=R)}var p=!1,m,w,_=u===void 0?null:u;return[function(){return v(h())},_===null?void 0:function(){return v(_())}]},[h,u,f,g]);var j=n(d,y[0],y[1]);return a(function(){b.hasValue=!0,b.value=j},[j]),l(j),j},Xr}var On;function Ho(){return On||(On=1,Jr.exports=Wo()),Jr.exports}var zo=Ho();const Yo=Vt(zo),Zi={},{useDebugValue:Go}=Q,{useSyncExternalStoreWithSelector:Ko}=Yo;let Tn=!1;const Jo=s=>s;function Xo(s,e=Jo,t){(Zi?"production":void 0)!=="production"&&t&&!Tn&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Tn=!0);const r=Ko(s.subscribe,s.getState,s.getServerState||s.getInitialState,e,t);return Go(r),r}const Cn=s=>{(Zi?"production":void 0)!=="production"&&typeof s!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof s=="function"?Fo(s):s,t=(r,n)=>Xo(e,r,n);return Object.assign(t,e),t},dr=s=>s?Cn(s):Cn,Qo="modulepreload",Zo=function(s){return"/"+s},Nn={},oe=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){let a=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=a(t.map(d=>{if(d=Zo(d),d in Nn)return;Nn[d]=!0;const h=d.endsWith(".css"),u=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${u}`))return;const f=document.createElement("link");if(f.rel=h?"stylesheet":Qo,h||(f.as="script"),f.crossOrigin="",f.href=d,l&&f.setAttribute("nonce",l),document.head.appendChild(f),h)return new Promise((g,y)=>{f.addEventListener("load",g),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return n.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},el=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>oe(async()=>{const{default:r}=await Promise.resolve().then(()=>Wt);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Gs extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class tl extends Gs{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class An extends Gs{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Rn extends Gs{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var js;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(js||(js={}));var rl=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{d(r.next(h))}catch(u){a(u)}}function l(h){try{d(r.throw(h))}catch(u){a(u)}}function d(h){h.done?i(h.value):n(h.value).then(o,l)}d((r=r.apply(s,e||[])).next())})};class sl{constructor(e,{headers:t={},customFetch:r,region:n=js.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=el(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return rl(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:a}=t;let o={},{region:l}=t;l||(l=this.region);const d=new URL(`${this.url}/${e}`);l&&l!=="any"&&(o["x-region"]=l,d.searchParams.set("forceFunctionRegion",l));let h;a&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",h=a):typeof a=="string"?(o["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(o["Content-Type"]="application/json",h=JSON.stringify(a)));const u=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),n),body:h}).catch(b=>{throw new tl(b)}),f=u.headers.get("x-relay-error");if(f&&f==="true")throw new An(u);if(!u.ok)throw new Rn(u);let g=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),y;return g==="application/json"?y=yield u.json():g==="application/octet-stream"?y=yield u.blob():g==="text/event-stream"?y=u:g==="multipart/form-data"?y=yield u.formData():y=yield u.text(),{data:y,error:null,response:u}}catch(n){return{data:null,error:n,response:n instanceof Rn||n instanceof An?n.context:void 0}}})}}var xe={},jt={},Et={},kt={},St={},Pt={},nl=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ut=nl();const il=Ut.fetch,ea=Ut.fetch.bind(Ut),ta=Ut.Headers,al=Ut.Request,ol=Ut.Response,Wt=Object.freeze(Object.defineProperty({__proto__:null,Headers:ta,Request:al,Response:ol,default:ea,fetch:il},Symbol.toStringTag,{value:"Module"})),ll=Bi(Wt);var br={},Ln;function ra(){if(Ln)return br;Ln=1,Object.defineProperty(br,"__esModule",{value:!0});class s extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return br.default=s,br}var Dn;function sa(){if(Dn)return Pt;Dn=1;var s=Pt&&Pt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Pt,"__esModule",{value:!0});const e=s(ll),t=s(ra());class r{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=Object.assign({},this.headers),this.headers[i]=a,this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const o=this.fetch;let l=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var h,u,f;let g=null,y=null,b=null,j=d.status,v=d.statusText;if(d.ok){if(this.method!=="HEAD"){const _=await d.text();_===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?y=_:y=JSON.parse(_))}const m=(h=this.headers.Prefer)===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),w=(u=d.headers.get("content-range"))===null||u===void 0?void 0:u.split("/");m&&w&&w.length>1&&(b=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(g={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,b=null,j=406,v="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const m=await d.text();try{g=JSON.parse(m),Array.isArray(g)&&d.status===404&&(y=[],g=null,j=200,v="OK")}catch{d.status===404&&m===""?(j=204,v="No Content"):g={message:m}}if(g&&this.isMaybeSingle&&(!((f=g==null?void 0:g.details)===null||f===void 0)&&f.includes("0 rows"))&&(g=null,j=200,v="OK"),g&&this.shouldThrowOnError)throw new t.default(g)}return{error:g,data:y,count:b,status:j,statusText:v}});return this.shouldThrowOnError||(l=l.catch(d=>{var h,u,f;return{error:{message:`${(h=d==null?void 0:d.name)!==null&&h!==void 0?h:"FetchError"}: ${d==null?void 0:d.message}`,details:`${(u=d==null?void 0:d.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(f=d==null?void 0:d.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),l.then(i,a)}returns(){return this}overrideTypes(){return this}}return Pt.default=r,Pt}var Mn;function na(){if(Mn)return St;Mn=1;var s=St&&St.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(St,"__esModule",{value:!0});const e=s(sa());class t extends e.default{select(n){let i=!1;const a=(n??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",a),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(n,{ascending:i=!0,nullsFirst:a,foreignTable:o,referencedTable:l=o}={}){const d=l?`${l}.order`:"order",h=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${h?`${h},`:""}${n}.${i?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:i,referencedTable:a=i}={}){const o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${n}`),this}range(n,i,{foreignTable:a,referencedTable:o=a}={}){const l=typeof o>"u"?"offset":`${o}.offset`,d=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${n}`),this.url.searchParams.set(d,`${i-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:n=!1,verbose:i=!1,settings:a=!1,buffers:o=!1,wal:l=!1,format:d="text"}={}){var h;const u=[n?"analyze":null,i?"verbose":null,a?"settings":null,o?"buffers":null,l?"wal":null].filter(Boolean).join("|"),f=(h=this.headers.Accept)!==null&&h!==void 0?h:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${d}; for="${f}"; options=${u};`,d==="json"?this:this}rollback(){var n;return((n=this.headers.Prefer)!==null&&n!==void 0?n:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return St.default=t,St}var In;function Ks(){if(In)return kt;In=1;var s=kt&&kt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(kt,"__esModule",{value:!0});const e=s(na());class t extends e.default{eq(n,i){return this.url.searchParams.append(n,`eq.${i}`),this}neq(n,i){return this.url.searchParams.append(n,`neq.${i}`),this}gt(n,i){return this.url.searchParams.append(n,`gt.${i}`),this}gte(n,i){return this.url.searchParams.append(n,`gte.${i}`),this}lt(n,i){return this.url.searchParams.append(n,`lt.${i}`),this}lte(n,i){return this.url.searchParams.append(n,`lte.${i}`),this}like(n,i){return this.url.searchParams.append(n,`like.${i}`),this}likeAllOf(n,i){return this.url.searchParams.append(n,`like(all).{${i.join(",")}}`),this}likeAnyOf(n,i){return this.url.searchParams.append(n,`like(any).{${i.join(",")}}`),this}ilike(n,i){return this.url.searchParams.append(n,`ilike.${i}`),this}ilikeAllOf(n,i){return this.url.searchParams.append(n,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(n,i){return this.url.searchParams.append(n,`ilike(any).{${i.join(",")}}`),this}is(n,i){return this.url.searchParams.append(n,`is.${i}`),this}in(n,i){const a=Array.from(new Set(i)).map(o=>typeof o=="string"&&new RegExp("[,()]").test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(n,`in.(${a})`),this}contains(n,i){return typeof i=="string"?this.url.searchParams.append(n,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(n,`cs.{${i.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(i)}`),this}containedBy(n,i){return typeof i=="string"?this.url.searchParams.append(n,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(n,`cd.{${i.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(i)}`),this}rangeGt(n,i){return this.url.searchParams.append(n,`sr.${i}`),this}rangeGte(n,i){return this.url.searchParams.append(n,`nxl.${i}`),this}rangeLt(n,i){return this.url.searchParams.append(n,`sl.${i}`),this}rangeLte(n,i){return this.url.searchParams.append(n,`nxr.${i}`),this}rangeAdjacent(n,i){return this.url.searchParams.append(n,`adj.${i}`),this}overlaps(n,i){return typeof i=="string"?this.url.searchParams.append(n,`ov.${i}`):this.url.searchParams.append(n,`ov.{${i.join(",")}}`),this}textSearch(n,i,{config:a,type:o}={}){let l="";o==="plain"?l="pl":o==="phrase"?l="ph":o==="websearch"&&(l="w");const d=a===void 0?"":`(${a})`;return this.url.searchParams.append(n,`${l}fts${d}.${i}`),this}match(n){return Object.entries(n).forEach(([i,a])=>{this.url.searchParams.append(i,`eq.${a}`)}),this}not(n,i,a){return this.url.searchParams.append(n,`not.${i}.${a}`),this}or(n,{foreignTable:i,referencedTable:a=i}={}){const o=a?`${a}.or`:"or";return this.url.searchParams.append(o,`(${n})`),this}filter(n,i,a){return this.url.searchParams.append(n,`${i}.${a}`),this}}return kt.default=t,kt}var $n;function ia(){if($n)return Et;$n=1;var s=Et&&Et.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Et,"__esModule",{value:!0});const e=s(Ks());class t{constructor(n,{headers:i={},schema:a,fetch:o}){this.url=n,this.headers=i,this.schema=a,this.fetch=o}select(n,{head:i=!1,count:a}={}){const o=i?"HEAD":"GET";let l=!1;const d=(n??"*").split("").map(h=>/\s/.test(h)&&!l?"":(h==='"'&&(l=!l),h)).join("");return this.url.searchParams.set("select",d),a&&(this.headers.Prefer=`count=${a}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(n,{count:i,defaultToNull:a=!0}={}){const o="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),a||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(n)){const d=n.reduce((h,u)=>h.concat(Object.keys(u)),[]);if(d.length>0){const h=[...new Set(d)].map(u=>`"${u}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}upsert(n,{onConflict:i,ignoreDuplicates:a=!1,count:o,defaultToNull:l=!0}={}){const d="POST",h=[`resolution=${a?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&h.push(this.headers.Prefer),o&&h.push(`count=${o}`),l||h.push("missing=default"),this.headers.Prefer=h.join(","),Array.isArray(n)){const u=n.reduce((f,g)=>f.concat(Object.keys(g)),[]);if(u.length>0){const f=[...new Set(u)].map(g=>`"${g}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}update(n,{count:i}={}){const a="PATCH",o=[];return this.headers.Prefer&&o.push(this.headers.Prefer),i&&o.push(`count=${i}`),this.headers.Prefer=o.join(","),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}delete({count:n}={}){const i="DELETE",a=[];return n&&a.push(`count=${n}`),this.headers.Prefer&&a.unshift(this.headers.Prefer),this.headers.Prefer=a.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Et.default=t,Et}var Jt={},Xt={},qn;function cl(){return qn||(qn=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.version=void 0,Xt.version="0.0.0-automated"),Xt}var Un;function ul(){if(Un)return Jt;Un=1,Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.DEFAULT_HEADERS=void 0;const s=cl();return Jt.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${s.version}`},Jt}var Fn;function dl(){if(Fn)return jt;Fn=1;var s=jt&&jt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(jt,"__esModule",{value:!0});const e=s(ia()),t=s(Ks()),r=ul();class n{constructor(a,{headers:o={},schema:l,fetch:d}={}){this.url=a,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),o),this.schemaName=l,this.fetch=d}from(a){const o=new URL(`${this.url}/${a}`);return new e.default(o,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new n(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,o={},{head:l=!1,get:d=!1,count:h}={}){let u;const f=new URL(`${this.url}/rpc/${a}`);let g;l||d?(u=l?"HEAD":"GET",Object.entries(o).filter(([b,j])=>j!==void 0).map(([b,j])=>[b,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([b,j])=>{f.searchParams.append(b,j)})):(u="POST",g=o);const y=Object.assign({},this.headers);return h&&(y.Prefer=`count=${h}`),new t.default({method:u,url:f,headers:y,schema:this.schemaName,body:g,fetch:this.fetch,allowEmpty:!1})}}return jt.default=n,jt}var Bn;function hl(){if(Bn)return xe;Bn=1;var s=xe&&xe.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(xe,"__esModule",{value:!0}),xe.PostgrestError=xe.PostgrestBuilder=xe.PostgrestTransformBuilder=xe.PostgrestFilterBuilder=xe.PostgrestQueryBuilder=xe.PostgrestClient=void 0;const e=s(dl());xe.PostgrestClient=e.default;const t=s(ia());xe.PostgrestQueryBuilder=t.default;const r=s(Ks());xe.PostgrestFilterBuilder=r.default;const n=s(na());xe.PostgrestTransformBuilder=n.default;const i=s(sa());xe.PostgrestBuilder=i.default;const a=s(ra());return xe.PostgrestError=a.default,xe.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:n.default,PostgrestBuilder:i.default,PostgrestError:a.default},xe}var fl=hl();const pl=Vt(fl),{PostgrestClient:ml,PostgrestQueryBuilder:bm,PostgrestFilterBuilder:wm,PostgrestTransformBuilder:_m,PostgrestBuilder:xm,PostgrestError:jm}=pl;class gl{static dynamicRequire(e){try{return typeof process<"u"&&process.versions&&process.versions.node&&typeof require<"u"?require(e):null}catch{return null}}static detectEnvironment(){var e,t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);if(r>=22)try{if(typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};const n=this.dynamicRequire("undici");if(n&&n.WebSocket)return{type:"native",constructor:n.WebSocket};throw new Error("undici not available")}catch{return{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:'Install the "ws" package or check your Node.js installation.'}}try{const n=this.dynamicRequire("ws");if(n)return{type:"ws",constructor:(t=n.WebSocket)!==null&&t!==void 0?t:n};throw new Error("ws package not available")}catch{return{type:"unsupported",error:`Node.js ${r} detected without WebSocket support.`,workaround:'Install the "ws" package: npm install ws'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const yl="2.15.0",vl=`realtime-js/${yl}`,bl="1.0.0",Es=1e4,wl=1e3,_l=100;var sr;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(sr||(sr={}));var _e;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(_e||(_e={}));var $e;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})($e||($e={}));var ks;(function(s){s.websocket="websocket"})(ks||(ks={}));var mt;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(mt||(mt={}));class xl{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const n=t.getUint8(1),i=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=r.decode(e.slice(a,a+n));a=a+n;const l=r.decode(e.slice(a,a+i));a=a+i;const d=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:d}}}class aa{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ae;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(ae||(ae={}));const Vn=(s,e,t={})=>{var r;const n=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,a)=>(i[a]=jl(a,s,e,n),i),{})},jl=(s,e,t,r)=>{const n=e.find(o=>o.name===s),i=n==null?void 0:n.type,a=t[s];return i&&!r.includes(i)?oa(i,a):Ss(a)},oa=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return Pl(e,t)}switch(s){case ae.bool:return El(e);case ae.float4:case ae.float8:case ae.int2:case ae.int4:case ae.int8:case ae.numeric:case ae.oid:return kl(e);case ae.json:case ae.jsonb:return Sl(e);case ae.timestamp:return Ol(e);case ae.abstime:case ae.date:case ae.daterange:case ae.int4range:case ae.int8range:case ae.money:case ae.reltime:case ae.text:case ae.time:case ae.timestamptz:case ae.timetz:case ae.tsrange:case ae.tstzrange:return Ss(e);default:return Ss(e)}},Ss=s=>s,El=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},kl=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},Sl=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},Pl=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,r=s[t];if(s[0]==="{"&&r==="}"){let i;const a=s.slice(1,t);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>oa(e,o))}return s},Ol=s=>typeof s=="string"?s.replace(" ","T"):s,la=s=>{let e=s;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class es{constructor(e,t,r={},n=Es){this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Wn;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(Wn||(Wn={}));class nr{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=nr.syncState(this.state,n,i,a),this.pendingDiffs.forEach(l=>{this.state=nr.syncDiff(this.state,l,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},n=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=nr.syncDiff(this.state,n,i,a),o())}),this.onJoin((n,i,a)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:a})}),this.onLeave((n,i,a)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,n){const i=this.cloneDeep(e),a=this.transformState(t),o={},l={};return this.map(i,(d,h)=>{a[d]||(l[d]=h)}),this.map(a,(d,h)=>{const u=i[d];if(u){const f=h.map(j=>j.presence_ref),g=u.map(j=>j.presence_ref),y=h.filter(j=>g.indexOf(j.presence_ref)<0),b=u.filter(j=>f.indexOf(j.presence_ref)<0);y.length>0&&(o[d]=y),b.length>0&&(l[d]=b)}else o[d]=h}),this.syncDiff(i,{joins:o,leaves:l},r,n)}static syncDiff(e,t,r,n){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(o,l)=>{var d;const h=(d=e[o])!==null&&d!==void 0?d:[];if(e[o]=this.cloneDeep(l),h.length>0){const u=e[o].map(g=>g.presence_ref),f=h.filter(g=>u.indexOf(g.presence_ref)<0);e[o].unshift(...f)}r(o,h,l)}),this.map(a,(o,l)=>{let d=e[o];if(!d)return;const h=l.map(u=>u.presence_ref);d=d.filter(u=>h.indexOf(u.presence_ref)<0),e[o]=d,n(o,d,l),d.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const n=e[r];return"metas"in n?t[r]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Hn;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Hn||(Hn={}));var ir;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(ir||(ir={}));var Je;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(Je||(Je={}));class Js{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=_e.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new es(this,$e.join,this.params,this.timeout),this.rejoinTimer=new aa(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=_e.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=_e.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=_e.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=_e.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=_e.errored,this.rejoinTimer.scheduleTimeout())}),this._on($e.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new nr(this),this.broadcastEndpointURL=la(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,n;if(this.socket.isConnected()||this.socket.connect(),this.state==_e.closed){const{config:{broadcast:i,presence:a,private:o}}=this.params,l=(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&n!==void 0?n:[],d=!!this.bindings[ir.PRESENCE]&&this.bindings[ir.PRESENCE].length>0,h={},u={broadcast:i,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e(Je.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(Je.CLOSED)),this.updateJoinPayload(Object.assign({config:u},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:f})=>{var g;if(this.socket.setAuth(),f===void 0){e==null||e(Je.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,b=(g=y==null?void 0:y.length)!==null&&g!==void 0?g:0,j=[];for(let v=0;v<b;v++){const p=y[v],{filter:{event:m,schema:w,table:_,filter:S}}=p,k=f&&f[v];if(k&&k.event===m&&k.schema===w&&k.table===_&&k.filter===S)j.push(Object.assign(Object.assign({},p),{id:k.id}));else{this.unsubscribe(),this.state=_e.errored,e==null||e(Je.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=j,e&&e(Je.SUBSCRIBED);return}}).receive("error",f=>{this.state=_e.errored,e==null||e(Je.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Je.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===_e.joined&&e===ir.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e,t={}){var r,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((n=d.body)===null||n===void 0?void 0:n.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,l;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=_e.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($e.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{r=new es(this,$e.leave,{},e),r.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=_e.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const n=new AbortController,i=setTimeout(()=>n.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(i),a}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new es(this,e,t,r);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>_l){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var n,i;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:d,join:h}=$e;if(r&&[o,l,d,h].indexOf(a)>=0&&r!==this._joinRef())return;let f=this._onMessage(a,t,r);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(g=>{var y,b,j;return((y=g.filter)===null||y===void 0?void 0:y.event)==="*"||((j=(b=g.filter)===null||b===void 0?void 0:b.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===a}).map(g=>g.callback(f,r)):(i=this.bindings[a])===null||i===void 0||i.filter(g=>{var y,b,j,v,p,m;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const w=g.id,_=(y=g.filter)===null||y===void 0?void 0:y.event;return w&&((b=t.ids)===null||b===void 0?void 0:b.includes(w))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((j=t.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const w=(p=(v=g==null?void 0:g.filter)===null||v===void 0?void 0:v.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return w==="*"||w===((m=t==null?void 0:t.event)===null||m===void 0?void 0:m.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:b,table:j,commit_timestamp:v,type:p,errors:m}=y;f=Object.assign(Object.assign({},{schema:b,table:j,commit_timestamp:v,eventType:p,new:{},old:{},errors:m}),this._getPayloadRecords(y))}g.callback(f,r)})}_isClosed(){return this.state===_e.closed}_isJoined(){return this.state===_e.joined}_isJoining(){return this.state===_e.joining}_isLeaving(){return this.state===_e.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Js.isEqual(n.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on($e.close,{},e)}_onError(e){this._on($e.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=_e.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Vn(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Vn(e.columns,e.old_record)),t}}const zn=()=>{},wr={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Tl=[1e3,2e3,5e3,1e4],Cl=1e4,Nl=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Al{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Es,this.transport=null,this.heartbeatIntervalMs=wr.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=zn,this.ref=0,this.reconnectTimer=null,this.logger=zn,this.conn=null,this.sendBuffer=[],this.serializer=new xl,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=n=>{let i;return n?i=n:typeof fetch>"u"?i=(...a)=>oe(async()=>{const{default:o}=await Promise.resolve().then(()=>Wt);return{default:o}},void 0).then(({default:o})=>o(...a)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${ks.websocket}`,this.httpEndpoint=la(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=gl.createWebSocket(this.endpointURL())}catch(e){throw this._setConnectionState("disconnected"),new Error(`WebSocket not available: ${e.message}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:bl}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case sr.connecting:return mt.Connecting;case sr.open:return mt.Open;case sr.closing:return mt.Closing;default:return mt.Closed}}isConnected(){return this.connectionState()===mt.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,n=this.getChannels().find(i=>i.topic===r);if(n)return n;{const i=new Js(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:r,payload:n,ref:i}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${t} ${r} (${i})`,n),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(wl,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},wr.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{t.topic==="phoenix"&&t.event==="phx_reply"&&this.heartbeatCallback(t.payload.status==="ok"?"ok":"error"),t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:n,payload:i,ref:a}=t,o=a?`(${a})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${n} ${o}`.trim(),i),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(n,i,a)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger($e.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${r}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([Nl],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const n={access_token:t,version:vl};t&&r.updateJoinPayload(n),r.joinedOnce&&r._isJoined()&&r._push($e.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(n){this.log("error",`error in ${e} callback`,n)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new aa(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},wr.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,n,i,a,o,l,d;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Es,this.heartbeatIntervalMs=(n=e==null?void 0:e.heartbeatIntervalMs)!==null&&n!==void 0?n:wr.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(o=e==null?void 0:e.reconnectAfterMs)!==null&&o!==void 0?o:h=>Tl[h-1]||Cl,this.encode=(l=e==null?void 0:e.encode)!==null&&l!==void 0?l:(h,u)=>u(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Xs extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ee(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class Rl extends Xs{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ps extends Xs{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Ll=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{d(r.next(h))}catch(u){a(u)}}function l(h){try{d(r.throw(h))}catch(u){a(u)}}function d(h){h.done?i(h.value):n(h.value).then(o,l)}d((r=r.apply(s,e||[])).next())})};const ca=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>oe(async()=>{const{default:r}=await Promise.resolve().then(()=>Wt);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Dl=()=>Ll(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield oe(()=>Promise.resolve().then(()=>Wt),void 0)).Response:Response}),Os=s=>{if(Array.isArray(s))return s.map(t=>Os(t));if(typeof s=="function"||s!==Object(s))return s;const e={};return Object.entries(s).forEach(([t,r])=>{const n=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=Os(r)}),e},Ml=s=>{if(typeof s!="object"||s===null)return!1;const e=Object.getPrototypeOf(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)};var bt=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{d(r.next(h))}catch(u){a(u)}}function l(h){try{d(r.throw(h))}catch(u){a(u)}}function d(h){h.done?i(h.value):n(h.value).then(o,l)}d((r=r.apply(s,e||[])).next())})};const ts=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Il=(s,e,t)=>bt(void 0,void 0,void 0,function*(){const r=yield Dl();s instanceof r&&!(t!=null&&t.noResolveJson)?s.json().then(n=>{const i=s.status||500,a=(n==null?void 0:n.statusCode)||i+"";e(new Rl(ts(n),i,a))}).catch(n=>{e(new Ps(ts(n),n))}):e(new Ps(ts(s),s))}),$l=(s,e,t,r)=>{const n={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"||!r?n:(Ml(r)?(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(r)):n.body=r,Object.assign(Object.assign({},n),t))};function hr(s,e,t,r,n,i){return bt(this,void 0,void 0,function*(){return new Promise((a,o)=>{s(t,$l(e,r,n,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>Il(l,o,r))})})}function Tr(s,e,t,r){return bt(this,void 0,void 0,function*(){return hr(s,"GET",e,t,r)})}function Xe(s,e,t,r,n){return bt(this,void 0,void 0,function*(){return hr(s,"POST",e,r,n,t)})}function Ts(s,e,t,r,n){return bt(this,void 0,void 0,function*(){return hr(s,"PUT",e,r,n,t)})}function ql(s,e,t,r){return bt(this,void 0,void 0,function*(){return hr(s,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function ua(s,e,t,r,n){return bt(this,void 0,void 0,function*(){return hr(s,"DELETE",e,r,n,t)})}var Ce=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{d(r.next(h))}catch(u){a(u)}}function l(h){try{d(r.throw(h))}catch(u){a(u)}}function d(h){h.done?i(h.value):n(h.value).then(o,l)}d((r=r.apply(s,e||[])).next())})};const Ul={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Yn={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Fl{constructor(e,t={},r,n){this.url=e,this.headers=t,this.bucketId=r,this.fetch=ca(n)}uploadOrUpdate(e,t,r,n){return Ce(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},Yn),n);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),n!=null&&n.headers&&(o=Object.assign(Object.assign({},o),n.headers));const d=this._removeEmptyFolders(t),h=this._getFinalPath(d),u=yield(e=="PUT"?Ts:Xe)(this.fetch,`${this.url}/object/${h}`,i,Object.assign({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:d,id:u.Id,fullPath:u.Key},error:null}}catch(i){if(Ee(i))return{data:null,error:i};throw i}})}upload(e,t,r){return Ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,n){return Ce(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let l;const d=Object.assign({upsert:Yn.upsert},n),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",d.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",d.cacheControl)):(l=r,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);const u=yield Ts(this.fetch,o.toString(),l,{headers:h});return{data:{path:i,fullPath:u.Key},error:null}}catch(l){if(Ee(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return Ce(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const n=Object.assign({},this.headers);t!=null&&t.upsert&&(n["x-upsert"]="true");const i=yield Xe(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),a=new URL(this.url+i.url),o=a.searchParams.get("token");if(!o)throw new Xs("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(r){if(Ee(r))return{data:null,error:r};throw r}})}update(e,t,r){return Ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Ce(this,void 0,void 0,function*(){try{return{data:yield Xe(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(Ee(n))return{data:null,error:n};throw n}})}copy(e,t,r){return Ce(this,void 0,void 0,function*(){try{return{data:{path:(yield Xe(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(Ee(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,r){return Ce(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield Xe(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(n){if(Ee(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,r){return Ce(this,void 0,void 0,function*(){try{const n=yield Xe(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(n){if(Ee(n))return{data:null,error:n};throw n}})}download(e,t){return Ce(this,void 0,void 0,function*(){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield Tr(this.fetch,`${this.url}/${n}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(Ee(o))return{data:null,error:o};throw o}})}info(e){return Ce(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Tr(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Os(r),error:null}}catch(r){if(Ee(r))return{data:null,error:r};throw r}})}exists(e){return Ce(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield ql(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Ee(r)&&r instanceof Ps){const n=r.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&n.push(i);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&n.push(l);let d=n.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${d}`)}}}remove(e){return Ce(this,void 0,void 0,function*(){try{return{data:yield ua(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Ee(t))return{data:null,error:t};throw t}})}list(e,t,r){return Ce(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Ul),t),{prefix:e||""});return{data:yield Xe(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(Ee(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Bl="2.10.4",Vl={"X-Client-Info":`storage-js/${Bl}`};var Ot=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{d(r.next(h))}catch(u){a(u)}}function l(h){try{d(r.throw(h))}catch(u){a(u)}}function d(h){h.done?i(h.value):n(h.value).then(o,l)}d((r=r.apply(s,e||[])).next())})};class Wl{constructor(e,t={},r,n){const i=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},Vl),t),this.fetch=ca(r)}listBuckets(){return Ot(this,void 0,void 0,function*(){try{return{data:yield Tr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ee(e))return{data:null,error:e};throw e}})}getBucket(e){return Ot(this,void 0,void 0,function*(){try{return{data:yield Tr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Ee(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Ot(this,void 0,void 0,function*(){try{return{data:yield Xe(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ee(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Ot(this,void 0,void 0,function*(){try{return{data:yield Ts(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ee(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ot(this,void 0,void 0,function*(){try{return{data:yield Xe(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Ee(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Ot(this,void 0,void 0,function*(){try{return{data:yield ua(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Ee(t))return{data:null,error:t};throw t}})}}class Hl extends Wl{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new Fl(this.url,this.headers,e,this.fetch)}}const zl="2.54.0";let tr="";typeof Deno<"u"?tr="deno":typeof document<"u"?tr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?tr="react-native":tr="node";const Yl={"X-Client-Info":`supabase-js-${tr}/${zl}`},Gl={headers:Yl},Kl={schema:"public"},Jl={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Xl={};var Ql=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{d(r.next(h))}catch(u){a(u)}}function l(h){try{d(r.throw(h))}catch(u){a(u)}}function d(h){h.done?i(h.value):n(h.value).then(o,l)}d((r=r.apply(s,e||[])).next())})};const Zl=s=>{let e;return s?e=s:typeof fetch>"u"?e=ea:e=fetch,(...t)=>e(...t)},ec=()=>typeof Headers>"u"?ta:Headers,tc=(s,e,t)=>{const r=Zl(t),n=ec();return(i,a)=>Ql(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:s;let d=new n(a==null?void 0:a.headers);return d.has("apikey")||d.set("apikey",s),d.has("Authorization")||d.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},a),{headers:d}))})};var rc=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{d(r.next(h))}catch(u){a(u)}}function l(h){try{d(r.throw(h))}catch(u){a(u)}}function d(h){h.done?i(h.value):n(h.value).then(o,l)}d((r=r.apply(s,e||[])).next())})};function sc(s){return s.endsWith("/")?s:s+"/"}function nc(s,e){var t,r;const{db:n,auth:i,realtime:a,global:o}=s,{db:l,auth:d,realtime:h,global:u}=e,f={db:Object.assign(Object.assign({},l),n),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},h),a),storage:{},global:Object.assign(Object.assign(Object.assign({},u),o),{headers:Object.assign(Object.assign({},(t=u==null?void 0:u.headers)!==null&&t!==void 0?t:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>rc(this,void 0,void 0,function*(){return""})};return s.accessToken?f.accessToken=s.accessToken:delete f.accessToken,f}const da="2.71.1",Mt=30*1e3,Cs=3,rs=Cs*Mt,ic="http://localhost:9999",ac="supabase.auth.token",oc={"X-Client-Info":`gotrue-js/${da}`},Ns="X-Supabase-Api-Version",ha={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},lc=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,cc=600*1e3;class Qs extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function G(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class uc extends Qs{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function dc(s){return G(s)&&s.name==="AuthApiError"}class fa extends Qs{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ot extends Qs{constructor(e,t,r,n){super(e,r,n),this.name=t,this.status=r}}class rt extends ot{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function hc(s){return G(s)&&s.name==="AuthSessionMissingError"}class _r extends ot{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class xr extends ot{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class jr extends ot{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function fc(s){return G(s)&&s.name==="AuthImplicitGrantRedirectError"}class Gn extends ot{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class As extends ot{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function ss(s){return G(s)&&s.name==="AuthRetryableFetchError"}class Kn extends ot{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Rs extends ot{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Cr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Jn=` 	
\r=`.split(""),pc=(()=>{const s=new Array(128);for(let e=0;e<s.length;e+=1)s[e]=-1;for(let e=0;e<Jn.length;e+=1)s[Jn[e].charCodeAt(0)]=-2;for(let e=0;e<Cr.length;e+=1)s[Cr[e].charCodeAt(0)]=e;return s})();function Xn(s,e,t){if(s!==null)for(e.queue=e.queue<<8|s,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Cr[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Cr[r]),e.queuedBits-=6}}function pa(s,e,t){const r=pc[s];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function Qn(s){const e=[],t=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=a=>{yc(a,r,t)};for(let a=0;a<s.length;a+=1)pa(s.charCodeAt(a),n,i);return e.join("")}function mc(s,e){if(s<=127){e(s);return}else if(s<=2047){e(192|s>>6),e(128|s&63);return}else if(s<=65535){e(224|s>>12),e(128|s>>6&63),e(128|s&63);return}else if(s<=1114111){e(240|s>>18),e(128|s>>12&63),e(128|s>>6&63),e(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function gc(s,e){for(let t=0;t<s.length;t+=1){let r=s.charCodeAt(t);if(r>55295&&r<=56319){const n=(r-55296)*1024&65535;r=(s.charCodeAt(t+1)-56320&65535|n)+65536,t+=1}mc(r,e)}}function yc(s,e,t){if(e.utf8seq===0){if(s<=127){t(s);return}for(let r=1;r<6;r+=1)if((s>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=s&31;else if(e.utf8seq===3)e.codepoint=s&15;else if(e.utf8seq===4)e.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|s&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function vc(s){const e=[],t={queue:0,queuedBits:0},r=n=>{e.push(n)};for(let n=0;n<s.length;n+=1)pa(s.charCodeAt(n),t,r);return new Uint8Array(e)}function bc(s){const e=[];return gc(s,t=>e.push(t)),new Uint8Array(e)}function wc(s){const e=[],t={queue:0,queuedBits:0},r=n=>{e.push(n)};return s.forEach(n=>Xn(n,t,r)),Xn(null,t,r),e.join("")}function _c(s){return Math.round(Date.now()/1e3)+s}function xc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}const Ie=()=>typeof window<"u"&&typeof document<"u",dt={tested:!1,writable:!1},ma=()=>{if(!Ie())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(dt.tested)return dt.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),dt.tested=!0,dt.writable=!0}catch{dt.tested=!0,dt.writable=!1}return dt.writable};function jc(s){const e={},t=new URL(s);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return t.searchParams.forEach((r,n)=>{e[n]=r}),e}const ga=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>oe(async()=>{const{default:r}=await Promise.resolve().then(()=>Wt);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Ec=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",It=async(s,e,t)=>{await s.setItem(e,JSON.stringify(t))},ht=async(s,e)=>{const t=await s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},et=async(s,e)=>{await s.removeItem(e)};class Ur{constructor(){this.promise=new Ur.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Ur.promiseConstructor=Promise;function ns(s){const e=s.split(".");if(e.length!==3)throw new Rs("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!lc.test(e[r]))throw new Rs("JWT not in base64url format");return{header:JSON.parse(Qn(e[0])),payload:JSON.parse(Qn(e[1])),signature:vc(e[2]),raw:{header:e[0],payload:e[1]}}}async function kc(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function Sc(s,e){return new Promise((r,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await s(i);if(!e(i,null,a)){r(a);return}}catch(a){if(!e(i,a)){n(a);return}}})()})}function Pc(s){return("0"+s.toString(16)).substr(-2)}function Oc(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let n="";for(let i=0;i<56;i++)n+=t.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(e),Array.from(e,Pc).join("")}async function Tc(s){const t=new TextEncoder().encode(s),r=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(r);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function Cc(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const t=await Tc(s);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Tt(s,e,t=!1){const r=Oc();let n=r;t&&(n+="/PASSWORD_RECOVERY"),await It(s,`${e}-code-verifier`,n);const i=await Cc(r);return[i,r===i?"plain":"s256"]}const Nc=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ac(s){const e=s.headers.get(Ns);if(!e||!e.match(Nc))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Rc(s){if(!s)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(s<=e)throw new Error("JWT has expired")}function Lc(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Dc=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ct(s){if(!Dc.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function is(){const s={};return new Proxy(s,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Zn(s){return JSON.parse(JSON.stringify(s))}var Mc=function(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(s);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(s,r[n])&&(t[r[n]]=s[r[n]]);return t};const ft=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Ic=[502,503,504];async function ei(s){var e;if(!Ec(s))throw new As(ft(s),0);if(Ic.includes(s.status))throw new As(ft(s),s.status);let t;try{t=await s.json()}catch(i){throw new fa(ft(i),i)}let r;const n=Ac(s);if(n&&n.getTime()>=ha["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new Kn(ft(t),s.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new rt}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new Kn(ft(t),s.status,t.weak_password.reasons);throw new uc(ft(t),s.status||500,r)}const $c=(s,e,t,r)=>{const n={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),t))};async function J(s,e,t,r){var n;const i=Object.assign({},r==null?void 0:r.headers);i[Ns]||(i[Ns]=ha["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(n=r==null?void 0:r.query)!==null&&n!==void 0?n:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await qc(s,e,t+o,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function qc(s,e,t,r,n,i){const a=$c(e,r,n,i);let o;try{o=await s(t,Object.assign({},a))}catch(l){throw console.error(l),new As(ft(l),0)}if(o.ok||await ei(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(l){await ei(l)}}function Ke(s){var e;let t=null;Vc(s)&&(t=Object.assign({},s),s.expires_at||(t.expires_at=_c(s.expires_in)));const r=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:r},error:null}}function ti(s){const e=Ke(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=s.weak_password),e}function st(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function Uc(s){return{data:s,error:null}}function Fc(s){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:n,verification_type:i}=s,a=Mc(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:r,redirect_to:n,verification_type:i},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function Bc(s){return s}function Vc(s){return s.access_token&&s.refresh_token&&s.expires_in}const as=["global","local","others"];var Wc=function(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(s);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(s,r[n])&&(t[r[n]]=s[r[n]]);return t};class Hc{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=ga(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=as[0]){if(as.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${as.join(", ")}`);try{return await J(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await J(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:st})}catch(r){if(G(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Wc(e,["options"]),n=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(n.new_email=r==null?void 0:r.newEmail,delete n.newEmail),await J(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Fc,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(G(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await J(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:st})}catch(t){if(G(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,n,i,a,o,l;try{const d={nextPage:null,lastPage:0,total:0},h=await J(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:Bc});if(h.error)throw h.error;const u=await h.json(),f=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(l=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(y=>{const b=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(y.split(";")[1].split("=")[1]);d[`${j}Page`]=b}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},u),d),error:null}}catch(d){if(G(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Ct(e);try{return await J(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:st})}catch(t){if(G(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Ct(e);try{return await J(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:st})}catch(r){if(G(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Ct(e);try{return await J(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:st})}catch(r){if(G(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Ct(e.userId);try{const{data:t,error:r}=await J(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:r}}catch(t){if(G(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Ct(e.userId),Ct(e.id);try{return{data:await J(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(G(t))return{data:null,error:t};throw t}}}function ri(s={}){return{getItem:e=>s[e]||null,setItem:(e,t)=>{s[e]=t},removeItem:e=>{delete s[e]}}}function zc(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Nt={debug:!!(globalThis&&ma()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ya extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Yc extends ya{}async function Gc(s,e,t){Nt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Nt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async n=>{if(n){Nt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,n.name);try{return await t()}finally{Nt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,n.name)}}else{if(e===0)throw Nt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new Yc(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(Nt.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}zc();const Kc={url:ic,storageKey:ac,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:oc,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function si(s,e,t){return await t()}const At={};class ur{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ur.nextInstanceID,ur.nextInstanceID+=1,this.instanceID>0&&Ie()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Kc),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Hc({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=ga(n.fetch),this.lock=n.lock||si,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:Ie()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Gc:this.lock=si,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:ma()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ri(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=ri(this.memoryStorage)),Ie()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=At[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){At[this.storageKey]=Object.assign(Object.assign({},At[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=At[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){At[this.storageKey]=Object.assign(Object.assign({},At[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${da}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=jc(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),Ie()&&this.detectSessionInUrl&&r!=="none"){const{data:n,error:i}=await this._getSessionFromURL(t,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),fc(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:o}=n;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return G(t)?{error:t}:{error:new fa("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,n;try{const i=await J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:Ke}),{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(i){if(G(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,r,n;try{let i;if("email"in e){const{email:h,password:u,options:f}=e;let g=null,y=null;this.flowType==="pkce"&&([g,y]=await Tt(this.storage,this.storageKey)),i=await J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:h,password:u,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:g,code_challenge_method:y},xform:Ke})}else if("phone"in e){const{phone:h,password:u,options:f}=e;i=await J(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:u,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(n=f==null?void 0:f.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Ke})}else throw new xr("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(i){if(G(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:a,options:o}=e;t=await J(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:ti})}else if("phone"in e){const{phone:i,password:a,options:o}=e;t=await J(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:ti})}else throw new xr("You must provide either an email or phone number and a password");const{data:r,error:n}=t;return n?{data:{user:null,session:null},error:n}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new _r}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(t){if(G(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,n,i,a,o,l,d,h,u,f,g;let y,b;if("message"in e)y=e.message,b=e.signature;else{const{chain:j,wallet:v,statement:p,options:m}=e;let w;if(Ie())if(typeof v=="object")w=v;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))w=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=v}const _=new URL((t=m==null?void 0:m.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in w&&w.signIn){const S=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},m==null?void 0:m.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),p?{statement:p}:null));let k;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")k=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)k=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)y=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),b=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${_.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(n=(r=m==null?void 0:m.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=m==null?void 0:m.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...!((a=m==null?void 0:m.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...!((o=m==null?void 0:m.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...!((l=m==null?void 0:m.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...!((d=m==null?void 0:m.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...!((u=(h=m==null?void 0:m.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||u===void 0)&&u.length?["Resources",...m.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const S=await w.signMessage(new TextEncoder().encode(y),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=S}}try{const{data:j,error:v}=await J(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:wc(b)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Ke});if(v)throw v;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new _r}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:v})}catch(j){if(G(j))return{data:{user:null,session:null},error:j};throw j}}async _exchangeCodeForSession(e){const t=await ht(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(t??"").split("/");try{const{data:i,error:a}=await J(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Ke});if(await et(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new _r}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:a})}catch(i){if(G(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:r,token:n,access_token:i,nonce:a}=e,o=await J(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Ke}),{data:l,error:d}=o;return d?{data:{user:null,session:null},error:d}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new _r}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:d})}catch(t){if(G(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,n,i,a;try{if("email"in e){const{email:o,options:l}=e;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await Tt(this.storage,this.storageKey));const{error:u}=await J(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:u}}if("phone"in e){const{phone:o,options:l}=e,{data:d,error:h}=await J(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:h}}throw new xr("You must provide either an email or phone number.")}catch(o){if(G(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,r;try{let n,i;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await J(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:Ke});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,d=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(n){if(G(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,r,n;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Tt(this.storage,this.storageKey)),await J(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:Uc})}catch(i){if(G(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new rt;const{error:n}=await J(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(G(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:i}=e,{error:a}=await J(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:n,options:i}=e,{data:a,error:o}=await J(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new xr("You must provide either an email or phone number and a type")}catch(t){if(G(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await ht(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<rs:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await ht(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=is()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,d,h)=>(!a&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,d,h))})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await J(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:st}):await this._useSession(async t=>{var r,n,i;const{data:a,error:o}=t;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new rt}:await J(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:st})})}catch(t){if(G(t))return hc(t)&&(await this._removeSession(),await et(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new rt;const a=n.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await Tt(this.storage,this.storageKey));const{data:d,error:h}=await J(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:st});if(h)throw h;return a.user=d.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(G(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new rt;const t=Date.now()/1e3;let r=t,n=!0,i=null;const{payload:a}=ns(e.access_token);if(a.exp&&(r=a.exp,n=r<=t),n){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(G(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:a,error:o}=t;if(o)throw o;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new rt;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(G(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Ie())throw new jr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new jr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Gn("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new jr("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Gn("No code detected.");const{data:p,error:m}=await this._exchangeCodeForSession(e.code);if(m)throw m;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:a,expires_in:o,expires_at:l,token_type:d}=e;if(!i||!o||!a||!d)throw new jr("No session defined in URL");const h=Math.round(Date.now()/1e3),u=parseInt(o);let f=h+u;l&&(f=parseInt(l));const g=f-h;g*1e3<=Mt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${u}s`);const y=f-u;h-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,h):h-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,h);const{data:b,error:j}=await this._getUser(i);if(j)throw j;const v={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:u,expires_at:f,refresh_token:a,token_type:d,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(r){if(G(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ht(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:n,error:i}=t;if(i)return{error:i};const a=(r=n.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(dc(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await et(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=xc(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,n;try{const{data:{session:i},error:a}=t;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let r=null,n=null;this.flowType==="pkce"&&([r,n]=await Tt(this.storage,this.storageKey,!0));try{return await J(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(G(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(G(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:n}=await this._useSession(async i=>{var a,o,l,d,h;const{data:u,error:f}=i;if(f)throw f;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await J(this.fetch,"GET",g,{headers:this.headers,jwt:(h=(d=u.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(n)throw n;return Ie()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(G(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,n;const{data:i,error:a}=t;if(a)throw a;return await J(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})})}catch(t){if(G(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await Sc(async n=>(n>0&&await kc(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await J(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ke})),(n,i)=>{const a=200*Math.pow(2,n);return i&&ss(i)&&Date.now()+a-r<Mt})}catch(r){if(this._debug(t,"error",r),G(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Ie()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await ht(this.storage,this.storageKey);if(n&&this.userStorage){let a=await ht(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:n.user},await It(this.userStorage,this.storageKey+"-user",a)),n.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:is()}else if(n&&!n.user&&!n.user){const a=await ht(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(n.user=a.user,await et(this.storage,this.storageKey+"-user"),await It(this.storage,this.storageKey,n)):n.user=is()}if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const i=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<rs;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${rs}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),ss(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(n.access_token);!o&&(a!=null&&a.user)?(n.user=a.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new rt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Ur;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new rt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(n,"error",i),G(i)){const a={session:null,error:i};return ss(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(l){i.push(l)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await It(this.userStorage,this.storageKey+"-user",{user:t.user});const n=Object.assign({},t);delete n.user;const i=Zn(n);await It(this.storage,this.storageKey,i)}else{const n=Zn(t);await It(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),await et(this.storage,this.storageKey),await et(this.storage,this.storageKey+"-code-verifier"),await et(this.storage,this.storageKey+"-user"),this.userStorage&&await et(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ie()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Mt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((r.expires_at*1e3-e)/Mt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Mt}ms, refresh threshold is ${Cs} ticks`),n<=Cs&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ya)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ie()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const n=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await Tt(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});n.push(o.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);n.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:n,error:i}=t;return i?{data:null,error:i}:await J(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(G(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,n;const{data:i,error:a}=t;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:d}=await J(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(G(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:o}=await J(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(G(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:i}=t;return i?{data:null,error:i}:await J(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(G(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],n=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=ns(n.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(u=>u.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const h=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(o=>o.kid===e);if(r)return r;const n=Date.now();if(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+cc>n)return r;const{data:i,error:a}=await J(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=n,r=i.keys.find(o=>o.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:g,error:y}=await this.getSession();if(y||!g.session)return{data:null,error:y};r=g.session.access_token}const{header:n,payload:i,signature:a,raw:{header:o,payload:l}}=ns(r);t!=null&&t.allowExpired||Rc(i.exp);const d=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!d){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:i,header:n,signature:a},error:null}}const h=Lc(n.alg),u=await crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!await crypto.subtle.verify(h,u,a,bc(`${o}.${l}`)))throw new Rs("Invalid JWT signature");return{data:{claims:i,header:n,signature:a},error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}}}ur.nextInstanceID=0;const Jc=ur;class Xc extends Jc{constructor(e){super(e)}}var Qc=function(s,e,t,r){function n(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{d(r.next(h))}catch(u){a(u)}}function l(h){try{d(r.throw(h))}catch(u){a(u)}}function d(h){h.done?i(h.value):n(h.value).then(o,l)}d((r=r.apply(s,e||[])).next())})};class Zc{constructor(e,t,r){var n,i,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=sc(e),l=new URL(o);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const d=`sb-${l.hostname.split(".")[0]}-auth-token`,h={db:Kl,realtime:Xl,auth:Object.assign(Object.assign({},Jl),{storageKey:d}),global:Gl},u=nc(r??{},h);this.storageKey=(n=u.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(f,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=u.auth)!==null&&a!==void 0?a:{},this.headers,u.global.fetch),this.fetch=tc(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new ml(new URL("rest/v1",l).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new Hl(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new sl(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Qc(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,storageKey:i,flowType:a,lock:o,debug:l},d,h){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Xc({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,flowType:a,lock:o,debug:l,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Al(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const eu=(s,e,t)=>new Zc(s,e,t);function tu(){if(typeof window<"u"||typeof process>"u")return!1;const s=process.version;if(s==null)return!1;const e=s.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}tu()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ru="https://zouclebojnmsecpmdtth.supabase.co",su="eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpvdWNsZWJvam5tc2VjcG1kdHRoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcwMDk1MTksImV4cCI6MjA2MjU4NTUxOX0.ZtriNf7xDswUWCNQUen575DuKaMRtUnEcVW940RLx0Q",H=eu(ru,su,{auth:{persistSession:!0,detectSessionInUrl:!0,autoRefreshToken:!0,storage:window.localStorage},global:{headers:{"X-Client-Info":"black-road-music@0.1.0","X-Client-Env":"production"}}});let nu={data:""},iu=s=>typeof window=="object"?((s?s.querySelector("#_goober"):window._goober)||Object.assign((s||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:s||nu,au=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,ou=/\/\*[^]*?\*\/|  +/g,ni=/\n+/g,nt=(s,e)=>{let t="",r="",n="";for(let i in s){let a=s[i];i[0]=="@"?i[1]=="i"?t=i+" "+a+";":r+=i[1]=="f"?nt(a,i):i+"{"+nt(a,i[1]=="k"?"":e)+"}":typeof a=="object"?r+=nt(a,e?e.replace(/([^,])+/g,o=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,o):o?o+" "+l:l)):i):a!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=nt.p?nt.p(i,a):i+":"+a+";")}return t+(e&&n?e+"{"+n+"}":n)+r},Ye={},va=s=>{if(typeof s=="object"){let e="";for(let t in s)e+=t+va(s[t]);return e}return s},lu=(s,e,t,r,n)=>{let i=va(s),a=Ye[i]||(Ye[i]=(l=>{let d=0,h=11;for(;d<l.length;)h=101*h+l.charCodeAt(d++)>>>0;return"go"+h})(i));if(!Ye[a]){let l=i!==s?s:(d=>{let h,u,f=[{}];for(;h=au.exec(d.replace(ou,""));)h[4]?f.shift():h[3]?(u=h[3].replace(ni," ").trim(),f.unshift(f[0][u]=f[0][u]||{})):f[0][h[1]]=h[2].replace(ni," ").trim();return f[0]})(s);Ye[a]=nt(n?{["@keyframes "+a]:l}:l,t?"":"."+a)}let o=t&&Ye.g?Ye.g:null;return t&&(Ye.g=Ye[a]),((l,d,h,u)=>{u?d.data=d.data.replace(u,l):d.data.indexOf(l)===-1&&(d.data=h?l+d.data:d.data+l)})(Ye[a],e,r,o),a},cu=(s,e,t)=>s.reduce((r,n,i)=>{let a=e[i];if(a&&a.call){let o=a(t),l=o&&o.props&&o.props.className||/^go/.test(o)&&o;a=l?"."+l:o&&typeof o=="object"?o.props?"":nt(o,""):o===!1?"":o}return r+n+(a??"")},"");function Fr(s){let e=this||{},t=s.call?s(e.p):s;return lu(t.unshift?t.raw?cu(t,[].slice.call(arguments,1),e.p):t.reduce((r,n)=>Object.assign(r,n&&n.call?n(e.p):n),{}):t,iu(e.target),e.g,e.o,e.k)}let ba,Ls,Ds;Fr.bind({g:1});let Qe=Fr.bind({k:1});function uu(s,e,t,r){nt.p=e,ba=s,Ls=t,Ds=r}function lt(s,e){let t=this||{};return function(){let r=arguments;function n(i,a){let o=Object.assign({},i),l=o.className||n.className;t.p=Object.assign({theme:Ls&&Ls()},o),t.o=/ *go\d+/.test(l),o.className=Fr.apply(t,r)+(l?" "+l:"");let d=s;return s[0]&&(d=o.as||s,delete o.as),Ds&&d[0]&&Ds(o),ba(d,o)}return n}}var du=s=>typeof s=="function",Nr=(s,e)=>du(s)?s(e):s,hu=(()=>{let s=0;return()=>(++s).toString()})(),wa=(()=>{let s;return()=>{if(s===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");s=!e||e.matches}return s}})(),fu=20,_a=(s,e)=>{switch(e.type){case 0:return{...s,toasts:[e.toast,...s.toasts].slice(0,fu)};case 1:return{...s,toasts:s.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:t}=e;return _a(s,{type:s.toasts.find(i=>i.id===t.id)?1:0,toast:t});case 3:let{toastId:r}=e;return{...s,toasts:s.toasts.map(i=>i.id===r||r===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return e.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...s,pausedAt:e.time};case 6:let n=e.time-(s.pausedAt||0);return{...s,pausedAt:void 0,toasts:s.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+n}))}}},Sr=[],gt={toasts:[],pausedAt:void 0},wt=s=>{gt=_a(gt,s),Sr.forEach(e=>{e(gt)})},pu={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},mu=(s={})=>{let[e,t]=C.useState(gt),r=C.useRef(gt);C.useEffect(()=>(r.current!==gt&&t(gt),Sr.push(t),()=>{let i=Sr.indexOf(t);i>-1&&Sr.splice(i,1)}),[]);let n=e.toasts.map(i=>{var a,o,l;return{...s,...s[i.type],...i,removeDelay:i.removeDelay||((a=s[i.type])==null?void 0:a.removeDelay)||(s==null?void 0:s.removeDelay),duration:i.duration||((o=s[i.type])==null?void 0:o.duration)||(s==null?void 0:s.duration)||pu[i.type],style:{...s.style,...(l=s[i.type])==null?void 0:l.style,...i.style}}});return{...e,toasts:n}},gu=(s,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:s,pauseDuration:0,...t,id:(t==null?void 0:t.id)||hu()}),fr=s=>(e,t)=>{let r=gu(e,s,t);return wt({type:2,toast:r}),r.id},Te=(s,e)=>fr("blank")(s,e);Te.error=fr("error");Te.success=fr("success");Te.loading=fr("loading");Te.custom=fr("custom");Te.dismiss=s=>{wt({type:3,toastId:s})};Te.remove=s=>wt({type:4,toastId:s});Te.promise=(s,e,t)=>{let r=Te.loading(e.loading,{...t,...t==null?void 0:t.loading});return typeof s=="function"&&(s=s()),s.then(n=>{let i=e.success?Nr(e.success,n):void 0;return i?Te.success(i,{id:r,...t,...t==null?void 0:t.success}):Te.dismiss(r),n}).catch(n=>{let i=e.error?Nr(e.error,n):void 0;i?Te.error(i,{id:r,...t,...t==null?void 0:t.error}):Te.dismiss(r)}),s};var yu=(s,e)=>{wt({type:1,toast:{id:s,height:e}})},vu=()=>{wt({type:5,time:Date.now()})},ar=new Map,bu=1e3,wu=(s,e=bu)=>{if(ar.has(s))return;let t=setTimeout(()=>{ar.delete(s),wt({type:4,toastId:s})},e);ar.set(s,t)},_u=s=>{let{toasts:e,pausedAt:t}=mu(s);C.useEffect(()=>{if(t)return;let i=Date.now(),a=e.map(o=>{if(o.duration===1/0)return;let l=(o.duration||0)+o.pauseDuration-(i-o.createdAt);if(l<0){o.visible&&Te.dismiss(o.id);return}return setTimeout(()=>Te.dismiss(o.id),l)});return()=>{a.forEach(o=>o&&clearTimeout(o))}},[e,t]);let r=C.useCallback(()=>{t&&wt({type:6,time:Date.now()})},[t]),n=C.useCallback((i,a)=>{let{reverseOrder:o=!1,gutter:l=8,defaultPosition:d}=a||{},h=e.filter(g=>(g.position||d)===(i.position||d)&&g.height),u=h.findIndex(g=>g.id===i.id),f=h.filter((g,y)=>y<u&&g.visible).length;return h.filter(g=>g.visible).slice(...o?[f+1]:[0,f]).reduce((g,y)=>g+(y.height||0)+l,0)},[e]);return C.useEffect(()=>{e.forEach(i=>{if(i.dismissed)wu(i.id,i.removeDelay);else{let a=ar.get(i.id);a&&(clearTimeout(a),ar.delete(i.id))}})},[e]),{toasts:e,handlers:{updateHeight:yu,startPause:vu,endPause:r,calculateOffset:n}}},xu=Qe`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,ju=Qe`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Eu=Qe`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,ku=lt("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${xu} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${ju} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${s=>s.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Eu} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Su=Qe`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Pu=lt("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${s=>s.secondary||"#e0e0e0"};
  border-right-color: ${s=>s.primary||"#616161"};
  animation: ${Su} 1s linear infinite;
`,Ou=Qe`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Tu=Qe`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Cu=lt("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Ou} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Tu} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${s=>s.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Nu=lt("div")`
  position: absolute;
`,Au=lt("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Ru=Qe`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Lu=lt("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Ru} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Du=({toast:s})=>{let{icon:e,type:t,iconTheme:r}=s;return e!==void 0?typeof e=="string"?C.createElement(Lu,null,e):e:t==="blank"?null:C.createElement(Au,null,C.createElement(Pu,{...r}),t!=="loading"&&C.createElement(Nu,null,t==="error"?C.createElement(ku,{...r}):C.createElement(Cu,{...r})))},Mu=s=>`
0% {transform: translate3d(0,${s*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Iu=s=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${s*-150}%,-1px) scale(.6); opacity:0;}
`,$u="0%{opacity:0;} 100%{opacity:1;}",qu="0%{opacity:1;} 100%{opacity:0;}",Uu=lt("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Fu=lt("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Bu=(s,e)=>{let t=s.includes("top")?1:-1,[r,n]=wa()?[$u,qu]:[Mu(t),Iu(t)];return{animation:e?`${Qe(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Qe(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Vu=C.memo(({toast:s,position:e,style:t,children:r})=>{let n=s.height?Bu(s.position||e||"top-center",s.visible):{opacity:0},i=C.createElement(Du,{toast:s}),a=C.createElement(Fu,{...s.ariaProps},Nr(s.message,s));return C.createElement(Uu,{className:s.className,style:{...n,...t,...s.style}},typeof r=="function"?r({icon:i,message:a}):C.createElement(C.Fragment,null,i,a))});uu(C.createElement);var Wu=({id:s,className:e,style:t,onHeightUpdate:r,children:n})=>{let i=C.useCallback(a=>{if(a){let o=()=>{let l=a.getBoundingClientRect().height;r(s,l)};o(),new MutationObserver(o).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[s,r]);return C.createElement("div",{ref:i,className:e,style:t},n)},Hu=(s,e)=>{let t=s.includes("top"),r=t?{top:0}:{bottom:0},n=s.includes("center")?{justifyContent:"center"}:s.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:wa()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...r,...n}},zu=Fr`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Er=16,Yu=({reverseOrder:s,position:e="top-center",toastOptions:t,gutter:r,children:n,containerStyle:i,containerClassName:a})=>{let{toasts:o,handlers:l}=_u(t);return C.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Er,left:Er,right:Er,bottom:Er,pointerEvents:"none",...i},className:a,onMouseEnter:l.startPause,onMouseLeave:l.endPause},o.map(d=>{let h=d.position||e,u=l.calculateOffset(d,{reverseOrder:s,gutter:r,defaultPosition:e}),f=Hu(h,u);return C.createElement(Wu,{id:d.id,key:d.id,onHeightUpdate:l.updateHeight,className:d.visible?zu:"",style:f},d.type==="custom"?Nr(d.message,d):n?n(d):C.createElement(Vu,{toast:d,position:h}))}))},Rt=Te;const Ms=s=>s instanceof Error?s.message:typeof s=="string"?s:s&&typeof s=="object"&&"message"in s?String(s.message):"Erreur inconnue",Z=dr(()=>({showError:s=>{Rt.error(s)},showSuccess:s=>{Rt.success(s)},showWarning:s=>{Rt(s,{icon:"⚠️"})},getErrorMessage:Ms,handleError:(s,e)=>{const t=Ms(s),r=e?`${e}: ${t}`:t;return Rt.error(r),t},handleSuccess:s=>{Rt.success(s)},handleWarning:s=>{Rt(s,{icon:"⚠️"})}})),Le={getErrorMessage:Ms,withErrorHandling:async(s,e)=>{try{return await s()}catch(t){return Z.getState().handleError(t,e),null}}},pr=dr((s,e)=>({isAuthenticated:!1,isAdmin:!1,isLoading:!0,signIn:async(t,r)=>{var n;s({isLoading:!0});try{const{data:{user:i},error:a}=await H.auth.signInWithPassword({email:t,password:r});if(a)throw a;if(!i)throw new Error("No user returned after sign in");if(!(((n=i.app_metadata)==null?void 0:n.role)==="admin"))throw await H.auth.signOut(),new Error("Accès non autorisé. Seuls les administrateurs peuvent se connecter.");s({isAuthenticated:!0,isAdmin:!0})}catch(i){const{handleError:a}=Z.getState();throw a("Erreur de connexion",i.message),s({isAuthenticated:!1,isAdmin:!1}),i}finally{s({isLoading:!1})}},signOut:async()=>{s({isLoading:!0});try{const{error:t}=await H.auth.signOut();if(t)throw t;s({isAuthenticated:!1,isAdmin:!1})}catch(t){const{handleError:r}=Z.getState();r("Erreur lors de la déconnexion",t.message)}finally{s({isLoading:!1})}},checkAuth:async()=>{var t;s({isLoading:!0});try{const{data:{session:r}}=await H.auth.getSession();if(!r){s({isAuthenticated:!1,isAdmin:!1});return}const n=((t=r.user.app_metadata)==null?void 0:t.role)==="admin";s({isAuthenticated:!!r,isAdmin:n})}catch(r){const{handleError:n}=Z.getState();n("Erreur de vérification d'authentification",r.message),s({isAuthenticated:!1,isAdmin:!1})}finally{s({isLoading:!1})}},initialize:()=>{e().checkAuth(),H.auth.onAuthStateChange(async(t,r)=>{var n;if(t==="SIGNED_OUT"||!r){s({isAuthenticated:!1,isAdmin:!1,isLoading:!1});return}if(t==="SIGNED_IN"||t==="TOKEN_REFRESHED"){if(!(((n=r.user.app_metadata)==null?void 0:n.role)==="admin")){await H.auth.signOut();const{handleError:a}=Z.getState();a("Accès refusé","Seuls les administrateurs peuvent se connecter."),s({isAuthenticated:!1,isAdmin:!1,isLoading:!1});return}s({isAuthenticated:!0,isAdmin:!0,isLoading:!1})}})}})),Gu=()=>{const[s,e]=C.useState(!1),[t,r]=C.useState(!1),[n,i]=C.useState(!1),a=qr(),o=Hs(),{isAuthenticated:l,isAdmin:d,signOut:h}=pr(),u=async()=>{await h(),o("/")},f=()=>{e(!s),document.body.classList.toggle("mobile-menu-open")};C.useEffect(()=>{const v=()=>{const p=window.scrollY;r(p>50)};return window.addEventListener("scroll",v),()=>{window.removeEventListener("scroll",v),document.body.classList.remove("mobile-menu-open")}},[]),C.useEffect(()=>{e(!1),i(!1),document.body.classList.remove("mobile-menu-open")},[a]);const g=[{name:"Accueil",path:"/"},{name:"Projets",path:"/projets"}],y={closed:{opacity:0,transition:{duration:.2}},open:{opacity:1,transition:{duration:.2}}},b={closed:{transition:{staggerChildren:.05,staggerDirection:-1}},open:{transition:{staggerChildren:.05,delayChildren:.1}}},j={closed:{opacity:0,x:-20},open:{opacity:1,x:0}};return c.jsx("header",{className:`fixed w-full z-50 transition-all duration-300 ${t||s?"bg-black shadow-md":"bg-transparent"}`,children:c.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[c.jsxs("div",{className:"flex items-center justify-between py-4",children:[c.jsx(fe,{to:"/",className:"flex items-center z-50",children:c.jsx("span",{className:"text-2xl md:text-3xl font-heading font-bold gold-gradient",children:"BlackRoadMusic"})}),c.jsxs("nav",{className:"hidden md:flex items-center space-x-8",children:[c.jsxs("div",{className:"flex items-center space-x-8",children:[g.map(v=>c.jsx(fe,{to:v.path,className:`link-underline font-medium transition-colors ${a.pathname===v.path?"text-accent-400":"text-white hover:text-accent-400"}`,children:v.name},v.name)),c.jsx(Gt,{as:"div",className:"relative",children:({open:v})=>c.jsxs(c.Fragment,{children:[c.jsxs(Gt.Button,{className:"flex items-center space-x-1 font-medium text-white hover:text-accent-400 transition-colors",children:[c.jsx("span",{children:"Services"}),c.jsx(xn,{className:`h-4 w-4 transition-transform duration-200 ${v?"rotate-180":""}`})]}),c.jsxs(Gt.Items,{className:"absolute right-0 mt-2 w-56 bg-black/90 backdrop-blur-sm rounded-lg shadow-lg py-2 focus:outline-none",children:[c.jsx(Gt.Item,{children:({active:p})=>c.jsx(fe,{to:"/services",className:`block px-4 py-2 text-sm ${p?"bg-accent-600/10 text-accent-400":"text-white"}`,children:"Nos services"})}),c.jsx(Gt.Item,{children:({active:p})=>c.jsx(fe,{to:"/reserver",className:`block px-4 py-2 text-sm ${p?"bg-accent-600/10 text-accent-400":"text-white"}`,children:"Réserver"})})]})]})}),c.jsx(fe,{to:"/contact",className:`link-underline font-medium transition-colors ${a.pathname==="/contact"?"text-accent-400":"text-white hover:text-accent-400"}`,children:"Contact"})]}),l&&d&&c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx(fe,{to:"/backstage",className:`font-medium transition-colors ${a.pathname.startsWith("/backstage")?"text-accent-400":"text-white hover:text-accent-400"}`,children:"Admin"}),c.jsx("button",{onClick:u,className:"flex items-center gap-2 text-white hover:text-accent-400 transition-colors",title:"Se déconnecter",children:c.jsx(jn,{className:"h-5 w-5"})})]})]}),c.jsx("button",{className:"md:hidden flex items-center text-white p-2 z-50",onClick:f,"aria-label":"Toggle menu",children:c.jsx(rr,{mode:"wait",children:s?c.jsx(K.div,{initial:{opacity:0,rotate:-90},animate:{opacity:1,rotate:0},exit:{opacity:0,rotate:90},transition:{duration:.2},children:c.jsx(Xi,{className:"h-6 w-6 text-accent-400"})},"close"):c.jsx(K.div,{initial:{opacity:0,rotate:90},animate:{opacity:1,rotate:0},exit:{opacity:0,rotate:-90},transition:{duration:.2},children:c.jsx(zi,{className:"h-6 w-6"})},"menu")})})]}),c.jsx(rr,{children:s&&c.jsx(K.div,{initial:"closed",animate:"open",exit:"closed",variants:y,className:"fixed inset-0 top-[72px] bg-black z-40",children:c.jsxs(K.nav,{variants:b,className:"flex flex-col w-full h-full overflow-auto py-6",children:[g.map(v=>c.jsx(K.div,{variants:j,children:c.jsx(fe,{to:v.path,className:`block py-3 px-6 text-xl font-medium transition-colors ${a.pathname===v.path?"text-accent-400":"text-white hover:text-accent-400"}`,children:v.name})},v.name)),c.jsxs(K.div,{variants:j,children:[c.jsxs("button",{onClick:()=>i(!n),className:"w-full py-3 px-6 text-xl font-medium text-left flex items-center justify-between text-white hover:text-accent-400 transition-colors",children:[c.jsx("span",{children:"Services"}),c.jsx(xn,{className:`h-4 w-4 transition-transform duration-200 ${n?"rotate-180":""}`})]}),c.jsx(rr,{children:n&&c.jsxs(K.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden bg-primary-900/50",children:[c.jsx(fe,{to:"/services",className:"block py-2 px-8 text-sm text-gray-300 hover:text-accent-400 transition-colors",children:"Nos services"}),c.jsx(fe,{to:"/reserver",className:"block py-2 px-8 text-sm text-gray-300 hover:text-accent-400 transition-colors",children:"Réserver"})]})})]}),c.jsx(K.div,{variants:j,children:c.jsx(fe,{to:"/contact",className:`block py-3 px-6 text-xl font-medium transition-colors ${a.pathname==="/contact"?"text-accent-400":"text-white hover:text-accent-400"}`,children:"Contact"})}),l&&d&&c.jsxs(c.Fragment,{children:[c.jsx(K.div,{variants:j,children:c.jsx(fe,{to:"/backstage",className:`block py-3 px-6 text-xl font-medium transition-colors ${a.pathname.startsWith("/backstage")?"text-accent-400":"text-white hover:text-accent-400"}`,children:"Admin"})}),c.jsx(K.div,{variants:j,children:c.jsxs("button",{onClick:u,className:"w-full py-3 px-6 text-xl font-medium text-left flex items-center gap-2 text-red-400 hover:text-red-300 transition-colors",children:[c.jsx(jn,{className:"h-5 w-5"}),c.jsx("span",{children:"Se déconnecter"})]})})]})]})})})]})})},xa=[{id:1,platform:"Instagram",url:"https://instagram.com/blackroadmusic",icon:"instagram"},{id:2,platform:"YouTube",url:"https://www.youtube.com/@BlackRoadMusic_Inc",icon:"youtube"},{id:3,platform:"Spotify",url:"https://open.spotify.com/playlist/6Bp2XTBM8Ubqd4kZn55VJt?si=eb0efc1b09f34e51",icon:"music"},{id:4,platform:"TikTok",url:"https://tiktok.com/@blackroadmusic",icon:"video"}],Ku=()=>{const s=new Date().getFullYear(),{isAuthenticated:e}=pr(),t=r=>{switch(r){case"instagram":return c.jsx(Hi,{className:"h-5 w-5"});case"youtube":return c.jsx(Qi,{className:"h-5 w-5"});case"music":return c.jsx(Yi,{className:"h-5 w-5"});case"video":return c.jsx(Ys,{className:"h-5 w-5"});default:return null}};return c.jsx("footer",{className:"bg-primary-950 pt-12 pb-6",children:c.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-10",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-2xl font-heading font-bold gold-gradient mb-4",children:"BlackRoadMusic"}),c.jsx("p",{className:"text-gray-400 max-w-md",children:"Label de production spécialisé dans l'accompagnement artistique complet et la création de contenu audiovisuel."})]}),c.jsxs("div",{children:[c.jsx("h5",{className:"text-lg font-semibold mb-4",children:"Navigation"}),c.jsx("ul",{className:"space-y-2",children:[{name:"Accueil",path:"/"},{name:"Projets",path:"/projets"},{name:"Services",path:"/services"},{name:"Contact",path:"/contact"}].map(r=>c.jsx("li",{children:c.jsx(fe,{to:r.path,className:"text-gray-400 hover:text-accent-400 transition-colors",children:r.name})},r.name))})]}),c.jsxs("div",{children:[c.jsx("h5",{className:"text-lg font-semibold mb-4",children:"Suivez-nous"}),c.jsx("div",{className:"flex flex-wrap gap-4 mb-6",children:xa.map(r=>c.jsx("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"bg-primary-800 p-2.5 rounded-full text-white hover:bg-accent-700 transition-colors","aria-label":r.platform,children:t(r.icon)},r.id))}),c.jsx("p",{className:"text-gray-400",children:"Email: blackroadmusic@hotmail.com"})]}),c.jsxs("div",{children:[c.jsx("h5",{className:"text-lg font-semibold mb-4",children:"Informations Légales"}),c.jsxs("ul",{className:"space-y-2",children:[c.jsx("li",{children:c.jsx(fe,{to:"/mentions-legales",className:"text-gray-400 hover:text-accent-400 transition-colors",children:"Mentions légales"})}),c.jsx("li",{children:c.jsx(fe,{to:"/politique-de-confidentialite",className:"text-gray-400 hover:text-accent-400 transition-colors",children:"Politique de confidentialité"})})]})]})]}),c.jsx("div",{className:"mt-10 pt-6 border-t border-primary-800",children:c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[c.jsxs("p",{className:"text-gray-500 text-sm text-center md:text-left",children:["© ",s," Black Road Music. Tous droits réservés."]}),c.jsxs("div",{className:"flex flex-wrap justify-center gap-6 text-sm text-gray-500",children:[c.jsx(fe,{to:"/mentions-legales",className:"hover:text-accent-400 transition-colors",children:"Mentions légales"}),c.jsx(fe,{to:"/politique-de-confidentialite",className:"hover:text-accent-400 transition-colors",children:"Politique de confidentialité"})]})]})})]})})},Ju=({children:s})=>{const[e,t]=C.useState(!0);return C.useEffect(()=>{const r=setTimeout(()=>{t(!1)},1200);return()=>clearTimeout(r)},[]),c.jsx("div",{className:"flex flex-col min-h-screen",children:c.jsx(rr,{children:e?c.jsx(K.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"fixed inset-0 z-50 flex items-center justify-center bg-black",children:c.jsx(K.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"text-4xl md:text-6xl gold-gradient font-heading font-bold",children:"Black Road Music"})},"loader"):c.jsxs(c.Fragment,{children:[c.jsx(Gu,{}),c.jsx("main",{className:"flex-grow",children:c.jsx(rr,{mode:"wait",children:c.jsx(K.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:s},"page")})}),c.jsx(Ku,{})]})})})},Ht=dr((s,e)=>({projects:[],artists:[],services:[],isLoading:!1,fetchProjects:async()=>{s({isLoading:!0});try{const{data:t,error:r}=await H.from("projects").select("*").order("display_order",{ascending:!0});if(r)throw r;s({projects:t||[]})}catch(t){const{handleError:r}=Z.getState();r("Erreur lors du chargement des projets",t.message)}finally{s({isLoading:!1})}},fetchArtists:async()=>{s({isLoading:!0});try{const{data:t,error:r}=await H.from("artists").select("*").order("display_order",{ascending:!0});if(r)throw r;s({artists:t||[]})}catch(t){const{handleError:r}=Z.getState();r("Erreur lors du chargement des artistes",t.message)}finally{s({isLoading:!1})}},fetchServices:async()=>{s({isLoading:!0});try{const{data:t,error:r}=await H.from("services").select("*").order("display_order",{ascending:!0});if(r)throw r;const{data:n,error:i}=await H.from("service_features").select("*");if(i)throw i;const a=(t||[]).map(o=>({...o,features:(n||[]).filter(l=>l.service_id===o.id).map(l=>l.feature)}));s({services:a})}catch(t){const{handleError:r}=Z.getState();r("Erreur lors du chargement des services",t.message)}finally{s({isLoading:!1})}},createProject:async t=>{s({isLoading:!0});try{const{data:r}=await H.from("projects").select("display_order").order("display_order",{ascending:!1}).limit(1).single(),n=((r==null?void 0:r.display_order)||0)+1,{error:i}=await H.from("projects").insert([{...t,display_order:n}]).select().single();if(i)throw i;await e().fetchProjects()}catch(r){const{handleError:n}=Z.getState();n("Erreur lors de la création du projet",r.message)}finally{s({isLoading:!1})}},updateProject:async(t,r)=>{s({isLoading:!0});try{const{error:n}=await H.from("projects").update(r).eq("id",t).select().single();if(n)throw n;await e().fetchProjects()}catch(n){const{handleError:i}=Z.getState();i("Erreur lors de la mise à jour du projet",n.message)}finally{s({isLoading:!1})}},deleteProject:async t=>{s({isLoading:!0});try{const{error:r}=await H.from("projects").delete().eq("id",t);if(r)throw r;await e().fetchProjects()}catch(r){const{handleError:n}=Z.getState();n("Erreur lors de la suppression du projet",r.message)}finally{s({isLoading:!1})}},updateProjectOrder:async(t,r)=>{try{const{error:n}=await H.from("projects").update({display_order:r}).eq("id",t);if(n)throw n;await e().fetchProjects()}catch(n){const{handleError:i}=Z.getState();i("Erreur lors du réordonnancement du projet",n.message)}},createArtist:async t=>{s({isLoading:!0});try{const{data:r}=await H.from("artists").select("display_order").order("display_order",{ascending:!1}).limit(1).single(),n=((r==null?void 0:r.display_order)||0)+1,{error:i}=await H.from("artists").insert([{...t,display_order:n}]);if(i)throw i;await e().fetchArtists()}catch(r){const{handleError:n}=Z.getState();n("Erreur lors de la création de l'artiste",r.message)}finally{s({isLoading:!1})}},updateArtist:async(t,r)=>{s({isLoading:!0});try{const{error:n}=await H.from("artists").update(r).eq("id",t);if(n)throw n;await e().fetchArtists()}catch(n){const{handleError:i}=Z.getState();i("Erreur lors de la mise à jour de l'artiste",n.message)}finally{s({isLoading:!1})}},deleteArtist:async t=>{s({isLoading:!0});try{const{error:r}=await H.from("artists").delete().eq("id",t);if(r)throw r;await e().fetchArtists()}catch(r){const{handleError:n}=Z.getState();n("Erreur lors de la suppression de l'artiste",r.message)}finally{s({isLoading:!1})}},updateArtistOrder:async(t,r)=>{try{const{error:n}=await H.from("artists").update({display_order:r}).eq("id",t);if(n)throw n;await e().fetchArtists()}catch(n){const{handleError:i}=Z.getState();i("Erreur lors du réordonnancement de l'artiste",n.message)}},createService:async t=>{s({isLoading:!0});try{const{data:r}=await H.from("services").select("display_order").order("display_order",{ascending:!1}).limit(1).single(),n=((r==null?void 0:r.display_order)||0)+1,{data:i,error:a}=await H.from("services").insert([{title:t.title,description:t.description,icon:t.icon,price:t.price,display_order:n}]).select().single();if(a)throw a;if(t.features&&t.features.length>0){const o=t.features.map(d=>({service_id:i.id,feature:d})),{error:l}=await H.from("service_features").insert(o);if(l)throw l}await e().fetchServices()}catch(r){const{handleError:n}=Z.getState();n("Erreur lors de la création du service",r.message)}finally{s({isLoading:!1})}},updateService:async(t,r)=>{s({isLoading:!0});try{const{error:n}=await H.from("services").update({title:r.title,description:r.description,icon:r.icon,price:r.price}).eq("id",t);if(n)throw n;if(r.features){const{error:i}=await H.from("service_features").delete().eq("service_id",t);if(i)throw i;const a=r.features.map(l=>({service_id:t,feature:l})),{error:o}=await H.from("service_features").insert(a);if(o)throw o}await e().fetchServices()}catch(n){const{handleError:i}=Z.getState();i("Erreur lors de la mise à jour du service",n.message)}finally{s({isLoading:!1})}},deleteService:async t=>{s({isLoading:!0});try{const{error:r}=await H.from("services").delete().eq("id",t);if(r)throw r;await e().fetchServices()}catch(r){const{handleError:n}=Z.getState();n("Erreur lors de la suppression du service",r.message)}finally{s({isLoading:!1})}},updateServiceOrder:async(t,r)=>{try{const{error:n}=await H.from("services").update({display_order:r}).eq("id",t);if(n)throw n;await e().fetchServices()}catch(n){const{handleError:i}=Z.getState();i("Erreur lors du réordonnancement du service",n.message)}},reorderItems:async(t,r,n,i)=>{const a=Array.from(t),[o]=a.splice(r,1);a.splice(n,0,o);for(let l=0;l<a.length;l++)a[l].display_order!==l+1&&await i(a[l].id,l+1);return a}})),Xu=()=>{const s=C.useRef(null),e=C.useRef(null);return C.useEffect(()=>{const t=()=>{if(!s.current||!e.current)return;const r=window.scrollY,n=Math.max(1-r/700,0),i=r*.4;e.current.style.opacity=n.toString(),e.current.style.transform=`translateY(${i}px)`};return window.addEventListener("scroll",t),()=>{window.removeEventListener("scroll",t)}},[]),c.jsxs("div",{ref:s,className:"relative h-screen flex items-center justify-center overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-black z-0",style:{backgroundImage:"url(https://images.pexels.com/photos/167092/pexels-photo-167092.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2)",backgroundSize:"cover",backgroundPosition:"center",filter:"brightness(0.4)"}}),c.jsxs("div",{ref:e,className:"relative z-10 text-center px-4 max-w-4xl mx-auto",children:[c.jsx(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.5},children:c.jsx("h1",{className:"text-4xl md:text-6xl xl:text-7xl font-heading font-bold mb-6 text-shadow",children:c.jsx("span",{className:"gold-gradient",children:"Black Road Music"})})}),c.jsx(K.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:1,delay:1},children:c.jsx("p",{className:"text-xl md:text-2xl font-light mb-8 text-gray-200 text-shadow max-w-3xl mx-auto",children:"Label de production spécialisé dans l'accompagnement artistique complet et la création de contenu audiovisuel."})})]}),c.jsx("div",{className:"absolute bottom-10 left-1/2 transform -translate-x-1/2 z-10 animate-bounce",children:c.jsx("svg",{width:"30",height:"30",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-accent-400",children:c.jsx("polyline",{points:"6 9 12 15 18 9"})})})]})};function ja(s,e,t,r){return s.params.createElements&&Object.keys(r).forEach(n=>{if(!t[n]&&t.auto===!0){let i=bo(s.el,`.${r[n]}`)[0];i||(i=wo("div",r[n]),i.className=r[n],s.el.append(i)),t[n]=i,e[n]=i}}),t}function Qu(s){let{swiper:e,extendParams:t,on:r,emit:n}=s;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function i(y){let b;return y&&typeof y=="string"&&e.isElement&&(b=e.el.querySelector(y)||e.hostEl.querySelector(y),b)?b:(y&&(typeof y=="string"&&(b=[...document.querySelectorAll(y)]),e.params.uniqueNavElements&&typeof y=="string"&&b&&b.length>1&&e.el.querySelectorAll(y).length===1?b=e.el.querySelector(y):b&&b.length===1&&(b=b[0])),y&&!b?y:b)}function a(y,b){const j=e.params.navigation;y=ke(y),y.forEach(v=>{v&&(v.classList[b?"add":"remove"](...j.disabledClass.split(" ")),v.tagName==="BUTTON"&&(v.disabled=b),e.params.watchOverflow&&e.enabled&&v.classList[e.isLocked?"add":"remove"](j.lockClass))})}function o(){const{nextEl:y,prevEl:b}=e.navigation;if(e.params.loop){a(b,!1),a(y,!1);return}a(b,e.isBeginning&&!e.params.rewind),a(y,e.isEnd&&!e.params.rewind)}function l(y){y.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),n("navigationPrev"))}function d(y){y.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),n("navigationNext"))}function h(){const y=e.params.navigation;if(e.params.navigation=ja(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(y.nextEl||y.prevEl))return;let b=i(y.nextEl),j=i(y.prevEl);Object.assign(e.navigation,{nextEl:b,prevEl:j}),b=ke(b),j=ke(j);const v=(p,m)=>{p&&p.addEventListener("click",m==="next"?d:l),!e.enabled&&p&&p.classList.add(...y.lockClass.split(" "))};b.forEach(p=>v(p,"next")),j.forEach(p=>v(p,"prev"))}function u(){let{nextEl:y,prevEl:b}=e.navigation;y=ke(y),b=ke(b);const j=(v,p)=>{v.removeEventListener("click",p==="next"?d:l),v.classList.remove(...e.params.navigation.disabledClass.split(" "))};y.forEach(v=>j(v,"next")),b.forEach(v=>j(v,"prev"))}r("init",()=>{e.params.navigation.enabled===!1?g():(h(),o())}),r("toEdge fromEdge lock unlock",()=>{o()}),r("destroy",()=>{u()}),r("enable disable",()=>{let{nextEl:y,prevEl:b}=e.navigation;if(y=ke(y),b=ke(b),e.enabled){o();return}[...y,...b].filter(j=>!!j).forEach(j=>j.classList.add(e.params.navigation.lockClass))}),r("click",(y,b)=>{let{nextEl:j,prevEl:v}=e.navigation;j=ke(j),v=ke(v);const p=b.target;let m=v.includes(p)||j.includes(p);if(e.isElement&&!m){const w=b.path||b.composedPath&&b.composedPath();w&&(m=w.find(_=>j.includes(_)||v.includes(_)))}if(e.params.navigation.hideOnClick&&!m){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===p||e.pagination.el.contains(p)))return;let w;j.length?w=j[0].classList.contains(e.params.navigation.hiddenClass):v.length&&(w=v[0].classList.contains(e.params.navigation.hiddenClass)),n(w===!0?"navigationShow":"navigationHide"),[...j,...v].filter(_=>!!_).forEach(_=>_.classList.toggle(e.params.navigation.hiddenClass))}});const f=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),h(),o()},g=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),u()};Object.assign(e.navigation,{enable:f,disable:g,update:o,init:h,destroy:u})}function Qt(s){return s===void 0&&(s=""),`.${s.trim().replace(/([\.:!+\/()[\]])/g,"\\$1").replace(/ /g,".")}`}function Zu(s){let{swiper:e,extendParams:t,on:r,emit:n}=s;const i="swiper-pagination";t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:p=>p,formatFractionTotal:p=>p,bulletClass:`${i}-bullet`,bulletActiveClass:`${i}-bullet-active`,modifierClass:`${i}-`,currentClass:`${i}-current`,totalClass:`${i}-total`,hiddenClass:`${i}-hidden`,progressbarFillClass:`${i}-progressbar-fill`,progressbarOppositeClass:`${i}-progressbar-opposite`,clickableClass:`${i}-clickable`,lockClass:`${i}-lock`,horizontalClass:`${i}-horizontal`,verticalClass:`${i}-vertical`,paginationDisabledClass:`${i}-disabled`}}),e.pagination={el:null,bullets:[]};let a,o=0;function l(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function d(p,m){const{bulletActiveClass:w}=e.params.pagination;p&&(p=p[`${m==="prev"?"previous":"next"}ElementSibling`],p&&(p.classList.add(`${w}-${m}`),p=p[`${m==="prev"?"previous":"next"}ElementSibling`],p&&p.classList.add(`${w}-${m}-${m}`)))}function h(p,m,w){if(p=p%w,m=m%w,m===p+1)return"next";if(m===p-1)return"previous"}function u(p){const m=p.target.closest(Qt(e.params.pagination.bulletClass));if(!m)return;p.preventDefault();const w=vn(m)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===w)return;const _=h(e.realIndex,w,e.slides.length);_==="next"?e.slideNext():_==="previous"?e.slidePrev():e.slideToLoop(w)}else e.slideTo(w)}function f(){const p=e.rtl,m=e.params.pagination;if(l())return;let w=e.pagination.el;w=ke(w);let _,S;const k=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,R=e.params.loop?Math.ceil(k/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(S=e.previousRealIndex||0,_=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(_=e.snapIndex,S=e.previousSnapIndex):(S=e.previousIndex||0,_=e.activeIndex||0),m.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const O=e.pagination.bullets;let B,I,L;if(m.dynamicBullets&&(a=xo(O[0],e.isHorizontal()?"width":"height"),w.forEach(A=>{A.style[e.isHorizontal()?"width":"height"]=`${a*(m.dynamicMainBullets+4)}px`}),m.dynamicMainBullets>1&&S!==void 0&&(o+=_-(S||0),o>m.dynamicMainBullets-1?o=m.dynamicMainBullets-1:o<0&&(o=0)),B=Math.max(_-o,0),I=B+(Math.min(O.length,m.dynamicMainBullets)-1),L=(I+B)/2),O.forEach(A=>{const P=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(D=>`${m.bulletActiveClass}${D}`)].map(D=>typeof D=="string"&&D.includes(" ")?D.split(" "):D).flat();A.classList.remove(...P)}),w.length>1)O.forEach(A=>{const P=vn(A);P===_?A.classList.add(...m.bulletActiveClass.split(" ")):e.isElement&&A.setAttribute("part","bullet"),m.dynamicBullets&&(P>=B&&P<=I&&A.classList.add(...`${m.bulletActiveClass}-main`.split(" ")),P===B&&d(A,"prev"),P===I&&d(A,"next"))});else{const A=O[_];if(A&&A.classList.add(...m.bulletActiveClass.split(" ")),e.isElement&&O.forEach((P,D)=>{P.setAttribute("part",D===_?"bullet-active":"bullet")}),m.dynamicBullets){const P=O[B],D=O[I];for(let Y=B;Y<=I;Y+=1)O[Y]&&O[Y].classList.add(...`${m.bulletActiveClass}-main`.split(" "));d(P,"prev"),d(D,"next")}}if(m.dynamicBullets){const A=Math.min(O.length,m.dynamicMainBullets+4),P=(a*A-a)/2-L*a,D=p?"right":"left";O.forEach(Y=>{Y.style[e.isHorizontal()?D:"top"]=`${P}px`})}}w.forEach((O,B)=>{if(m.type==="fraction"&&(O.querySelectorAll(Qt(m.currentClass)).forEach(I=>{I.textContent=m.formatFractionCurrent(_+1)}),O.querySelectorAll(Qt(m.totalClass)).forEach(I=>{I.textContent=m.formatFractionTotal(R)})),m.type==="progressbar"){let I;m.progressbarOpposite?I=e.isHorizontal()?"vertical":"horizontal":I=e.isHorizontal()?"horizontal":"vertical";const L=(_+1)/R;let A=1,P=1;I==="horizontal"?A=L:P=L,O.querySelectorAll(Qt(m.progressbarFillClass)).forEach(D=>{D.style.transform=`translate3d(0,0,0) scaleX(${A}) scaleY(${P})`,D.style.transitionDuration=`${e.params.speed}ms`})}m.type==="custom"&&m.renderCustom?(Or(O,m.renderCustom(e,_+1,R)),B===0&&n("paginationRender",O)):(B===0&&n("paginationRender",O),n("paginationUpdate",O)),e.params.watchOverflow&&e.enabled&&O.classList[e.isLocked?"add":"remove"](m.lockClass)})}function g(){const p=e.params.pagination;if(l())return;const m=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length;let w=e.pagination.el;w=ke(w);let _="";if(p.type==="bullets"){let S=e.params.loop?Math.ceil(m/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&S>m&&(S=m);for(let k=0;k<S;k+=1)p.renderBullet?_+=p.renderBullet.call(e,k,p.bulletClass):_+=`<${p.bulletElement} ${e.isElement?'part="bullet"':""} class="${p.bulletClass}"></${p.bulletElement}>`}p.type==="fraction"&&(p.renderFraction?_=p.renderFraction.call(e,p.currentClass,p.totalClass):_=`<span class="${p.currentClass}"></span> / <span class="${p.totalClass}"></span>`),p.type==="progressbar"&&(p.renderProgressbar?_=p.renderProgressbar.call(e,p.progressbarFillClass):_=`<span class="${p.progressbarFillClass}"></span>`),e.pagination.bullets=[],w.forEach(S=>{p.type!=="custom"&&Or(S,_||""),p.type==="bullets"&&e.pagination.bullets.push(...S.querySelectorAll(Qt(p.bulletClass)))}),p.type!=="custom"&&n("paginationRender",w[0])}function y(){e.params.pagination=ja(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const p=e.params.pagination;if(!p.el)return;let m;typeof p.el=="string"&&e.isElement&&(m=e.el.querySelector(p.el)),!m&&typeof p.el=="string"&&(m=[...document.querySelectorAll(p.el)]),m||(m=p.el),!(!m||m.length===0)&&(e.params.uniqueNavElements&&typeof p.el=="string"&&Array.isArray(m)&&m.length>1&&(m=[...e.el.querySelectorAll(p.el)],m.length>1&&(m=m.find(w=>_o(w,".swiper")[0]===e.el))),Array.isArray(m)&&m.length===1&&(m=m[0]),Object.assign(e.pagination,{el:m}),m=ke(m),m.forEach(w=>{p.type==="bullets"&&p.clickable&&w.classList.add(...(p.clickableClass||"").split(" ")),w.classList.add(p.modifierClass+p.type),w.classList.add(e.isHorizontal()?p.horizontalClass:p.verticalClass),p.type==="bullets"&&p.dynamicBullets&&(w.classList.add(`${p.modifierClass}${p.type}-dynamic`),o=0,p.dynamicMainBullets<1&&(p.dynamicMainBullets=1)),p.type==="progressbar"&&p.progressbarOpposite&&w.classList.add(p.progressbarOppositeClass),p.clickable&&w.addEventListener("click",u),e.enabled||w.classList.add(p.lockClass)}))}function b(){const p=e.params.pagination;if(l())return;let m=e.pagination.el;m&&(m=ke(m),m.forEach(w=>{w.classList.remove(p.hiddenClass),w.classList.remove(p.modifierClass+p.type),w.classList.remove(e.isHorizontal()?p.horizontalClass:p.verticalClass),p.clickable&&(w.classList.remove(...(p.clickableClass||"").split(" ")),w.removeEventListener("click",u))})),e.pagination.bullets&&e.pagination.bullets.forEach(w=>w.classList.remove(...p.bulletActiveClass.split(" ")))}r("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const p=e.params.pagination;let{el:m}=e.pagination;m=ke(m),m.forEach(w=>{w.classList.remove(p.horizontalClass,p.verticalClass),w.classList.add(e.isHorizontal()?p.horizontalClass:p.verticalClass)})}),r("init",()=>{e.params.pagination.enabled===!1?v():(y(),g(),f())}),r("activeIndexChange",()=>{typeof e.snapIndex>"u"&&f()}),r("snapIndexChange",()=>{f()}),r("snapGridLengthChange",()=>{g(),f()}),r("destroy",()=>{b()}),r("enable disable",()=>{let{el:p}=e.pagination;p&&(p=ke(p),p.forEach(m=>m.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),r("lock unlock",()=>{f()}),r("click",(p,m)=>{const w=m.target,_=ke(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&_&&_.length>0&&!w.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&w===e.navigation.nextEl||e.navigation.prevEl&&w===e.navigation.prevEl))return;const S=_[0].classList.contains(e.params.pagination.hiddenClass);n(S===!0?"paginationShow":"paginationHide"),_.forEach(k=>k.classList.toggle(e.params.pagination.hiddenClass))}});const j=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:p}=e.pagination;p&&(p=ke(p),p.forEach(m=>m.classList.remove(e.params.pagination.paginationDisabledClass))),y(),g(),f()},v=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:p}=e.pagination;p&&(p=ke(p),p.forEach(m=>m.classList.add(e.params.pagination.paginationDisabledClass))),b()};Object.assign(e.pagination,{enable:j,disable:v,render:g,update:f,init:y,destroy:b})}function ed(s){let{swiper:e,extendParams:t,on:r,emit:n,params:i}=s;e.autoplay={running:!1,paused:!1,timeLeft:0},t({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let a,o,l=i&&i.autoplay?i.autoplay.delay:3e3,d=i&&i.autoplay?i.autoplay.delay:3e3,h,u=new Date().getTime(),f,g,y,b,j,v,p;function m(z){!e||e.destroyed||!e.wrapperEl||z.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",m),!(p||z.detail&&z.detail.bySwiperTouchMove)&&B())}const w=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?f=!0:f&&(d=h,f=!1);const z=e.autoplay.paused?h:u+d-new Date().getTime();e.autoplay.timeLeft=z,n("autoplayTimeLeft",z,z/l),o=requestAnimationFrame(()=>{w()})},_=()=>{let z;return e.virtual&&e.params.virtual.enabled?z=e.slides.find(U=>U.classList.contains("swiper-slide-active")):z=e.slides[e.activeIndex],z?parseInt(z.getAttribute("data-swiper-autoplay"),10):void 0},S=z=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(o),w();let N=typeof z>"u"?e.params.autoplay.delay:z;l=e.params.autoplay.delay,d=e.params.autoplay.delay;const U=_();!Number.isNaN(U)&&U>0&&typeof z>"u"&&(N=U,l=U,d=U),h=N;const X=e.params.speed,ne=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(X,!0,!0),n("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,X,!0,!0),n("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(X,!0,!0),n("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,X,!0,!0),n("autoplay")),e.params.cssMode&&(u=new Date().getTime(),requestAnimationFrame(()=>{S()})))};return N>0?(clearTimeout(a),a=setTimeout(()=>{ne()},N)):requestAnimationFrame(()=>{ne()}),N},k=()=>{u=new Date().getTime(),e.autoplay.running=!0,S(),n("autoplayStart")},R=()=>{e.autoplay.running=!1,clearTimeout(a),cancelAnimationFrame(o),n("autoplayStop")},O=(z,N)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(a),z||(v=!0);const U=()=>{n("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",m):B()};if(e.autoplay.paused=!0,N){j&&(h=e.params.autoplay.delay),j=!1,U();return}h=(h||e.params.autoplay.delay)-(new Date().getTime()-u),!(e.isEnd&&h<0&&!e.params.loop)&&(h<0&&(h=0),U())},B=()=>{e.isEnd&&h<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(u=new Date().getTime(),v?(v=!1,S(h)):S(),e.autoplay.paused=!1,n("autoplayResume"))},I=()=>{if(e.destroyed||!e.autoplay.running)return;const z=Gr();z.visibilityState==="hidden"&&(v=!0,O(!0)),z.visibilityState==="visible"&&B()},L=z=>{z.pointerType==="mouse"&&(v=!0,p=!0,!(e.animating||e.autoplay.paused)&&O(!0))},A=z=>{z.pointerType==="mouse"&&(p=!1,e.autoplay.paused&&B())},P=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",L),e.el.addEventListener("pointerleave",A))},D=()=>{e.el&&typeof e.el!="string"&&(e.el.removeEventListener("pointerenter",L),e.el.removeEventListener("pointerleave",A))},Y=()=>{Gr().addEventListener("visibilitychange",I)},ce=()=>{Gr().removeEventListener("visibilitychange",I)};r("init",()=>{e.params.autoplay.enabled&&(P(),Y(),k())}),r("destroy",()=>{D(),ce(),e.autoplay.running&&R()}),r("_freeModeStaticRelease",()=>{(y||v)&&B()}),r("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?R():O(!0,!0)}),r("beforeTransitionStart",(z,N,U)=>{e.destroyed||!e.autoplay.running||(U||!e.params.autoplay.disableOnInteraction?O(!0,!0):R())}),r("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){R();return}g=!0,y=!1,v=!1,b=setTimeout(()=>{v=!0,y=!0,O(!0)},200)}}),r("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!g)){if(clearTimeout(b),clearTimeout(a),e.params.autoplay.disableOnInteraction){y=!1,g=!1;return}y&&e.params.cssMode&&B(),y=!1,g=!1}}),r("slideChange",()=>{e.destroyed||!e.autoplay.running||(j=!0)}),Object.assign(e.autoplay,{start:k,stop:R,pause:O,resume:B})}const Ea=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function vt(s){return typeof s=="object"&&s!==null&&s.constructor&&Object.prototype.toString.call(s).slice(8,-1)==="Object"&&!s.__swiper__}function $t(s,e){const t=["__proto__","constructor","prototype"];Object.keys(e).filter(r=>t.indexOf(r)<0).forEach(r=>{typeof s[r]>"u"?s[r]=e[r]:vt(e[r])&&vt(s[r])&&Object.keys(e[r]).length>0?e[r].__swiper__?s[r]=e[r]:$t(s[r],e[r]):s[r]=e[r]})}function ka(s){return s===void 0&&(s={}),s.navigation&&typeof s.navigation.nextEl>"u"&&typeof s.navigation.prevEl>"u"}function Sa(s){return s===void 0&&(s={}),s.pagination&&typeof s.pagination.el>"u"}function Pa(s){return s===void 0&&(s={}),s.scrollbar&&typeof s.scrollbar.el>"u"}function Oa(s){s===void 0&&(s="");const e=s.split(" ").map(r=>r.trim()).filter(r=>!!r),t=[];return e.forEach(r=>{t.indexOf(r)<0&&t.push(r)}),t.join(" ")}function td(s){return s===void 0&&(s=""),s?s.includes("swiper-wrapper")?s:`swiper-wrapper ${s}`:"swiper-wrapper"}function rd(s){let{swiper:e,slides:t,passedParams:r,changedParams:n,nextEl:i,prevEl:a,scrollbarEl:o,paginationEl:l}=s;const d=n.filter(O=>O!=="children"&&O!=="direction"&&O!=="wrapperClass"),{params:h,pagination:u,navigation:f,scrollbar:g,virtual:y,thumbs:b}=e;let j,v,p,m,w,_,S,k;n.includes("thumbs")&&r.thumbs&&r.thumbs.swiper&&!r.thumbs.swiper.destroyed&&h.thumbs&&(!h.thumbs.swiper||h.thumbs.swiper.destroyed)&&(j=!0),n.includes("controller")&&r.controller&&r.controller.control&&h.controller&&!h.controller.control&&(v=!0),n.includes("pagination")&&r.pagination&&(r.pagination.el||l)&&(h.pagination||h.pagination===!1)&&u&&!u.el&&(p=!0),n.includes("scrollbar")&&r.scrollbar&&(r.scrollbar.el||o)&&(h.scrollbar||h.scrollbar===!1)&&g&&!g.el&&(m=!0),n.includes("navigation")&&r.navigation&&(r.navigation.prevEl||a)&&(r.navigation.nextEl||i)&&(h.navigation||h.navigation===!1)&&f&&!f.prevEl&&!f.nextEl&&(w=!0);const R=O=>{e[O]&&(e[O].destroy(),O==="navigation"?(e.isElement&&(e[O].prevEl.remove(),e[O].nextEl.remove()),h[O].prevEl=void 0,h[O].nextEl=void 0,e[O].prevEl=void 0,e[O].nextEl=void 0):(e.isElement&&e[O].el.remove(),h[O].el=void 0,e[O].el=void 0))};n.includes("loop")&&e.isElement&&(h.loop&&!r.loop?_=!0:!h.loop&&r.loop?S=!0:k=!0),d.forEach(O=>{if(vt(h[O])&&vt(r[O]))Object.assign(h[O],r[O]),(O==="navigation"||O==="pagination"||O==="scrollbar")&&"enabled"in r[O]&&!r[O].enabled&&R(O);else{const B=r[O];(B===!0||B===!1)&&(O==="navigation"||O==="pagination"||O==="scrollbar")?B===!1&&R(O):h[O]=r[O]}}),d.includes("controller")&&!v&&e.controller&&e.controller.control&&h.controller&&h.controller.control&&(e.controller.control=h.controller.control),n.includes("children")&&t&&y&&h.virtual.enabled?(y.slides=t,y.update(!0)):n.includes("virtual")&&y&&h.virtual.enabled&&(t&&(y.slides=t),y.update(!0)),n.includes("children")&&t&&h.loop&&(k=!0),j&&b.init()&&b.update(!0),v&&(e.controller.control=h.controller.control),p&&(e.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),e.el.appendChild(l)),l&&(h.pagination.el=l),u.init(),u.render(),u.update()),m&&(e.isElement&&(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-scrollbar"),o.part.add("scrollbar"),e.el.appendChild(o)),o&&(h.scrollbar.el=o),g.init(),g.updateSize(),g.setTranslate()),w&&(e.isElement&&((!i||typeof i=="string")&&(i=document.createElement("div"),i.classList.add("swiper-button-next"),Or(i,e.hostEl.constructor.nextButtonSvg),i.part.add("button-next"),e.el.appendChild(i)),(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-button-prev"),Or(a,e.hostEl.constructor.prevButtonSvg),a.part.add("button-prev"),e.el.appendChild(a))),i&&(h.navigation.nextEl=i),a&&(h.navigation.prevEl=a),f.init(),f.update()),n.includes("allowSlideNext")&&(e.allowSlideNext=r.allowSlideNext),n.includes("allowSlidePrev")&&(e.allowSlidePrev=r.allowSlidePrev),n.includes("direction")&&e.changeDirection(r.direction,!1),(_||k)&&e.loopDestroy(),(S||k)&&e.loopCreate(),e.update()}function sd(s,e){s===void 0&&(s={}),e===void 0&&(e=!0);const t={on:{}},r={},n={};$t(t,jo),t._emitClasses=!0,t.init=!1;const i={},a=Ea.map(l=>l.replace(/_/,"")),o=Object.assign({},s);return Object.keys(o).forEach(l=>{typeof s[l]>"u"||(a.indexOf(l)>=0?vt(s[l])?(t[l]={},n[l]={},$t(t[l],s[l]),$t(n[l],s[l])):(t[l]=s[l],n[l]=s[l]):l.search(/on[A-Z]/)===0&&typeof s[l]=="function"?e?r[`${l[2].toLowerCase()}${l.substr(3)}`]=s[l]:t.on[`${l[2].toLowerCase()}${l.substr(3)}`]=s[l]:i[l]=s[l])}),["navigation","pagination","scrollbar"].forEach(l=>{t[l]===!0&&(t[l]={}),t[l]===!1&&delete t[l]}),{params:t,passedParams:n,rest:i,events:r}}function nd(s,e){let{el:t,nextEl:r,prevEl:n,paginationEl:i,scrollbarEl:a,swiper:o}=s;ka(e)&&r&&n&&(o.params.navigation.nextEl=r,o.originalParams.navigation.nextEl=r,o.params.navigation.prevEl=n,o.originalParams.navigation.prevEl=n),Sa(e)&&i&&(o.params.pagination.el=i,o.originalParams.pagination.el=i),Pa(e)&&a&&(o.params.scrollbar.el=a,o.originalParams.scrollbar.el=a),o.init(t)}function id(s,e,t,r,n){const i=[];if(!e)return i;const a=l=>{i.indexOf(l)<0&&i.push(l)};if(t&&r){const l=r.map(n),d=t.map(n);l.join("")!==d.join("")&&a("children"),r.length!==t.length&&a("children")}return Ea.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in s&&l in e)if(vt(s[l])&&vt(e[l])){const d=Object.keys(s[l]),h=Object.keys(e[l]);d.length!==h.length?a(l):(d.forEach(u=>{s[l][u]!==e[l][u]&&a(l)}),h.forEach(u=>{s[l][u]!==e[l][u]&&a(l)}))}else s[l]!==e[l]&&a(l)}),i}const ad=s=>{!s||s.destroyed||!s.params.virtual||s.params.virtual&&!s.params.virtual.enabled||(s.updateSlides(),s.updateProgress(),s.updateSlidesClasses(),s.emit("_virtualUpdated"),s.parallax&&s.params.parallax&&s.params.parallax.enabled&&s.parallax.setTranslate())};function Ar(){return Ar=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},Ar.apply(this,arguments)}function Ta(s){return s.type&&s.type.displayName&&s.type.displayName.includes("SwiperSlide")}function Ca(s){const e=[];return Q.Children.toArray(s).forEach(t=>{Ta(t)?e.push(t):t.props&&t.props.children&&Ca(t.props.children).forEach(r=>e.push(r))}),e}function od(s){const e=[],t={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return Q.Children.toArray(s).forEach(r=>{if(Ta(r))e.push(r);else if(r.props&&r.props.slot&&t[r.props.slot])t[r.props.slot].push(r);else if(r.props&&r.props.children){const n=Ca(r.props.children);n.length>0?n.forEach(i=>e.push(i)):t["container-end"].push(r)}else t["container-end"].push(r)}),{slides:e,slots:t}}function ld(s,e,t){if(!t)return null;const r=h=>{let u=h;return h<0?u=e.length+h:u>=e.length&&(u=u-e.length),u},n=s.isHorizontal()?{[s.rtlTranslate?"right":"left"]:`${t.offset}px`}:{top:`${t.offset}px`},{from:i,to:a}=t,o=s.params.loop?-e.length:0,l=s.params.loop?e.length*2:e.length,d=[];for(let h=o;h<l;h+=1)h>=i&&h<=a&&d.push(e[r(h)]);return d.map((h,u)=>Q.cloneElement(h,{swiper:s,style:n,key:h.props.virtualIndex||h.key||`slide-${u}`}))}function or(s,e){return typeof window>"u"?C.useEffect(s,e):C.useLayoutEffect(s,e)}const ii=C.createContext(null),cd=C.createContext(null),Na=C.forwardRef(function(s,e){let{className:t,tag:r="div",wrapperTag:n="div",children:i,onSwiper:a,...o}=s===void 0?{}:s,l=!1;const[d,h]=C.useState("swiper"),[u,f]=C.useState(null),[g,y]=C.useState(!1),b=C.useRef(!1),j=C.useRef(null),v=C.useRef(null),p=C.useRef(null),m=C.useRef(null),w=C.useRef(null),_=C.useRef(null),S=C.useRef(null),k=C.useRef(null),{params:R,passedParams:O,rest:B,events:I}=sd(o),{slides:L,slots:A}=od(i),P=()=>{y(!g)};Object.assign(R.on,{_containerClasses(N,U){h(U)}});const D=()=>{Object.assign(R.on,I),l=!0;const N={...R};if(delete N.wrapperClass,v.current=new Eo(N),v.current.virtual&&v.current.params.virtual.enabled){v.current.virtual.slides=L;const U={cache:!1,slides:L,renderExternal:f,renderExternalUpdate:!1};$t(v.current.params.virtual,U),$t(v.current.originalParams.virtual,U)}};j.current||D(),v.current&&v.current.on("_beforeBreakpoint",P);const Y=()=>{l||!I||!v.current||Object.keys(I).forEach(N=>{v.current.on(N,I[N])})},ce=()=>{!I||!v.current||Object.keys(I).forEach(N=>{v.current.off(N,I[N])})};C.useEffect(()=>()=>{v.current&&v.current.off("_beforeBreakpoint",P)}),C.useEffect(()=>{!b.current&&v.current&&(v.current.emitSlidesClasses(),b.current=!0)}),or(()=>{if(e&&(e.current=j.current),!!j.current)return v.current.destroyed&&D(),nd({el:j.current,nextEl:w.current,prevEl:_.current,paginationEl:S.current,scrollbarEl:k.current,swiper:v.current},R),a&&!v.current.destroyed&&a(v.current),()=>{v.current&&!v.current.destroyed&&v.current.destroy(!0,!1)}},[]),or(()=>{Y();const N=id(O,p.current,L,m.current,U=>U.key);return p.current=O,m.current=L,N.length&&v.current&&!v.current.destroyed&&rd({swiper:v.current,slides:L,passedParams:O,changedParams:N,nextEl:w.current,prevEl:_.current,scrollbarEl:k.current,paginationEl:S.current}),()=>{ce()}}),or(()=>{ad(v.current)},[u]);function z(){return R.virtual?ld(v.current,L,u):L.map((N,U)=>Q.cloneElement(N,{swiper:v.current,swiperSlideIndex:U}))}return Q.createElement(r,Ar({ref:j,className:Oa(`${d}${t?` ${t}`:""}`)},B),Q.createElement(cd.Provider,{value:v.current},A["container-start"],Q.createElement(n,{className:td(R.wrapperClass)},A["wrapper-start"],z(),A["wrapper-end"]),ka(R)&&Q.createElement(Q.Fragment,null,Q.createElement("div",{ref:_,className:"swiper-button-prev"}),Q.createElement("div",{ref:w,className:"swiper-button-next"})),Pa(R)&&Q.createElement("div",{ref:k,className:"swiper-scrollbar"}),Sa(R)&&Q.createElement("div",{ref:S,className:"swiper-pagination"}),A["container-end"]))});Na.displayName="Swiper";const Aa=C.forwardRef(function(s,e){let{tag:t="div",children:r,className:n="",swiper:i,zoom:a,lazy:o,virtualIndex:l,swiperSlideIndex:d,...h}=s===void 0?{}:s;const u=C.useRef(null),[f,g]=C.useState("swiper-slide"),[y,b]=C.useState(!1);function j(w,_,S){_===u.current&&g(S)}or(()=>{if(typeof d<"u"&&(u.current.swiperSlideIndex=d),e&&(e.current=u.current),!(!u.current||!i)){if(i.destroyed){f!=="swiper-slide"&&g("swiper-slide");return}return i.on("_slideClass",j),()=>{i&&i.off("_slideClass",j)}}}),or(()=>{i&&u.current&&!i.destroyed&&g(i.getSlideClasses(u.current))},[i]);const v={isActive:f.indexOf("swiper-slide-active")>=0,isVisible:f.indexOf("swiper-slide-visible")>=0,isPrev:f.indexOf("swiper-slide-prev")>=0,isNext:f.indexOf("swiper-slide-next")>=0},p=()=>typeof r=="function"?r(v):r,m=()=>{b(!0)};return Q.createElement(t,Ar({ref:u,className:Oa(`${f}${n?` ${n}`:""}`),"data-swiper-slide-index":l,onLoad:m},h),a&&Q.createElement(ii.Provider,{value:v},Q.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof a=="number"?a:void 0},p(),o&&!y&&Q.createElement("div",{className:"swiper-lazy-preloader"}))),!a&&Q.createElement(ii.Provider,{value:v},p(),o&&!y&&Q.createElement("div",{className:"swiper-lazy-preloader"})))});Aa.displayName="SwiperSlide";var os,ai;function ud(){if(ai)return os;ai=1,os=function(n,i,a){var o=document.head||document.getElementsByTagName("head")[0],l=document.createElement("script");typeof i=="function"&&(a=i,i={}),i=i||{},a=a||function(){},l.type=i.type||"text/javascript",l.charset=i.charset||"utf8",l.async="async"in i?!!i.async:!0,l.src=n,i.attrs&&s(l,i.attrs),i.text&&(l.text=""+i.text);var d="onload"in l?e:t;d(l,a),l.onload||e(l,a),o.appendChild(l)};function s(r,n){for(var i in n)r.setAttribute(i,n[i])}function e(r,n){r.onload=function(){this.onerror=this.onload=null,n(null,r)},r.onerror=function(){this.onerror=this.onload=null,n(new Error("Failed to load "+this.src),r)}}function t(r,n){r.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,n(null,r))}}return os}var ls,oi;function Ra(){if(oi)return ls;oi=1;var s=function(p){return e(p)&&!t(p)};function e(v){return!!v&&typeof v=="object"}function t(v){var p=Object.prototype.toString.call(v);return p==="[object RegExp]"||p==="[object Date]"||i(v)}var r=typeof Symbol=="function"&&Symbol.for,n=r?Symbol.for("react.element"):60103;function i(v){return v.$$typeof===n}function a(v){return Array.isArray(v)?[]:{}}function o(v,p){return p.clone!==!1&&p.isMergeableObject(v)?b(a(v),v,p):v}function l(v,p,m){return v.concat(p).map(function(w){return o(w,m)})}function d(v,p){if(!p.customMerge)return b;var m=p.customMerge(v);return typeof m=="function"?m:b}function h(v){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(v).filter(function(p){return Object.propertyIsEnumerable.call(v,p)}):[]}function u(v){return Object.keys(v).concat(h(v))}function f(v,p){try{return p in v}catch{return!1}}function g(v,p){return f(v,p)&&!(Object.hasOwnProperty.call(v,p)&&Object.propertyIsEnumerable.call(v,p))}function y(v,p,m){var w={};return m.isMergeableObject(v)&&u(v).forEach(function(_){w[_]=o(v[_],m)}),u(p).forEach(function(_){g(v,_)||(f(v,_)&&m.isMergeableObject(p[_])?w[_]=d(_,m)(v[_],p[_],m):w[_]=o(p[_],m))}),w}function b(v,p,m){m=m||{},m.arrayMerge=m.arrayMerge||l,m.isMergeableObject=m.isMergeableObject||s,m.cloneUnlessOtherwiseSpecified=o;var w=Array.isArray(p),_=Array.isArray(v),S=w===_;return S?w?m.arrayMerge(v,p,m):y(v,p,m):o(p,m)}b.all=function(p,m){if(!Array.isArray(p))throw new Error("first argument should be an array");return p.reduce(function(w,_){return b(w,_,m)},{})};var j=b;return ls=j,ls}var cs,li;function Br(){if(li)return cs;li=1;var s=Object.create,e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,n=Object.getPrototypeOf,i=Object.prototype.hasOwnProperty,a=(N,U)=>{for(var X in U)e(N,X,{get:U[X],enumerable:!0})},o=(N,U,X,ne)=>{if(U&&typeof U=="object"||typeof U=="function")for(let Se of r(U))!i.call(N,Se)&&Se!==X&&e(N,Se,{get:()=>U[Se],enumerable:!(ne=t(U,Se))||ne.enumerable});return N},l=(N,U,X)=>(X=N!=null?s(n(N)):{},o(!N||!N.__esModule?e(X,"default",{value:N,enumerable:!0}):X,N)),d=N=>o(e({},"__esModule",{value:!0}),N),h={};a(h,{callPlayer:()=>P,getConfig:()=>L,getSDK:()=>I,isBlobUrl:()=>Y,isMediaStream:()=>D,lazy:()=>y,omit:()=>A,parseEndTime:()=>S,parseStartTime:()=>_,queryString:()=>R,randomString:()=>k,supportsWebKitPresentationMode:()=>ce}),cs=d(h);var u=l(Bt()),f=l(ud()),g=l(Ra());const y=N=>u.default.lazy(async()=>{const U=await N();return typeof U.default=="function"?U:U.default}),b=/[?&#](?:start|t)=([0-9hms]+)/,j=/[?&#]end=([0-9hms]+)/,v=/(\d+)(h|m|s)/g,p=/^\d+$/;function m(N,U){if(N instanceof Array)return;const X=N.match(U);if(X){const ne=X[1];if(ne.match(v))return w(ne);if(p.test(ne))return parseInt(ne)}}function w(N){let U=0,X=v.exec(N);for(;X!==null;){const[,ne,Se]=X;Se==="h"&&(U+=parseInt(ne,10)*60*60),Se==="m"&&(U+=parseInt(ne,10)*60),Se==="s"&&(U+=parseInt(ne,10)),X=v.exec(N)}return U}function _(N){return m(N,b)}function S(N){return m(N,j)}function k(){return Math.random().toString(36).substr(2,5)}function R(N){return Object.keys(N).map(U=>`${U}=${N[U]}`).join("&")}function O(N){return window[N]?window[N]:window.exports&&window.exports[N]?window.exports[N]:window.module&&window.module.exports&&window.module.exports[N]?window.module.exports[N]:null}const B={},I=function(U,X,ne=null,Se=()=>!0,ct=f.default){const _t=O(X);return _t&&Se(_t)?Promise.resolve(_t):new Promise((gr,xt)=>{if(B[U]){B[U].push({resolve:gr,reject:xt});return}B[U]=[{resolve:gr,reject:xt}];const Yt=De=>{B[U].forEach(ut=>ut.resolve(De))};if(ne){const De=window[ne];window[ne]=function(){De&&De(),Yt(O(X))}}ct(U,De=>{De?(B[U].forEach(ut=>ut.reject(De)),B[U]=null):ne||Yt(O(X))})})};function L(N,U){return(0,g.default)(U.config,N.config)}function A(N,...U){const X=[].concat(...U),ne={},Se=Object.keys(N);for(const ct of Se)X.indexOf(ct)===-1&&(ne[ct]=N[ct]);return ne}function P(N,...U){if(!this.player||!this.player[N]){let X=`ReactPlayer: ${this.constructor.displayName} player could not call %c${N}%c – `;return this.player?this.player[N]||(X+="The method was not available"):X+="The player was not available",console.warn(X,"font-weight: bold",""),null}return this.player[N](...U)}function D(N){return typeof window<"u"&&typeof window.MediaStream<"u"&&N instanceof window.MediaStream}function Y(N){return/^blob:/.test(N)}function ce(N=document.createElement("video")){const U=/iPhone|iPod/.test(navigator.userAgent)===!1;return N.webkitSupportsPresentationMode&&typeof N.webkitSetPresentationMode=="function"&&U}function z(N){return N}return cs}var us,ci;function dd(){if(ci)return us;ci=1;var s=Object.defineProperty,e=Object.getOwnPropertyDescriptor,t=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,n=(P,D)=>{for(var Y in D)s(P,Y,{get:D[Y],enumerable:!0})},i=(P,D,Y,ce)=>{if(D&&typeof D=="object"||typeof D=="function")for(let z of t(D))!r.call(P,z)&&z!==Y&&s(P,z,{get:()=>D[z],enumerable:!(ce=e(D,z))||ce.enumerable});return P},a=P=>i(s({},"__esModule",{value:!0}),P),o={};n(o,{AUDIO_EXTENSIONS:()=>k,DASH_EXTENSIONS:()=>B,FLV_EXTENSIONS:()=>I,HLS_EXTENSIONS:()=>O,MATCH_URL_DAILYMOTION:()=>m,MATCH_URL_FACEBOOK:()=>g,MATCH_URL_FACEBOOK_WATCH:()=>y,MATCH_URL_KALTURA:()=>S,MATCH_URL_MIXCLOUD:()=>w,MATCH_URL_MUX:()=>f,MATCH_URL_SOUNDCLOUD:()=>h,MATCH_URL_STREAMABLE:()=>b,MATCH_URL_TWITCH_CHANNEL:()=>p,MATCH_URL_TWITCH_VIDEO:()=>v,MATCH_URL_VIDYARD:()=>_,MATCH_URL_VIMEO:()=>u,MATCH_URL_WISTIA:()=>j,MATCH_URL_YOUTUBE:()=>d,VIDEO_EXTENSIONS:()=>R,canPlay:()=>A}),us=a(o);var l=Br();const d=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,h=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/,u=/vimeo\.com\/(?!progressive_redirect).+/,f=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,g=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/,y=/^https?:\/\/fb\.watch\/.+$/,b=/streamable\.com\/([a-z0-9]+)$/,j=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,v=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/,p=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/,m=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/,w=/mixcloud\.com\/([^/]+\/[^/]+)/,_=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/,S=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/,k=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,R=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,O=/\.(m3u8)($|\?)/i,B=/\.(mpd)($|\?)/i,I=/\.(flv)($|\?)/i,L=P=>{if(P instanceof Array){for(const D of P)if(typeof D=="string"&&L(D)||L(D.src))return!0;return!1}return(0,l.isMediaStream)(P)||(0,l.isBlobUrl)(P)?!0:k.test(P)||R.test(P)||O.test(P)||B.test(P)||I.test(P)},A={youtube:P=>P instanceof Array?P.every(D=>d.test(D)):d.test(P),soundcloud:P=>h.test(P)&&!k.test(P),vimeo:P=>u.test(P)&&!R.test(P)&&!O.test(P),mux:P=>f.test(P),facebook:P=>g.test(P)||y.test(P),streamable:P=>b.test(P),wistia:P=>j.test(P),twitch:P=>v.test(P)||p.test(P),dailymotion:P=>m.test(P),mixcloud:P=>w.test(P),vidyard:P=>_.test(P),kaltura:P=>S.test(P),file:L};return us}var ds,ui;function hd(){if(ui)return ds;ui=1;var s=Object.defineProperty,e=Object.getOwnPropertyDescriptor,t=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,n=(u,f)=>{for(var g in f)s(u,g,{get:f[g],enumerable:!0})},i=(u,f,g,y)=>{if(f&&typeof f=="object"||typeof f=="function")for(let b of t(f))!r.call(u,b)&&b!==g&&s(u,b,{get:()=>f[b],enumerable:!(y=e(f,b))||y.enumerable});return u},a=u=>i(s({},"__esModule",{value:!0}),u),o={};n(o,{default:()=>h}),ds=a(o);var l=Br(),d=dd(),h=[{key:"youtube",name:"YouTube",canPlay:d.canPlay.youtube,lazyPlayer:(0,l.lazy)(()=>oe(()=>import("./YouTube-BWSq3t6-.js").then(u=>u.Y),__vite__mapDeps([0,1])))},{key:"soundcloud",name:"SoundCloud",canPlay:d.canPlay.soundcloud,lazyPlayer:(0,l.lazy)(()=>oe(()=>import("./SoundCloud-Do_h1BL-.js").then(u=>u.S),__vite__mapDeps([2,1])))},{key:"vimeo",name:"Vimeo",canPlay:d.canPlay.vimeo,lazyPlayer:(0,l.lazy)(()=>oe(()=>import("./Vimeo-CadFkkeV.js").then(u=>u.V),__vite__mapDeps([3,1])))},{key:"mux",name:"Mux",canPlay:d.canPlay.mux,lazyPlayer:(0,l.lazy)(()=>oe(()=>import("./Mux-BVmWYd20.js").then(u=>u.M),__vite__mapDeps([4,1])))},{key:"facebook",name:"Facebook",canPlay:d.canPlay.facebook,lazyPlayer:(0,l.lazy)(()=>oe(()=>import("./Facebook-BpQvcJ91.js").then(u=>u.F),__vite__mapDeps([5,1])))},{key:"streamable",name:"Streamable",canPlay:d.canPlay.streamable,lazyPlayer:(0,l.lazy)(()=>oe(()=>import("./Streamable-zwODS5I5.js").then(u=>u.S),__vite__mapDeps([6,1])))},{key:"wistia",name:"Wistia",canPlay:d.canPlay.wistia,lazyPlayer:(0,l.lazy)(()=>oe(()=>import("./Wistia-CsNqoXd-.js").then(u=>u.W),__vite__mapDeps([7,1])))},{key:"twitch",name:"Twitch",canPlay:d.canPlay.twitch,lazyPlayer:(0,l.lazy)(()=>oe(()=>import("./Twitch-idWwthSU.js").then(u=>u.T),__vite__mapDeps([8,1])))},{key:"dailymotion",name:"DailyMotion",canPlay:d.canPlay.dailymotion,lazyPlayer:(0,l.lazy)(()=>oe(()=>import("./DailyMotion-BVdZuCDG.js").then(u=>u.D),__vite__mapDeps([9,1])))},{key:"mixcloud",name:"Mixcloud",canPlay:d.canPlay.mixcloud,lazyPlayer:(0,l.lazy)(()=>oe(()=>import("./Mixcloud-CLz12SL1.js").then(u=>u.M),__vite__mapDeps([10,1])))},{key:"vidyard",name:"Vidyard",canPlay:d.canPlay.vidyard,lazyPlayer:(0,l.lazy)(()=>oe(()=>import("./Vidyard-CPrZP_Y-.js").then(u=>u.V),__vite__mapDeps([11,1])))},{key:"kaltura",name:"Kaltura",canPlay:d.canPlay.kaltura,lazyPlayer:(0,l.lazy)(()=>oe(()=>import("./Kaltura-B9-5r5Wl.js").then(u=>u.K),__vite__mapDeps([12,1])))},{key:"file",name:"FilePlayer",canPlay:d.canPlay.file,canEnablePIP:u=>d.canPlay.file(u)&&(document.pictureInPictureEnabled||(0,l.supportsWebKitPresentationMode)())&&!d.AUDIO_EXTENSIONS.test(u),lazyPlayer:(0,l.lazy)(()=>oe(()=>import("./FilePlayer-YBKO6cAF.js").then(u=>u.F),__vite__mapDeps([13,1])))}];return ds}var di=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function fd(s,e){return!!(s===e||di(s)&&di(e))}function pd(s,e){if(s.length!==e.length)return!1;for(var t=0;t<s.length;t++)if(!fd(s[t],e[t]))return!1;return!0}function md(s,e){e===void 0&&(e=pd);var t,r=[],n,i=!1;function a(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];return i&&t===this&&e(o,r)||(n=s.apply(this,o),i=!0,t=this,r=o),n}return a}const gd=Object.freeze(Object.defineProperty({__proto__:null,default:md},Symbol.toStringTag,{value:"Module"})),yd=Bi(gd);var hs,hi;function La(){if(hi)return hs;hi=1;var s=typeof Element<"u",e=typeof Map=="function",t=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function n(i,a){if(i===a)return!0;if(i&&a&&typeof i=="object"&&typeof a=="object"){if(i.constructor!==a.constructor)return!1;var o,l,d;if(Array.isArray(i)){if(o=i.length,o!=a.length)return!1;for(l=o;l--!==0;)if(!n(i[l],a[l]))return!1;return!0}var h;if(e&&i instanceof Map&&a instanceof Map){if(i.size!==a.size)return!1;for(h=i.entries();!(l=h.next()).done;)if(!a.has(l.value[0]))return!1;for(h=i.entries();!(l=h.next()).done;)if(!n(l.value[1],a.get(l.value[0])))return!1;return!0}if(t&&i instanceof Set&&a instanceof Set){if(i.size!==a.size)return!1;for(h=i.entries();!(l=h.next()).done;)if(!a.has(l.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(i)&&ArrayBuffer.isView(a)){if(o=i.length,o!=a.length)return!1;for(l=o;l--!==0;)if(i[l]!==a[l])return!1;return!0}if(i.constructor===RegExp)return i.source===a.source&&i.flags===a.flags;if(i.valueOf!==Object.prototype.valueOf&&typeof i.valueOf=="function"&&typeof a.valueOf=="function")return i.valueOf()===a.valueOf();if(i.toString!==Object.prototype.toString&&typeof i.toString=="function"&&typeof a.toString=="function")return i.toString()===a.toString();if(d=Object.keys(i),o=d.length,o!==Object.keys(a).length)return!1;for(l=o;l--!==0;)if(!Object.prototype.hasOwnProperty.call(a,d[l]))return!1;if(s&&i instanceof Element)return!1;for(l=o;l--!==0;)if(!((d[l]==="_owner"||d[l]==="__v"||d[l]==="__o")&&i.$$typeof)&&!n(i[d[l]],a[d[l]]))return!1;return!0}return i!==i&&a!==a}return hs=function(a,o){try{return n(a,o)}catch(l){if((l.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw l}},hs}var fs={exports:{}},ps,fi;function vd(){if(fi)return ps;fi=1;var s="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ps=s,ps}var ms,pi;function bd(){if(pi)return ms;pi=1;var s=vd();function e(){}function t(){}return t.resetWarningCache=e,ms=function(){function r(a,o,l,d,h,u){if(u!==s){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}r.isRequired=r;function n(){return r}var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:n,element:r,elementType:r,instanceOf:n,node:r,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:t,resetWarningCache:e};return i.PropTypes=i,i},ms}var mi;function Da(){return mi||(mi=1,fs.exports=bd()()),fs.exports}var gs,gi;function Ma(){if(gi)return gs;gi=1;var s=Object.create,e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,n=Object.getPrototypeOf,i=Object.prototype.hasOwnProperty,a=(R,O)=>{for(var B in O)e(R,B,{get:O[B],enumerable:!0})},o=(R,O,B,I)=>{if(O&&typeof O=="object"||typeof O=="function")for(let L of r(O))!i.call(R,L)&&L!==B&&e(R,L,{get:()=>O[L],enumerable:!(I=t(O,L))||I.enumerable});return R},l=(R,O,B)=>(B=R!=null?s(n(R)):{},o(!R||!R.__esModule?e(B,"default",{value:R,enumerable:!0}):B,R)),d=R=>o(e({},"__esModule",{value:!0}),R),h={};a(h,{defaultProps:()=>k,propTypes:()=>_}),gs=d(h);var u=l(Da());const{string:f,bool:g,number:y,array:b,oneOfType:j,shape:v,object:p,func:m,node:w}=u.default,_={url:j([f,b,p]),playing:g,loop:g,controls:g,volume:y,muted:g,playbackRate:y,width:j([f,y]),height:j([f,y]),style:p,progressInterval:y,playsinline:g,pip:g,stopOnUnmount:g,light:j([g,f,p]),playIcon:w,previewTabIndex:y,previewAriaLabel:f,fallback:w,oEmbedUrl:f,wrapper:j([f,m,v({render:m.isRequired})]),config:v({soundcloud:v({options:p}),youtube:v({playerVars:p,embedOptions:p,onUnstarted:m}),facebook:v({appId:f,version:f,playerId:f,attributes:p}),dailymotion:v({params:p}),vimeo:v({playerOptions:p,title:f}),mux:v({attributes:p,version:f}),file:v({attributes:p,tracks:b,forceVideo:g,forceAudio:g,forceHLS:g,forceSafariHLS:g,forceDisableHls:g,forceDASH:g,forceFLV:g,hlsOptions:p,hlsVersion:f,dashVersion:f,flvVersion:f}),wistia:v({options:p,playerId:f,customControls:b}),mixcloud:v({options:p}),twitch:v({options:p,playerId:f}),vidyard:v({options:p})}),onReady:m,onStart:m,onPlay:m,onPause:m,onBuffer:m,onBufferEnd:m,onEnded:m,onError:m,onDuration:m,onSeek:m,onPlaybackRateChange:m,onPlaybackQualityChange:m,onProgress:m,onClickPreview:m,onEnablePIP:m,onDisablePIP:m},S=()=>{},k={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:S},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},mux:{attributes:{},version:"2"},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0",forceDisableHls:!1},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:S,onStart:S,onPlay:S,onPause:S,onBuffer:S,onBufferEnd:S,onEnded:S,onError:S,onDuration:S,onSeek:S,onPlaybackRateChange:S,onPlaybackQualityChange:S,onProgress:S,onClickPreview:S,onEnablePIP:S,onDisablePIP:S};return gs}var ys,yi;function wd(){if(yi)return ys;yi=1;var s=Object.create,e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,n=Object.getPrototypeOf,i=Object.prototype.hasOwnProperty,a=(m,w,_)=>w in m?e(m,w,{enumerable:!0,configurable:!0,writable:!0,value:_}):m[w]=_,o=(m,w)=>{for(var _ in w)e(m,_,{get:w[_],enumerable:!0})},l=(m,w,_,S)=>{if(w&&typeof w=="object"||typeof w=="function")for(let k of r(w))!i.call(m,k)&&k!==_&&e(m,k,{get:()=>w[k],enumerable:!(S=t(w,k))||S.enumerable});return m},d=(m,w,_)=>(_=m!=null?s(n(m)):{},l(!m||!m.__esModule?e(_,"default",{value:m,enumerable:!0}):_,m)),h=m=>l(e({},"__esModule",{value:!0}),m),u=(m,w,_)=>(a(m,typeof w!="symbol"?w+"":w,_),_),f={};o(f,{default:()=>p}),ys=h(f);var g=d(Bt()),y=d(La()),b=Ma(),j=Br();const v=5e3;class p extends g.Component{constructor(){super(...arguments),u(this,"mounted",!1),u(this,"isReady",!1),u(this,"isPlaying",!1),u(this,"isLoading",!0),u(this,"loadOnReady",null),u(this,"startOnPlay",!0),u(this,"seekOnPlay",null),u(this,"onDurationCalled",!1),u(this,"handlePlayerMount",w=>{if(this.player){this.progress();return}this.player=w,this.player.load(this.props.url),this.progress()}),u(this,"getInternalPlayer",w=>this.player?this.player[w]:null),u(this,"progress",()=>{if(this.props.url&&this.player&&this.isReady){const w=this.getCurrentTime()||0,_=this.getSecondsLoaded(),S=this.getDuration();if(S){const k={playedSeconds:w,played:w/S};_!==null&&(k.loadedSeconds=_,k.loaded=_/S),(k.playedSeconds!==this.prevPlayed||k.loadedSeconds!==this.prevLoaded)&&this.props.onProgress(k),this.prevPlayed=k.playedSeconds,this.prevLoaded=k.loadedSeconds}}this.progressTimeout=setTimeout(this.progress,this.props.progressFrequency||this.props.progressInterval)}),u(this,"handleReady",()=>{if(!this.mounted)return;this.isReady=!0,this.isLoading=!1;const{onReady:w,playing:_,volume:S,muted:k}=this.props;w(),!k&&S!==null&&this.player.setVolume(S),this.loadOnReady?(this.player.load(this.loadOnReady,!0),this.loadOnReady=null):_&&this.player.play(),this.handleDurationCheck()}),u(this,"handlePlay",()=>{this.isPlaying=!0,this.isLoading=!1;const{onStart:w,onPlay:_,playbackRate:S}=this.props;this.startOnPlay&&(this.player.setPlaybackRate&&S!==1&&this.player.setPlaybackRate(S),w(),this.startOnPlay=!1),_(),this.seekOnPlay&&(this.seekTo(this.seekOnPlay),this.seekOnPlay=null),this.handleDurationCheck()}),u(this,"handlePause",w=>{this.isPlaying=!1,this.isLoading||this.props.onPause(w)}),u(this,"handleEnded",()=>{const{activePlayer:w,loop:_,onEnded:S}=this.props;w.loopOnEnded&&_&&this.seekTo(0),_||(this.isPlaying=!1,S())}),u(this,"handleError",(...w)=>{this.isLoading=!1,this.props.onError(...w)}),u(this,"handleDurationCheck",()=>{clearTimeout(this.durationCheckTimeout);const w=this.getDuration();w?this.onDurationCalled||(this.props.onDuration(w),this.onDurationCalled=!0):this.durationCheckTimeout=setTimeout(this.handleDurationCheck,100)}),u(this,"handleLoaded",()=>{this.isLoading=!1})}componentDidMount(){this.mounted=!0}componentWillUnmount(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}componentDidUpdate(w){if(!this.player)return;const{url:_,playing:S,volume:k,muted:R,playbackRate:O,pip:B,loop:I,activePlayer:L,disableDeferredLoading:A}=this.props;if(!(0,y.default)(w.url,_)){if(this.isLoading&&!L.forceLoad&&!A&&!(0,j.isMediaStream)(_)){console.warn(`ReactPlayer: the attempt to load ${_} is being deferred until the player has loaded`),this.loadOnReady=_;return}this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(_,this.isReady)}!w.playing&&S&&!this.isPlaying&&this.player.play(),w.playing&&!S&&this.isPlaying&&this.player.pause(),!w.pip&&B&&this.player.enablePIP&&this.player.enablePIP(),w.pip&&!B&&this.player.disablePIP&&this.player.disablePIP(),w.volume!==k&&k!==null&&this.player.setVolume(k),w.muted!==R&&(R?this.player.mute():(this.player.unmute(),k!==null&&setTimeout(()=>this.player.setVolume(k)))),w.playbackRate!==O&&this.player.setPlaybackRate&&this.player.setPlaybackRate(O),w.loop!==I&&this.player.setLoop&&this.player.setLoop(I)}getDuration(){return this.isReady?this.player.getDuration():null}getCurrentTime(){return this.isReady?this.player.getCurrentTime():null}getSecondsLoaded(){return this.isReady?this.player.getSecondsLoaded():null}seekTo(w,_,S){if(!this.isReady){w!==0&&(this.seekOnPlay=w,setTimeout(()=>{this.seekOnPlay=null},v));return}if(_?_==="fraction":w>0&&w<1){const R=this.player.getDuration();if(!R){console.warn("ReactPlayer: could not seek using fraction – duration not yet available");return}this.player.seekTo(R*w,S);return}this.player.seekTo(w,S)}render(){const w=this.props.activePlayer;return w?g.default.createElement(w,{...this.props,onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError}):null}}return u(p,"displayName","Player"),u(p,"propTypes",b.propTypes),u(p,"defaultProps",b.defaultProps),ys}var vs,vi;function _d(){if(vi)return vs;vi=1;var s=Object.create,e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,n=Object.getPrototypeOf,i=Object.prototype.hasOwnProperty,a=(I,L,A)=>L in I?e(I,L,{enumerable:!0,configurable:!0,writable:!0,value:A}):I[L]=A,o=(I,L)=>{for(var A in L)e(I,A,{get:L[A],enumerable:!0})},l=(I,L,A,P)=>{if(L&&typeof L=="object"||typeof L=="function")for(let D of r(L))!i.call(I,D)&&D!==A&&e(I,D,{get:()=>L[D],enumerable:!(P=t(L,D))||P.enumerable});return I},d=(I,L,A)=>(A=I!=null?s(n(I)):{},l(!I||!I.__esModule?e(A,"default",{value:I,enumerable:!0}):A,I)),h=I=>l(e({},"__esModule",{value:!0}),I),u=(I,L,A)=>(a(I,typeof L!="symbol"?L+"":L,A),A),f={};o(f,{createReactPlayer:()=>B}),vs=h(f);var g=d(Bt()),y=d(Ra()),b=d(yd),j=d(La()),v=Ma(),p=Br(),m=d(wd());const w=(0,p.lazy)(()=>oe(()=>import("./Preview--eI_3dNB.js").then(I=>I.P),__vite__mapDeps([14,1]))),_=typeof window<"u"&&window.document&&typeof document<"u",S=typeof Yr<"u"&&Yr.window&&Yr.window.document,k=Object.keys(v.propTypes),R=_||S?g.Suspense:()=>null,O=[],B=(I,L)=>{var A;return A=class extends g.Component{constructor(){super(...arguments),u(this,"state",{showPreview:!!this.props.light}),u(this,"references",{wrapper:P=>{this.wrapper=P},player:P=>{this.player=P}}),u(this,"handleClickPreview",P=>{this.setState({showPreview:!1}),this.props.onClickPreview(P)}),u(this,"showPreview",()=>{this.setState({showPreview:!0})}),u(this,"getDuration",()=>this.player?this.player.getDuration():null),u(this,"getCurrentTime",()=>this.player?this.player.getCurrentTime():null),u(this,"getSecondsLoaded",()=>this.player?this.player.getSecondsLoaded():null),u(this,"getInternalPlayer",(P="player")=>this.player?this.player.getInternalPlayer(P):null),u(this,"seekTo",(P,D,Y)=>{if(!this.player)return null;this.player.seekTo(P,D,Y)}),u(this,"handleReady",()=>{this.props.onReady(this)}),u(this,"getActivePlayer",(0,b.default)(P=>{for(const D of[...O,...I])if(D.canPlay(P))return D;return L||null})),u(this,"getConfig",(0,b.default)((P,D)=>{const{config:Y}=this.props;return y.default.all([v.defaultProps.config,v.defaultProps.config[D]||{},Y,Y[D]||{}])})),u(this,"getAttributes",(0,b.default)(P=>(0,p.omit)(this.props,k))),u(this,"renderActivePlayer",P=>{if(!P)return null;const D=this.getActivePlayer(P);if(!D)return null;const Y=this.getConfig(P,D.key);return g.default.createElement(m.default,{...this.props,key:D.key,ref:this.references.player,config:Y,activePlayer:D.lazyPlayer||D,onReady:this.handleReady})})}shouldComponentUpdate(P,D){return!(0,j.default)(this.props,P)||!(0,j.default)(this.state,D)}componentDidUpdate(P){const{light:D}=this.props;!P.light&&D&&this.setState({showPreview:!0}),P.light&&!D&&this.setState({showPreview:!1})}renderPreview(P){if(!P)return null;const{light:D,playIcon:Y,previewTabIndex:ce,oEmbedUrl:z,previewAriaLabel:N}=this.props;return g.default.createElement(w,{url:P,light:D,playIcon:Y,previewTabIndex:ce,previewAriaLabel:N,oEmbedUrl:z,onClick:this.handleClickPreview})}render(){const{url:P,style:D,width:Y,height:ce,fallback:z,wrapper:N}=this.props,{showPreview:U}=this.state,X=this.getAttributes(P),ne=typeof N=="string"?this.references.wrapper:void 0;return g.default.createElement(N,{ref:ne,style:{...D,width:Y,height:ce},...X},g.default.createElement(R,{fallback:z},U?this.renderPreview(P):this.renderActivePlayer(P)))}},u(A,"displayName","ReactPlayer"),u(A,"propTypes",v.propTypes),u(A,"defaultProps",v.defaultProps),u(A,"addCustomPlayer",P=>{O.push(P)}),u(A,"removeCustomPlayers",()=>{O.length=0}),u(A,"canPlay",P=>{for(const D of[...O,...I])if(D.canPlay(P))return!0;return!1}),u(A,"canEnablePIP",P=>{for(const D of[...O,...I])if(D.canEnablePIP&&D.canEnablePIP(P))return!0;return!1}),A};return vs}var bs,bi;function xd(){if(bi)return bs;bi=1;var s=Object.create,e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,n=Object.getPrototypeOf,i=Object.prototype.hasOwnProperty,a=(b,j)=>{for(var v in j)e(b,v,{get:j[v],enumerable:!0})},o=(b,j,v,p)=>{if(j&&typeof j=="object"||typeof j=="function")for(let m of r(j))!i.call(b,m)&&m!==v&&e(b,m,{get:()=>j[m],enumerable:!(p=t(j,m))||p.enumerable});return b},l=(b,j,v)=>(v=b!=null?s(n(b)):{},o(!b||!b.__esModule?e(v,"default",{value:b,enumerable:!0}):v,b)),d=b=>o(e({},"__esModule",{value:!0}),b),h={};a(h,{default:()=>y}),bs=d(h);var u=l(hd()),f=_d();const g=u.default[u.default.length-1];var y=(0,f.createReactPlayer)(u.default,g);return bs}var jd=xd();const Ia=Vt(jd),Zs=({src:s,alt:e,className:t="",fallbackSrc:r="https://placehold.co/600x400?text=Image+non+disponible",loadingComponent:n,onLoad:i,onError:a,...o})=>{const[l,d]=C.useState(!0),[h,u]=C.useState(!1),[f,g]=C.useState(s),{handleError:y}=Z();C.useEffect(()=>{g(s),d(!0),u(!1)},[s]);const b=()=>{d(!1),u(!1),i==null||i()},j=()=>{y("Erreur de chargement d'image",`Impossible de charger l'image: ${s}. Source originale: ${s}, Fallback: ${r}, Alt: ${e}`),d(!1),u(!0),g(r),a==null||a()};return c.jsxs("div",{className:"relative overflow-hidden","data-testid":"image-container",children:[l&&n&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-primary-800",children:n}),c.jsx(K.img,{src:f,alt:e,className:`${t} ${l?"opacity-0":"opacity-100"} ${h?"bg-primary-800":""} transition-opacity duration-300`,onLoad:b,onError:j,loading:"lazy",...o})]})},en=()=>c.jsx(K.div,{className:"w-8 h-8 border-4 border-accent-400 border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},role:"progressbar","aria-label":"Chargement de l'image"}),Ed=()=>{const[s,e]=C.useState(null),{projects:t}=Ht(),r=()=>{e(null)},n=i=>{const a=i.match(/(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([^&?]+)/);return a?a[1]:null};return c.jsxs(c.Fragment,{children:[c.jsx(Na,{modules:[Qu,Zu,ed],spaceBetween:30,slidesPerView:1,breakpoints:{640:{slidesPerView:2},1024:{slidesPerView:3}},navigation:!0,pagination:{clickable:!0},autoplay:{delay:5e3,disableOnInteraction:!1},className:"pb-12",children:t.map(i=>c.jsx(Aa,{children:c.jsxs(K.div,{whileHover:{y:-10},className:"bg-primary-800 rounded-lg overflow-hidden shadow-lg",children:[c.jsxs("div",{className:"relative h-60 overflow-hidden bg-primary-800",children:[c.jsx(Zs,{src:i.image_url,alt:i.title,className:"w-full h-full object-cover transform hover:scale-105 transition-transform duration-500",loadingComponent:c.jsx(en,{})}),i.video_url&&n(i.video_url)&&c.jsx("button",{onClick:()=>e(i.video_url||null),className:"absolute inset-0 flex items-center justify-center bg-black/50 opacity-0 hover:opacity-100 transition-opacity duration-300",children:c.jsx("span",{className:"w-16 h-16 rounded-full bg-accent-500/80 flex items-center justify-center",children:c.jsx(Gi,{className:"h-8 w-8 text-white"})})}),c.jsx("div",{className:"absolute top-3 right-3 z-10",children:c.jsx("span",{className:"bg-accent-600 text-xs font-semibold px-2.5 py-1 rounded-full text-white",children:i.type==="music"?"Musique":"Vidéo"})})]}),c.jsxs("div",{className:"p-5",children:[c.jsx("h3",{className:"text-xl font-bold mb-1 gold-gradient",children:i.title}),c.jsxs("p",{className:"text-gray-400 text-sm mb-2",children:[i.artist," • ",i.year]}),c.jsx("p",{className:"text-gray-300 text-sm line-clamp-3",children:i.description})]})]})},i.id))}),s&&c.jsx("div",{className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-5",children:c.jsxs("div",{className:"relative w-full max-w-4xl",children:[c.jsxs("button",{onClick:r,className:"absolute -top-12 right-0 text-white hover:text-accent-400 transition-colors",children:[c.jsx("span",{className:"sr-only",children:"Fermer"}),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),c.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})]}),c.jsx("div",{className:"aspect-w-16 aspect-h-9",children:c.jsx(Ia,{url:s,width:"100%",height:"100%",controls:!0,playing:!0,light:!1,config:{youtube:{playerVars:{showinfo:1,origin:window.location.origin,modestbranding:1,rel:0}}},onError:i=>{console.error("Erreur ReactPlayer:",i)}})})]})})]})},kd=()=>{const{artists:s}=Ht(),e={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.2}}},t={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.6}}};return c.jsx(K.div,{variants:e,initial:"hidden",whileInView:"show",viewport:{once:!0},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.map(r=>c.jsxs(K.div,{variants:t,className:"bg-primary-900 rounded-lg overflow-hidden shadow-lg transition-transform duration-300 hover:shadow-[0_0_15px_rgba(185,158,119,0.2)] hover:-translate-y-2",children:[c.jsx("div",{className:"h-60 overflow-hidden relative bg-primary-800",children:c.jsx(Zs,{src:r.image_url,alt:r.name,className:"w-full h-full object-cover transition-transform duration-500 hover:scale-105",loadingComponent:c.jsx(en,{})})}),c.jsxs("div",{className:"p-6",children:[c.jsx("h3",{className:"text-xl font-bold mb-1 gold-gradient",children:r.name}),c.jsxs("p",{className:"text-gray-400 text-sm mb-2",children:["Dernier projet : ",r.latest_work," • ",new Date(r.release_date).toLocaleDateString()]}),c.jsx("p",{className:"text-gray-300 text-sm mb-4",children:r.description}),r.profile_url&&c.jsxs("a",{href:r.profile_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-accent-400 hover:text-accent-300 transition-colors",children:[c.jsx("span",{children:"Découvrir"}),c.jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]},r.id))})},Sd=()=>{const{fetchProjects:s,fetchArtists:e,fetchServices:t,isLoading:r}=Ht();return C.useEffect(()=>{s(),e(),t()},[]),r?c.jsx("div",{children:"Chargement..."}):c.jsxs("div",{className:"overflow-hidden",children:[c.jsx(Xu,{}),c.jsx("section",{className:"py-20 bg-primary-950",children:c.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[c.jsxs(K.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"mb-12 text-center",children:[c.jsx("h2",{className:"text-3xl md:text-4xl xl:text-5xl font-heading font-bold mb-3 gold-gradient",children:"Nos derniers projets"}),c.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Découvrez les dernières productions musicales et visuelles réalisées par notre label"})]}),c.jsx(Ed,{})]})}),c.jsx("section",{className:"py-20 bg-black",children:c.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[c.jsxs(K.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"mb-12 text-center",children:[c.jsx("h2",{className:"text-3xl md:text-4xl xl:text-5xl font-heading font-bold mb-3 gold-gradient",children:"BRM News"}),c.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"L'actualité des artistes qui nous ont fait confiance"})]}),c.jsx(kd,{})]})}),c.jsxs("section",{className:"py-20 bg-primary-950 relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 opacity-10",children:c.jsx("div",{className:"bg-[url('https://images.pexels.com/photos/164829/pexels-photo-164829.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2')] bg-cover bg-center h-full w-full"})}),c.jsx("div",{className:"container mx-auto px-4 md:px-6 relative z-10",children:c.jsx("div",{className:"max-w-3xl mx-auto text-center",children:c.jsxs(K.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.6},viewport:{once:!0},children:[c.jsx("h2",{className:"text-3xl md:text-4xl font-heading font-bold mb-6 gold-gradient",children:"Prêt à donner vie à votre projet musical?"}),c.jsx("p",{className:"text-gray-300 mb-8 text-lg",children:"Chez Black Road Music, nous mettons notre expertise et notre passion au service de votre créativité. Contactez-nous pour discuter de votre vision et découvrir comment nous pouvons la transformer en réalité."}),c.jsx(K.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:c.jsx(fe,{to:"/contact",className:"inline-block bg-gradient-to-r from-accent-700 to-accent-500 text-white font-medium py-3 px-8 rounded-full transition-all hover:shadow-[0_0_15px_rgba(185,158,119,0.5)]",children:"Collaborer avec nous"})})]})})})]})]})},Pd=()=>{const{projects:s,fetchProjects:e,isLoading:t}=Ht(),[r,n]=C.useState(null),[i,a]=C.useState("all"),[o,l]=C.useState([]);C.useEffect(()=>{e()},[]),C.useEffect(()=>{l(i==="all"?s:s.filter(f=>f.type===i))},[i,s]);const d=f=>{const g=f.match(/(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([^&?]+)/);return g?g[1]:null};if(t)return c.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:c.jsx("div",{className:"text-accent-400",children:"Chargement..."})});const h={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},u={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return c.jsxs("div",{className:"pt-24 pb-20 bg-black",children:[c.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[c.jsxs(K.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-16 text-center",children:[c.jsx("h1",{className:"text-4xl md:text-5xl font-heading font-bold mb-4 gold-gradient",children:"Nos Projets"}),c.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Découvrez les projets et productions réalisés par Black Road Music, des albums aux clips vidéo en passant par les mixtapes et EP."})]}),c.jsx("div",{className:"flex justify-center mb-10",children:c.jsx("div",{className:"inline-flex bg-primary-800 rounded-full p-1",children:[{label:"Tous",value:"all"},{label:"Musique",value:"music"},{label:"Vidéo",value:"video"}].map(f=>c.jsx("button",{onClick:()=>a(f.value),className:`px-6 py-2 rounded-full text-sm font-medium transition-all ${i===f.value?"bg-accent-600 text-white shadow-lg":"text-gray-300 hover:text-white"}`,children:f.label},f.value))})}),c.jsx(K.div,{variants:h,initial:"hidden",animate:"show",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:o.map(f=>c.jsxs(K.div,{variants:u,whileHover:{y:-10},className:"bg-primary-900 rounded-lg overflow-hidden shadow-lg h-full",children:[c.jsxs("div",{className:"relative h-60 overflow-hidden bg-primary-800",children:[c.jsx(Zs,{src:f.image_url,alt:f.title,className:"w-full h-full object-cover transform hover:scale-105 transition-transform duration-500",loadingComponent:c.jsx(en,{})}),f.video_url&&d(f.video_url)&&c.jsx("button",{onClick:()=>n(f.video_url||null),className:"absolute inset-0 flex items-center justify-center bg-black/50 opacity-0 hover:opacity-100 transition-opacity duration-300",children:c.jsx("span",{className:"w-16 h-16 rounded-full bg-accent-500/80 flex items-center justify-center",children:c.jsx(Gi,{className:"h-8 w-8 text-white"})})}),c.jsx("div",{className:"absolute top-3 right-3 z-10",children:c.jsx("span",{className:"bg-accent-600 text-xs font-semibold px-2.5 py-1 rounded-full text-white",children:f.type==="music"?"Musique":"Vidéo"})})]}),c.jsxs("div",{className:"p-6",children:[c.jsx("h3",{className:"text-xl font-bold mb-1 gold-gradient",children:f.title}),c.jsxs("p",{className:"text-gray-400 text-sm mb-4",children:[f.artist," • ",f.year]}),c.jsx("p",{className:"text-gray-300",children:f.description})]})]},f.id))})]}),r&&c.jsx("div",{className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-5",children:c.jsxs("div",{className:"relative w-full max-w-4xl",children:[c.jsxs("button",{onClick:()=>n(null),className:"absolute -top-12 right-0 text-white hover:text-accent-400 transition-colors",children:[c.jsx("span",{className:"sr-only",children:"Fermer"}),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),c.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})]}),c.jsx("div",{className:"aspect-w-16 aspect-h-9",children:c.jsx(Ia,{url:r,width:"100%",height:"100%",controls:!0,playing:!0,light:!1,config:{youtube:{playerVars:{showinfo:1,origin:window.location.origin,modestbranding:1,rel:0}}},onError:f=>{console.error("Erreur ReactPlayer:",f)}})})]})})]})},Od=({service:s})=>{const e=t=>{switch(t){case"music":return c.jsx(Io,{className:"h-6 w-6"});case"video":return c.jsx(Ys,{className:"h-6 w-6"});case"mic":return c.jsx(Mo,{className:"h-6 w-6"});case"image":return c.jsx(Ro,{className:"h-6 w-6"});case"radio":return c.jsx($o,{className:"h-6 w-6"});case"users":return c.jsx(Ji,{className:"h-6 w-6"});case"calendar":return c.jsx(Wi,{className:"h-6 w-6"});case"settings":return c.jsx(Ki,{className:"h-6 w-6"});default:return null}};return c.jsx("div",{className:"group h-full",children:c.jsxs("div",{className:"bg-primary-900 rounded-xl p-6 h-full transition-all duration-300 hover:shadow-[0_0_15px_rgba(185,158,119,0.2)] hover:-translate-y-1",children:[c.jsx("div",{className:"bg-accent-600/10 w-12 h-12 rounded-lg flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300",children:c.jsx("span",{className:"text-accent-400",children:e(s.icon)})}),c.jsx("h3",{className:"text-xl font-bold mb-3 gold-gradient",children:s.title}),c.jsx("p",{className:"text-gray-400 mb-6",children:s.description}),c.jsx("ul",{className:"space-y-3 mb-6",children:s.features.map((t,r)=>c.jsxs(K.li,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},transition:{duration:.3,delay:r*.1},viewport:{once:!0},className:"flex items-start",children:[c.jsx("span",{className:"text-accent-400 mr-2",children:"•"}),c.jsx("span",{className:"text-gray-300",children:t})]},r))}),c.jsx("div",{className:"pt-4 mt-auto",children:c.jsxs(K.div,{whileHover:{x:5},className:"inline-flex items-center text-accent-400 hover:text-accent-300 transition-colors",children:[c.jsx(fe,{to:"/contact",className:"font-medium",children:"En savoir plus"}),c.jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})})},Td=()=>{const{services:s,fetchServices:e,isLoading:t}=Ht();return C.useEffect(()=>{e()},[]),t?c.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:c.jsx("div",{className:"text-accent-400",children:"Chargement..."})}):c.jsx("div",{className:"pt-24 pb-20 bg-black",children:c.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[c.jsxs(K.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-16 text-center",children:[c.jsx("h1",{className:"text-4xl md:text-5xl font-heading font-bold mb-4 gold-gradient",children:"Nos Services"}),c.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"De la production musicale à la réalisation audiovisuelle, découvrez notre gamme complète de services professionnels."})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.map((r,n)=>c.jsx(K.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:n*.1},viewport:{once:!0},children:c.jsx(Od,{service:r})},r.id))}),c.jsxs(K.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"mt-20 relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-[url('https://images.pexels.com/photos/164829/pexels-photo-164829.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2')] bg-cover bg-center opacity-10"}),c.jsx("div",{className:"bg-primary-900/80 backdrop-blur-sm rounded-xl p-8 md:p-12 relative",children:c.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[c.jsx("h2",{className:"text-2xl md:text-3xl font-heading font-bold mb-6 gold-gradient",children:"Prêt à donner vie à votre projet ?"}),c.jsx("p",{className:"text-gray-300 mb-8",children:"Chaque projet est unique et mérite une attention particulière. Contactez-nous pour discuter de vos besoins et obtenir un devis personnalisé."}),c.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:c.jsx(K.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:c.jsx(fe,{to:"/reserver",className:"inline-block bg-gradient-to-r from-accent-700 to-accent-500 text-white font-medium py-3 px-8 rounded-full transition-all hover:shadow-[0_0_15px_rgba(185,158,119,0.5)]",children:"Reserver une session"})})})]})})]})]})})};var mr=s=>s.type==="checkbox",yt=s=>s instanceof Date,Oe=s=>s==null;const $a=s=>typeof s=="object";var ye=s=>!Oe(s)&&!Array.isArray(s)&&$a(s)&&!yt(s),Cd=s=>ye(s)&&s.target?mr(s.target)?s.target.checked:s.target.value:s,Nd=s=>s.substring(0,s.search(/\.\d+(\.|$)/))||s,Ad=(s,e)=>s.has(Nd(e)),Rd=s=>{const e=s.constructor&&s.constructor.prototype;return ye(e)&&e.hasOwnProperty("isPrototypeOf")},tn=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function je(s){let e;const t=Array.isArray(s),r=typeof FileList<"u"?s instanceof FileList:!1;if(s instanceof Date)e=new Date(s);else if(!(tn&&(s instanceof Blob||r))&&(t||ye(s)))if(e=t?[]:Object.create(Object.getPrototypeOf(s)),!t&&!Rd(s))e=s;else for(const n in s)s.hasOwnProperty(n)&&(e[n]=je(s[n]));else return s;return e}var Vr=s=>/^\w*$/.test(s),be=s=>s===void 0,rn=s=>Array.isArray(s)?s.filter(Boolean):[],sn=s=>rn(s.replace(/["|']|\]/g,"").split(/\.|\[/)),V=(s,e,t)=>{if(!e||!ye(s))return t;const r=(Vr(e)?[e]:sn(e)).reduce((n,i)=>Oe(n)?n:n[i],s);return be(r)||r===s?be(s[e])?t:s[e]:r},Fe=s=>typeof s=="boolean",le=(s,e,t)=>{let r=-1;const n=Vr(e)?[e]:sn(e),i=n.length,a=i-1;for(;++r<i;){const o=n[r];let l=t;if(r!==a){const d=s[o];l=ye(d)||Array.isArray(d)?d:isNaN(+n[r+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;s[o]=l,s=s[o]}};const wi={BLUR:"blur",FOCUS_OUT:"focusout"},qe={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ge={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Ld=Q.createContext(null);Ld.displayName="HookFormContext";var Dd=(s,e,t,r=!0)=>{const n={defaultValues:e._defaultValues};for(const i in s)Object.defineProperty(n,i,{get:()=>{const a=i;return e._proxyFormState[a]!==qe.all&&(e._proxyFormState[a]=!r||qe.all),s[a]}});return n};const Md=typeof window<"u"?Q.useLayoutEffect:Q.useEffect;var ze=s=>typeof s=="string",Id=(s,e,t,r,n)=>ze(s)?(r&&e.watch.add(s),V(t,s,n)):Array.isArray(s)?s.map(i=>(r&&e.watch.add(i),V(t,i))):(r&&(e.watchAll=!0),t),Is=s=>Oe(s)||!$a(s);function it(s,e,t=new WeakSet){if(Is(s)||Is(e))return s===e;if(yt(s)&&yt(e))return s.getTime()===e.getTime();const r=Object.keys(s),n=Object.keys(e);if(r.length!==n.length)return!1;if(t.has(s)||t.has(e))return!0;t.add(s),t.add(e);for(const i of r){const a=s[i];if(!n.includes(i))return!1;if(i!=="ref"){const o=e[i];if(yt(a)&&yt(o)||ye(a)&&ye(o)||Array.isArray(a)&&Array.isArray(o)?!it(a,o,t):a!==o)return!1}}return!0}var $d=(s,e,t,r,n)=>e?{...t[s],types:{...t[s]&&t[s].types?t[s].types:{},[r]:n||!0}}:{},lr=s=>Array.isArray(s)?s:[s],_i=()=>{let s=[];return{get observers(){return s},next:n=>{for(const i of s)i.next&&i.next(n)},subscribe:n=>(s.push(n),{unsubscribe:()=>{s=s.filter(i=>i!==n)}}),unsubscribe:()=>{s=[]}}},Ae=s=>ye(s)&&!Object.keys(s).length,nn=s=>s.type==="file",Ue=s=>typeof s=="function",Rr=s=>{if(!tn)return!1;const e=s?s.ownerDocument:0;return s instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},qa=s=>s.type==="select-multiple",an=s=>s.type==="radio",qd=s=>an(s)||mr(s),ws=s=>Rr(s)&&s.isConnected;function Ud(s,e){const t=e.slice(0,-1).length;let r=0;for(;r<t;)s=be(s)?r++:s[e[r++]];return s}function Fd(s){for(const e in s)if(s.hasOwnProperty(e)&&!be(s[e]))return!1;return!0}function ve(s,e){const t=Array.isArray(e)?e:Vr(e)?[e]:sn(e),r=t.length===1?s:Ud(s,t),n=t.length-1,i=t[n];return r&&delete r[i],n!==0&&(ye(r)&&Ae(r)||Array.isArray(r)&&Fd(r))&&ve(s,t.slice(0,-1)),s}var Ua=s=>{for(const e in s)if(Ue(s[e]))return!0;return!1};function Lr(s,e={}){const t=Array.isArray(s);if(ye(s)||t)for(const r in s)Array.isArray(s[r])||ye(s[r])&&!Ua(s[r])?(e[r]=Array.isArray(s[r])?[]:{},Lr(s[r],e[r])):Oe(s[r])||(e[r]=!0);return e}function Fa(s,e,t){const r=Array.isArray(s);if(ye(s)||r)for(const n in s)Array.isArray(s[n])||ye(s[n])&&!Ua(s[n])?be(e)||Is(t[n])?t[n]=Array.isArray(s[n])?Lr(s[n],[]):{...Lr(s[n])}:Fa(s[n],Oe(e)?{}:e[n],t[n]):t[n]=!it(s[n],e[n]);return t}var Zt=(s,e)=>Fa(s,e,Lr(e));const xi={value:!1,isValid:!1},ji={value:!0,isValid:!0};var Ba=s=>{if(Array.isArray(s)){if(s.length>1){const e=s.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return s[0].checked&&!s[0].disabled?s[0].attributes&&!be(s[0].attributes.value)?be(s[0].value)||s[0].value===""?ji:{value:s[0].value,isValid:!0}:ji:xi}return xi},Va=(s,{valueAsNumber:e,valueAsDate:t,setValueAs:r})=>be(s)?s:e?s===""?NaN:s&&+s:t&&ze(s)?new Date(s):r?r(s):s;const Ei={isValid:!1,value:null};var Wa=s=>Array.isArray(s)?s.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,Ei):Ei;function ki(s){const e=s.ref;return nn(e)?e.files:an(e)?Wa(s.refs).value:qa(e)?[...e.selectedOptions].map(({value:t})=>t):mr(e)?Ba(s.refs).value:Va(be(e.value)?s.ref.value:e.value,s)}var Bd=(s,e,t,r)=>{const n={};for(const i of s){const a=V(e,i);a&&le(n,i,a._f)}return{criteriaMode:t,names:[...s],fields:n,shouldUseNativeValidation:r}},Dr=s=>s instanceof RegExp,er=s=>be(s)?s:Dr(s)?s.source:ye(s)?Dr(s.value)?s.value.source:s.value:s,Si=s=>({isOnSubmit:!s||s===qe.onSubmit,isOnBlur:s===qe.onBlur,isOnChange:s===qe.onChange,isOnAll:s===qe.all,isOnTouch:s===qe.onTouched});const Pi="AsyncFunction";var Vd=s=>!!s&&!!s.validate&&!!(Ue(s.validate)&&s.validate.constructor.name===Pi||ye(s.validate)&&Object.values(s.validate).find(e=>e.constructor.name===Pi)),Wd=s=>s.mount&&(s.required||s.min||s.max||s.maxLength||s.minLength||s.pattern||s.validate),Oi=(s,e,t)=>!t&&(e.watchAll||e.watch.has(s)||[...e.watch].some(r=>s.startsWith(r)&&/^\.\w+/.test(s.slice(r.length))));const cr=(s,e,t,r)=>{for(const n of t||Object.keys(s)){const i=V(s,n);if(i){const{_f:a,...o}=i;if(a){if(a.refs&&a.refs[0]&&e(a.refs[0],n)&&!r)return!0;if(a.ref&&e(a.ref,a.name)&&!r)return!0;if(cr(o,e))break}else if(ye(o)&&cr(o,e))break}}};function Ti(s,e,t){const r=V(s,t);if(r||Vr(t))return{error:r,name:t};const n=t.split(".");for(;n.length;){const i=n.join("."),a=V(e,i),o=V(s,i);if(a&&!Array.isArray(a)&&t!==i)return{name:t};if(o&&o.type)return{name:i,error:o};if(o&&o.root&&o.root.type)return{name:`${i}.root`,error:o.root};n.pop()}return{name:t}}var Hd=(s,e,t,r)=>{t(s);const{name:n,...i}=s;return Ae(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(a=>e[a]===(!r||qe.all))},zd=(s,e,t)=>!s||!e||s===e||lr(s).some(r=>r&&(t?r===e:r.startsWith(e)||e.startsWith(r))),Yd=(s,e,t,r,n)=>n.isOnAll?!1:!t&&n.isOnTouch?!(e||s):(t?r.isOnBlur:n.isOnBlur)?!s:(t?r.isOnChange:n.isOnChange)?s:!0,Gd=(s,e)=>!rn(V(s,e)).length&&ve(s,e),Kd=(s,e,t)=>{const r=lr(V(s,t));return le(r,"root",e[t]),le(s,t,r),s},Pr=s=>ze(s);function Ci(s,e,t="validate"){if(Pr(s)||Array.isArray(s)&&s.every(Pr)||Fe(s)&&!s)return{type:t,message:Pr(s)?s:"",ref:e}}var Lt=s=>ye(s)&&!Dr(s)?s:{value:s,message:""},Ni=async(s,e,t,r,n,i)=>{const{ref:a,refs:o,required:l,maxLength:d,minLength:h,min:u,max:f,pattern:g,validate:y,name:b,valueAsNumber:j,mount:v}=s._f,p=V(t,b);if(!v||e.has(b))return{};const m=o?o[0]:a,w=L=>{n&&m.reportValidity&&(m.setCustomValidity(Fe(L)?"":L||""),m.reportValidity())},_={},S=an(a),k=mr(a),R=S||k,O=(j||nn(a))&&be(a.value)&&be(p)||Rr(a)&&a.value===""||p===""||Array.isArray(p)&&!p.length,B=$d.bind(null,b,r,_),I=(L,A,P,D=Ge.maxLength,Y=Ge.minLength)=>{const ce=L?A:P;_[b]={type:L?D:Y,message:ce,ref:a,...B(L?D:Y,ce)}};if(i?!Array.isArray(p)||!p.length:l&&(!R&&(O||Oe(p))||Fe(p)&&!p||k&&!Ba(o).isValid||S&&!Wa(o).isValid)){const{value:L,message:A}=Pr(l)?{value:!!l,message:l}:Lt(l);if(L&&(_[b]={type:Ge.required,message:A,ref:m,...B(Ge.required,A)},!r))return w(A),_}if(!O&&(!Oe(u)||!Oe(f))){let L,A;const P=Lt(f),D=Lt(u);if(!Oe(p)&&!isNaN(p)){const Y=a.valueAsNumber||p&&+p;Oe(P.value)||(L=Y>P.value),Oe(D.value)||(A=Y<D.value)}else{const Y=a.valueAsDate||new Date(p),ce=U=>new Date(new Date().toDateString()+" "+U),z=a.type=="time",N=a.type=="week";ze(P.value)&&p&&(L=z?ce(p)>ce(P.value):N?p>P.value:Y>new Date(P.value)),ze(D.value)&&p&&(A=z?ce(p)<ce(D.value):N?p<D.value:Y<new Date(D.value))}if((L||A)&&(I(!!L,P.message,D.message,Ge.max,Ge.min),!r))return w(_[b].message),_}if((d||h)&&!O&&(ze(p)||i&&Array.isArray(p))){const L=Lt(d),A=Lt(h),P=!Oe(L.value)&&p.length>+L.value,D=!Oe(A.value)&&p.length<+A.value;if((P||D)&&(I(P,L.message,A.message),!r))return w(_[b].message),_}if(g&&!O&&ze(p)){const{value:L,message:A}=Lt(g);if(Dr(L)&&!p.match(L)&&(_[b]={type:Ge.pattern,message:A,ref:a,...B(Ge.pattern,A)},!r))return w(A),_}if(y){if(Ue(y)){const L=await y(p,t),A=Ci(L,m);if(A&&(_[b]={...A,...B(Ge.validate,A.message)},!r))return w(A.message),_}else if(ye(y)){let L={};for(const A in y){if(!Ae(L)&&!r)break;const P=Ci(await y[A](p,t),m,A);P&&(L={...P,...B(A,P.message)},w(P.message),r&&(_[b]=L))}if(!Ae(L)&&(_[b]={ref:m,...L},!r))return _}}return w(!0),_};const Jd={mode:qe.onSubmit,reValidateMode:qe.onChange,shouldFocusError:!0};function Xd(s={}){let e={...Jd,...s},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ue(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},n=ye(e.defaultValues)||ye(e.values)?je(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:je(n),a={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,d=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let u={...h};const f={array:_i(),state:_i()},g=e.criteriaMode===qe.all,y=x=>E=>{clearTimeout(d),d=setTimeout(x,E)},b=async x=>{if(!e.disabled&&(h.isValid||u.isValid||x)){const E=e.resolver?Ae((await k()).errors):await O(r,!0);E!==t.isValid&&f.state.next({isValid:E})}},j=(x,E)=>{!e.disabled&&(h.isValidating||h.validatingFields||u.isValidating||u.validatingFields)&&((x||Array.from(o.mount)).forEach(T=>{T&&(E?le(t.validatingFields,T,E):ve(t.validatingFields,T))}),f.state.next({validatingFields:t.validatingFields,isValidating:!Ae(t.validatingFields)}))},v=(x,E=[],T,F,$=!0,M=!0)=>{if(F&&T&&!e.disabled){if(a.action=!0,M&&Array.isArray(V(r,x))){const W=T(V(r,x),F.argA,F.argB);$&&le(r,x,W)}if(M&&Array.isArray(V(t.errors,x))){const W=T(V(t.errors,x),F.argA,F.argB);$&&le(t.errors,x,W),Gd(t.errors,x)}if((h.touchedFields||u.touchedFields)&&M&&Array.isArray(V(t.touchedFields,x))){const W=T(V(t.touchedFields,x),F.argA,F.argB);$&&le(t.touchedFields,x,W)}(h.dirtyFields||u.dirtyFields)&&(t.dirtyFields=Zt(n,i)),f.state.next({name:x,isDirty:I(x,E),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else le(i,x,E)},p=(x,E)=>{le(t.errors,x,E),f.state.next({errors:t.errors})},m=x=>{t.errors=x,f.state.next({errors:t.errors,isValid:!1})},w=(x,E,T,F)=>{const $=V(r,x);if($){const M=V(i,x,be(T)?V(n,x):T);be(M)||F&&F.defaultChecked||E?le(i,x,E?M:ki($._f)):P(x,M),a.mount&&b()}},_=(x,E,T,F,$)=>{let M=!1,W=!1;const re={name:x};if(!e.disabled){if(!T||F){(h.isDirty||u.isDirty)&&(W=t.isDirty,t.isDirty=re.isDirty=I(),M=W!==re.isDirty);const ie=it(V(n,x),E);W=!!V(t.dirtyFields,x),ie?ve(t.dirtyFields,x):le(t.dirtyFields,x,!0),re.dirtyFields=t.dirtyFields,M=M||(h.dirtyFields||u.dirtyFields)&&W!==!ie}if(T){const ie=V(t.touchedFields,x);ie||(le(t.touchedFields,x,T),re.touchedFields=t.touchedFields,M=M||(h.touchedFields||u.touchedFields)&&ie!==T)}M&&$&&f.state.next(re)}return M?re:{}},S=(x,E,T,F)=>{const $=V(t.errors,x),M=(h.isValid||u.isValid)&&Fe(E)&&t.isValid!==E;if(e.delayError&&T?(l=y(()=>p(x,T)),l(e.delayError)):(clearTimeout(d),l=null,T?le(t.errors,x,T):ve(t.errors,x)),(T?!it($,T):$)||!Ae(F)||M){const W={...F,...M&&Fe(E)?{isValid:E}:{},errors:t.errors,name:x};t={...t,...W},f.state.next(W)}},k=async x=>{j(x,!0);const E=await e.resolver(i,e.context,Bd(x||o.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return j(x),E},R=async x=>{const{errors:E}=await k(x);if(x)for(const T of x){const F=V(E,T);F?le(t.errors,T,F):ve(t.errors,T)}else t.errors=E;return E},O=async(x,E,T={valid:!0})=>{for(const F in x){const $=x[F];if($){const{_f:M,...W}=$;if(M){const re=o.array.has(M.name),ie=$._f&&Vd($._f);ie&&h.validatingFields&&j([F],!0);const Re=await Ni($,o.disabled,i,g,e.shouldUseNativeValidation&&!E,re);if(ie&&h.validatingFields&&j([F]),Re[M.name]&&(T.valid=!1,E))break;!E&&(V(Re,M.name)?re?Kd(t.errors,Re,M.name):le(t.errors,M.name,Re[M.name]):ve(t.errors,M.name))}!Ae(W)&&await O(W,E,T)}}return T.valid},B=()=>{for(const x of o.unMount){const E=V(r,x);E&&(E._f.refs?E._f.refs.every(T=>!ws(T)):!ws(E._f.ref))&&xt(x)}o.unMount=new Set},I=(x,E)=>!e.disabled&&(x&&E&&le(i,x,E),!it(U(),n)),L=(x,E,T)=>Id(x,o,{...a.mount?i:be(E)?n:ze(x)?{[x]:E}:E},T,E),A=x=>rn(V(a.mount?i:n,x,e.shouldUnregister?V(n,x,[]):[])),P=(x,E,T={})=>{const F=V(r,x);let $=E;if(F){const M=F._f;M&&(!M.disabled&&le(i,x,Va(E,M)),$=Rr(M.ref)&&Oe(E)?"":E,qa(M.ref)?[...M.ref.options].forEach(W=>W.selected=$.includes(W.value)):M.refs?mr(M.ref)?M.refs.forEach(W=>{(!W.defaultChecked||!W.disabled)&&(Array.isArray($)?W.checked=!!$.find(re=>re===W.value):W.checked=$===W.value||!!$)}):M.refs.forEach(W=>W.checked=W.value===$):nn(M.ref)?M.ref.value="":(M.ref.value=$,M.ref.type||f.state.next({name:x,values:je(i)})))}(T.shouldDirty||T.shouldTouch)&&_(x,$,T.shouldTouch,T.shouldDirty,!0),T.shouldValidate&&N(x)},D=(x,E,T)=>{for(const F in E){if(!E.hasOwnProperty(F))return;const $=E[F],M=x+"."+F,W=V(r,M);(o.array.has(x)||ye($)||W&&!W._f)&&!yt($)?D(M,$,T):P(M,$,T)}},Y=(x,E,T={})=>{const F=V(r,x),$=o.array.has(x),M=je(E);le(i,x,M),$?(f.array.next({name:x,values:je(i)}),(h.isDirty||h.dirtyFields||u.isDirty||u.dirtyFields)&&T.shouldDirty&&f.state.next({name:x,dirtyFields:Zt(n,i),isDirty:I(x,M)})):F&&!F._f&&!Oe(M)?D(x,M,T):P(x,M,T),Oi(x,o)&&f.state.next({...t,name:x}),f.state.next({name:a.mount?x:void 0,values:je(i)})},ce=async x=>{a.mount=!0;const E=x.target;let T=E.name,F=!0;const $=V(r,T),M=ie=>{F=Number.isNaN(ie)||yt(ie)&&isNaN(ie.getTime())||it(ie,V(i,T,ie))},W=Si(e.mode),re=Si(e.reValidateMode);if($){let ie,Re;const yr=E.type?ki($._f):Cd(x),Ze=x.type===wi.BLUR||x.type===wi.FOCUS_OUT,uo=!Wd($._f)&&!e.resolver&&!V(t.errors,T)&&!$._f.deps||Yd(Ze,V(t.touchedFields,T),t.isSubmitted,re,W),Hr=Oi(T,o,Ze);le(i,T,yr),Ze?(!E||!E.readOnly)&&($._f.onBlur&&$._f.onBlur(x),l&&l(0)):$._f.onChange&&$._f.onChange(x);const zr=_(T,yr,Ze),ho=!Ae(zr)||Hr;if(!Ze&&f.state.next({name:T,type:x.type,values:je(i)}),uo)return(h.isValid||u.isValid)&&(e.mode==="onBlur"?Ze&&b():Ze||b()),ho&&f.state.next({name:T,...Hr?{}:zr});if(!Ze&&Hr&&f.state.next({...t}),e.resolver){const{errors:gn}=await k([T]);if(M(yr),F){const fo=Ti(t.errors,r,T),yn=Ti(gn,r,fo.name||T);ie=yn.error,T=yn.name,Re=Ae(gn)}}else j([T],!0),ie=(await Ni($,o.disabled,i,g,e.shouldUseNativeValidation))[T],j([T]),M(yr),F&&(ie?Re=!1:(h.isValid||u.isValid)&&(Re=await O(r,!0)));F&&($._f.deps&&N($._f.deps),S(T,Re,ie,zr))}},z=(x,E)=>{if(V(t.errors,E)&&x.focus)return x.focus(),1},N=async(x,E={})=>{let T,F;const $=lr(x);if(e.resolver){const M=await R(be(x)?x:$);T=Ae(M),F=x?!$.some(W=>V(M,W)):T}else x?(F=(await Promise.all($.map(async M=>{const W=V(r,M);return await O(W&&W._f?{[M]:W}:W)}))).every(Boolean),!(!F&&!t.isValid)&&b()):F=T=await O(r);return f.state.next({...!ze(x)||(h.isValid||u.isValid)&&T!==t.isValid?{}:{name:x},...e.resolver||!x?{isValid:T}:{},errors:t.errors}),E.shouldFocus&&!F&&cr(r,z,x?$:o.mount),F},U=x=>{const E={...a.mount?i:n};return be(x)?E:ze(x)?V(E,x):x.map(T=>V(E,T))},X=(x,E)=>({invalid:!!V((E||t).errors,x),isDirty:!!V((E||t).dirtyFields,x),error:V((E||t).errors,x),isValidating:!!V(t.validatingFields,x),isTouched:!!V((E||t).touchedFields,x)}),ne=x=>{x&&lr(x).forEach(E=>ve(t.errors,E)),f.state.next({errors:x?t.errors:{}})},Se=(x,E,T)=>{const F=(V(r,x,{_f:{}})._f||{}).ref,$=V(t.errors,x)||{},{ref:M,message:W,type:re,...ie}=$;le(t.errors,x,{...ie,...E,ref:F}),f.state.next({name:x,errors:t.errors,isValid:!1}),T&&T.shouldFocus&&F&&F.focus&&F.focus()},ct=(x,E)=>Ue(x)?f.state.subscribe({next:T=>"values"in T&&x(L(void 0,E),T)}):L(x,E,!0),_t=x=>f.state.subscribe({next:E=>{zd(x.name,E.name,x.exact)&&Hd(E,x.formState||h,co,x.reRenderRoot)&&x.callback({values:{...i},...t,...E,defaultValues:n})}}).unsubscribe,gr=x=>(a.mount=!0,u={...u,...x.formState},_t({...x,formState:u})),xt=(x,E={})=>{for(const T of x?lr(x):o.mount)o.mount.delete(T),o.array.delete(T),E.keepValue||(ve(r,T),ve(i,T)),!E.keepError&&ve(t.errors,T),!E.keepDirty&&ve(t.dirtyFields,T),!E.keepTouched&&ve(t.touchedFields,T),!E.keepIsValidating&&ve(t.validatingFields,T),!e.shouldUnregister&&!E.keepDefaultValue&&ve(n,T);f.state.next({values:je(i)}),f.state.next({...t,...E.keepDirty?{isDirty:I()}:{}}),!E.keepIsValid&&b()},Yt=({disabled:x,name:E})=>{(Fe(x)&&a.mount||x||o.disabled.has(E))&&(x?o.disabled.add(E):o.disabled.delete(E))},De=(x,E={})=>{let T=V(r,x);const F=Fe(E.disabled)||Fe(e.disabled);return le(r,x,{...T||{},_f:{...T&&T._f?T._f:{ref:{name:x}},name:x,mount:!0,...E}}),o.mount.add(x),T?Yt({disabled:Fe(E.disabled)?E.disabled:e.disabled,name:x}):w(x,!0,E.value),{...F?{disabled:E.disabled||e.disabled}:{},...e.progressive?{required:!!E.required,min:er(E.min),max:er(E.max),minLength:er(E.minLength),maxLength:er(E.maxLength),pattern:er(E.pattern)}:{},name:x,onChange:ce,onBlur:ce,ref:$=>{if($){De(x,E),T=V(r,x);const M=be($.value)&&$.querySelectorAll&&$.querySelectorAll("input,select,textarea")[0]||$,W=qd(M),re=T._f.refs||[];if(W?re.find(ie=>ie===M):M===T._f.ref)return;le(r,x,{_f:{...T._f,...W?{refs:[...re.filter(ws),M,...Array.isArray(V(n,x))?[{}]:[]],ref:{type:M.type,name:x}}:{ref:M}}}),w(x,!1,void 0,M)}else T=V(r,x,{}),T._f&&(T._f.mount=!1),(e.shouldUnregister||E.shouldUnregister)&&!(Ad(o.array,x)&&a.action)&&o.unMount.add(x)}}},ut=()=>e.shouldFocusError&&cr(r,z,o.mount),ao=x=>{Fe(x)&&(f.state.next({disabled:x}),cr(r,(E,T)=>{const F=V(r,T);F&&(E.disabled=F._f.disabled||x,Array.isArray(F._f.refs)&&F._f.refs.forEach($=>{$.disabled=F._f.disabled||x}))},0,!1))},hn=(x,E)=>async T=>{let F;T&&(T.preventDefault&&T.preventDefault(),T.persist&&T.persist());let $=je(i);if(f.state.next({isSubmitting:!0}),e.resolver){const{errors:M,values:W}=await k();t.errors=M,$=je(W)}else await O(r);if(o.disabled.size)for(const M of o.disabled)ve($,M);if(ve(t.errors,"root"),Ae(t.errors)){f.state.next({errors:{}});try{await x($,T)}catch(M){F=M}}else E&&await E({...t.errors},T),ut(),setTimeout(ut);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ae(t.errors)&&!F,submitCount:t.submitCount+1,errors:t.errors}),F)throw F},oo=(x,E={})=>{V(r,x)&&(be(E.defaultValue)?Y(x,je(V(n,x))):(Y(x,E.defaultValue),le(n,x,je(E.defaultValue))),E.keepTouched||ve(t.touchedFields,x),E.keepDirty||(ve(t.dirtyFields,x),t.isDirty=E.defaultValue?I(x,je(V(n,x))):I()),E.keepError||(ve(t.errors,x),h.isValid&&b()),f.state.next({...t}))},fn=(x,E={})=>{const T=x?je(x):n,F=je(T),$=Ae(x),M=$?n:F;if(E.keepDefaultValues||(n=T),!E.keepValues){if(E.keepDirtyValues){const W=new Set([...o.mount,...Object.keys(Zt(n,i))]);for(const re of Array.from(W))V(t.dirtyFields,re)?le(M,re,V(i,re)):Y(re,V(M,re))}else{if(tn&&be(x))for(const W of o.mount){const re=V(r,W);if(re&&re._f){const ie=Array.isArray(re._f.refs)?re._f.refs[0]:re._f.ref;if(Rr(ie)){const Re=ie.closest("form");if(Re){Re.reset();break}}}}if(E.keepFieldsRef)for(const W of o.mount)Y(W,V(M,W));else r={}}i=e.shouldUnregister?E.keepDefaultValues?je(n):{}:je(M),f.array.next({values:{...M}}),f.state.next({values:{...M}})}o={mount:E.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!h.isValid||!!E.keepIsValid||!!E.keepDirtyValues,a.watch=!!e.shouldUnregister,f.state.next({submitCount:E.keepSubmitCount?t.submitCount:0,isDirty:$?!1:E.keepDirty?t.isDirty:!!(E.keepDefaultValues&&!it(x,n)),isSubmitted:E.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:$?{}:E.keepDirtyValues?E.keepDefaultValues&&i?Zt(n,i):t.dirtyFields:E.keepDefaultValues&&x?Zt(n,x):E.keepDirty?t.dirtyFields:{},touchedFields:E.keepTouched?t.touchedFields:{},errors:E.keepErrors?t.errors:{},isSubmitSuccessful:E.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:n})},pn=(x,E)=>fn(Ue(x)?x(i):x,E),lo=(x,E={})=>{const T=V(r,x),F=T&&T._f;if(F){const $=F.refs?F.refs[0]:F.ref;$.focus&&($.focus(),E.shouldSelect&&Ue($.select)&&$.select())}},co=x=>{t={...t,...x}},mn={control:{register:De,unregister:xt,getFieldState:X,handleSubmit:hn,setError:Se,_subscribe:_t,_runSchema:k,_focusError:ut,_getWatch:L,_getDirty:I,_setValid:b,_setFieldArray:v,_setDisabledField:Yt,_setErrors:m,_getFieldArray:A,_reset:fn,_resetDefaultValues:()=>Ue(e.defaultValues)&&e.defaultValues().then(x=>{pn(x,e.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:B,_disableForm:ao,_subjects:f,_proxyFormState:h,get _fields(){return r},get _formValues(){return i},get _state(){return a},set _state(x){a=x},get _defaultValues(){return n},get _names(){return o},set _names(x){o=x},get _formState(){return t},get _options(){return e},set _options(x){e={...e,...x}}},subscribe:gr,trigger:N,register:De,handleSubmit:hn,watch:ct,setValue:Y,getValues:U,reset:pn,resetField:oo,clearErrors:ne,unregister:xt,setError:Se,setFocus:lo,getFieldState:X};return{...mn,formControl:mn}}function Ha(s={}){const e=Q.useRef(void 0),t=Q.useRef(void 0),[r,n]=Q.useState({isDirty:!1,isValidating:!1,isLoading:Ue(s.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1,isReady:!1,defaultValues:Ue(s.defaultValues)?void 0:s.defaultValues});if(!e.current)if(s.formControl)e.current={...s.formControl,formState:r},s.defaultValues&&!Ue(s.defaultValues)&&s.formControl.reset(s.defaultValues,s.resetOptions);else{const{formControl:a,...o}=Xd(s);e.current={...o,formState:r}}const i=e.current.control;return i._options=s,Md(()=>{const a=i._subscribe({formState:i._proxyFormState,callback:()=>n({...i._formState}),reRenderRoot:!0});return n(o=>({...o,isReady:!0})),i._formState.isReady=!0,a},[i]),Q.useEffect(()=>i._disableForm(s.disabled),[i,s.disabled]),Q.useEffect(()=>{s.mode&&(i._options.mode=s.mode),s.reValidateMode&&(i._options.reValidateMode=s.reValidateMode)},[i,s.mode,s.reValidateMode]),Q.useEffect(()=>{s.errors&&(i._setErrors(s.errors),i._focusError())},[i,s.errors]),Q.useEffect(()=>{s.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,s.shouldUnregister]),Q.useEffect(()=>{if(i._proxyFormState.isDirty){const a=i._getDirty();a!==r.isDirty&&i._subjects.state.next({isDirty:a})}},[i,r.isDirty]),Q.useEffect(()=>{s.values&&!it(s.values,t.current)?(i._reset(s.values,{keepFieldsRef:!0,...i._options.resetOptions}),t.current=s.values,n(a=>({...a}))):i._resetDefaultValues()},[i,s.values]),Q.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=Dd(r,i),e.current}var Qd=Da();const Ne=Vt(Qd);var Zd=["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl","isolated"];function $s(){return $s=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},$s.apply(this,arguments)}function eh(s,e){if(s==null)return{};var t={},r=Object.keys(s),n,i;for(i=0;i<r.length;i++)n=r[i],!(e.indexOf(n)>=0)&&(t[n]=s[n]);return t}function kr(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function th(s,e){s.prototype=Object.create(e.prototype),s.prototype.constructor=s,qs(s,e)}function qs(s,e){return qs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},qs(s,e)}var Wr=function(s){th(e,s);function e(){var r;return r=s.call(this)||this,r.handleExpired=r.handleExpired.bind(kr(r)),r.handleErrored=r.handleErrored.bind(kr(r)),r.handleChange=r.handleChange.bind(kr(r)),r.handleRecaptchaRef=r.handleRecaptchaRef.bind(kr(r)),r}var t=e.prototype;return t.getCaptchaFunction=function(n){return this.props.grecaptcha?this.props.grecaptcha.enterprise?this.props.grecaptcha.enterprise[n]:this.props.grecaptcha[n]:null},t.getValue=function(){var n=this.getCaptchaFunction("getResponse");return n&&this._widgetId!==void 0?n(this._widgetId):null},t.getWidgetId=function(){return this.props.grecaptcha&&this._widgetId!==void 0?this._widgetId:null},t.execute=function(){var n=this.getCaptchaFunction("execute");if(n&&this._widgetId!==void 0)return n(this._widgetId);this._executeRequested=!0},t.executeAsync=function(){var n=this;return new Promise(function(i,a){n.executionResolve=i,n.executionReject=a,n.execute()})},t.reset=function(){var n=this.getCaptchaFunction("reset");n&&this._widgetId!==void 0&&n(this._widgetId)},t.forceReset=function(){var n=this.getCaptchaFunction("reset");n&&n()},t.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.handleChange(null)},t.handleErrored=function(){this.props.onErrored&&this.props.onErrored(),this.executionReject&&(this.executionReject(),delete this.executionResolve,delete this.executionReject)},t.handleChange=function(n){this.props.onChange&&this.props.onChange(n),this.executionResolve&&(this.executionResolve(n),delete this.executionReject,delete this.executionResolve)},t.explicitRender=function(){var n=this.getCaptchaFunction("render");if(n&&this._widgetId===void 0){var i=document.createElement("div");this._widgetId=n(i,{sitekey:this.props.sitekey,callback:this.handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge,isolated:this.props.isolated}),this.captcha.appendChild(i)}this._executeRequested&&this.props.grecaptcha&&this._widgetId!==void 0&&(this._executeRequested=!1,this.execute())},t.componentDidMount=function(){this.explicitRender()},t.componentDidUpdate=function(){this.explicitRender()},t.handleRecaptchaRef=function(n){this.captcha=n},t.render=function(){var n=this.props;n.sitekey,n.onChange,n.theme,n.type,n.tabindex,n.onExpired,n.onErrored,n.size,n.stoken,n.grecaptcha,n.badge,n.hl,n.isolated;var i=eh(n,Zd);return C.createElement("div",$s({},i,{ref:this.handleRecaptchaRef}))},e}(C.Component);Wr.displayName="ReCAPTCHA";Wr.propTypes={sitekey:Ne.string.isRequired,onChange:Ne.func,grecaptcha:Ne.object,theme:Ne.oneOf(["dark","light"]),type:Ne.oneOf(["image","audio"]),tabindex:Ne.number,onExpired:Ne.func,onErrored:Ne.func,size:Ne.oneOf(["compact","normal","invisible"]),stoken:Ne.string,hl:Ne.string,badge:Ne.oneOf(["bottomright","bottomleft","inline"]),isolated:Ne.bool};Wr.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};var _s={exports:{}},te={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ai;function rh(){if(Ai)return te;Ai=1;var s=typeof Symbol=="function"&&Symbol.for,e=s?Symbol.for("react.element"):60103,t=s?Symbol.for("react.portal"):60106,r=s?Symbol.for("react.fragment"):60107,n=s?Symbol.for("react.strict_mode"):60108,i=s?Symbol.for("react.profiler"):60114,a=s?Symbol.for("react.provider"):60109,o=s?Symbol.for("react.context"):60110,l=s?Symbol.for("react.async_mode"):60111,d=s?Symbol.for("react.concurrent_mode"):60111,h=s?Symbol.for("react.forward_ref"):60112,u=s?Symbol.for("react.suspense"):60113,f=s?Symbol.for("react.suspense_list"):60120,g=s?Symbol.for("react.memo"):60115,y=s?Symbol.for("react.lazy"):60116,b=s?Symbol.for("react.block"):60121,j=s?Symbol.for("react.fundamental"):60117,v=s?Symbol.for("react.responder"):60118,p=s?Symbol.for("react.scope"):60119;function m(_){if(typeof _=="object"&&_!==null){var S=_.$$typeof;switch(S){case e:switch(_=_.type,_){case l:case d:case r:case i:case n:case u:return _;default:switch(_=_&&_.$$typeof,_){case o:case h:case y:case g:case a:return _;default:return S}}case t:return S}}}function w(_){return m(_)===d}return te.AsyncMode=l,te.ConcurrentMode=d,te.ContextConsumer=o,te.ContextProvider=a,te.Element=e,te.ForwardRef=h,te.Fragment=r,te.Lazy=y,te.Memo=g,te.Portal=t,te.Profiler=i,te.StrictMode=n,te.Suspense=u,te.isAsyncMode=function(_){return w(_)||m(_)===l},te.isConcurrentMode=w,te.isContextConsumer=function(_){return m(_)===o},te.isContextProvider=function(_){return m(_)===a},te.isElement=function(_){return typeof _=="object"&&_!==null&&_.$$typeof===e},te.isForwardRef=function(_){return m(_)===h},te.isFragment=function(_){return m(_)===r},te.isLazy=function(_){return m(_)===y},te.isMemo=function(_){return m(_)===g},te.isPortal=function(_){return m(_)===t},te.isProfiler=function(_){return m(_)===i},te.isStrictMode=function(_){return m(_)===n},te.isSuspense=function(_){return m(_)===u},te.isValidElementType=function(_){return typeof _=="string"||typeof _=="function"||_===r||_===d||_===i||_===n||_===u||_===f||typeof _=="object"&&_!==null&&(_.$$typeof===y||_.$$typeof===g||_.$$typeof===a||_.$$typeof===o||_.$$typeof===h||_.$$typeof===j||_.$$typeof===v||_.$$typeof===p||_.$$typeof===b)},te.typeOf=m,te}var Ri;function sh(){return Ri||(Ri=1,_s.exports=rh()),_s.exports}var xs,Li;function nh(){if(Li)return xs;Li=1;var s=sh(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},n={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[s.ForwardRef]=r,i[s.Memo]=n;function a(y){return s.isMemo(y)?n:i[y.$$typeof]||e}var o=Object.defineProperty,l=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,u=Object.getPrototypeOf,f=Object.prototype;function g(y,b,j){if(typeof b!="string"){if(f){var v=u(b);v&&v!==f&&g(y,v,j)}var p=l(b);d&&(p=p.concat(d(b)));for(var m=a(y),w=a(b),_=0;_<p.length;++_){var S=p[_];if(!t[S]&&!(j&&j[S])&&!(w&&w[S])&&!(m&&m[S])){var k=h(b,S);try{o(y,S,k)}catch{}}}}return y}return xs=g,xs}var ih=nh();const ah=Vt(ih);function Us(){return Us=Object.assign||function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},Us.apply(this,arguments)}function oh(s,e){if(s==null)return{};var t={},r=Object.keys(s),n,i;for(i=0;i<r.length;i++)n=r[i],!(e.indexOf(n)>=0)&&(t[n]=s[n]);return t}function lh(s,e){s.prototype=Object.create(e.prototype),s.prototype.constructor=s,s.__proto__=e}var Me={},ch=0;function uh(s,e){return e=e||{},function(r){var n=r.displayName||r.name||"Component",i=function(o){lh(l,o);function l(h,u){var f;return f=o.call(this,h,u)||this,f.state={},f.__scriptURL="",f}var d=l.prototype;return d.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+ch++),this.__scriptLoaderID},d.setupScriptURL=function(){return this.__scriptURL=typeof s=="function"?s():s,this.__scriptURL},d.asyncScriptLoaderHandleLoad=function(u){var f=this;this.setState(u,function(){return f.props.asyncScriptOnLoad&&f.props.asyncScriptOnLoad(f.state)})},d.asyncScriptLoaderTriggerOnScriptLoaded=function(){var u=Me[this.__scriptURL];if(!u||!u.loaded)throw new Error("Script is not loaded.");for(var f in u.observers)u.observers[f](u);delete window[e.callbackName]},d.componentDidMount=function(){var u=this,f=this.setupScriptURL(),g=this.asyncScriptLoaderGetScriptLoaderID(),y=e,b=y.globalName,j=y.callbackName,v=y.scriptId;if(b&&typeof window[b]<"u"&&(Me[f]={loaded:!0,observers:{}}),Me[f]){var p=Me[f];if(p&&(p.loaded||p.errored)){this.asyncScriptLoaderHandleLoad(p);return}p.observers[g]=function(k){return u.asyncScriptLoaderHandleLoad(k)};return}var m={};m[g]=function(k){return u.asyncScriptLoaderHandleLoad(k)},Me[f]={loaded:!1,observers:m};var w=document.createElement("script");w.src=f,w.async=!0;for(var _ in e.attributes)w.setAttribute(_,e.attributes[_]);v&&(w.id=v);var S=function(R){if(Me[f]){var O=Me[f],B=O.observers;for(var I in B)R(B[I])&&delete B[I]}};j&&typeof window<"u"&&(window[j]=function(){return u.asyncScriptLoaderTriggerOnScriptLoaded()}),w.onload=function(){var k=Me[f];k&&(k.loaded=!0,S(function(R){return j?!1:(R(k),!0)}))},w.onerror=function(){var k=Me[f];k&&(k.errored=!0,S(function(R){return R(k),!0}))},document.body.appendChild(w)},d.componentWillUnmount=function(){var u=this.__scriptURL;if(e.removeOnUnmount===!0)for(var f=document.getElementsByTagName("script"),g=0;g<f.length;g+=1)f[g].src.indexOf(u)>-1&&f[g].parentNode&&f[g].parentNode.removeChild(f[g]);var y=Me[u];y&&(delete y.observers[this.asyncScriptLoaderGetScriptLoaderID()],e.removeOnUnmount===!0&&delete Me[u])},d.render=function(){var u=e.globalName,f=this.props;f.asyncScriptOnLoad;var g=f.forwardedRef,y=oh(f,["asyncScriptOnLoad","forwardedRef"]);return u&&typeof window<"u"&&(y[u]=typeof window[u]<"u"?window[u]:void 0),y.ref=g,C.createElement(r,y)},l}(C.Component),a=C.forwardRef(function(o,l){return C.createElement(i,Us({},o,{forwardedRef:l}))});return a.displayName="AsyncScriptLoader("+n+")",a.propTypes={asyncScriptOnLoad:Ne.func},ah(a,r)}}var Fs="onloadcallback",dh="grecaptcha";function Bs(){return typeof window<"u"&&window.recaptchaOptions||{}}function hh(){var s=Bs(),e=s.useRecaptchaNet?"recaptcha.net":"www.google.com";return s.enterprise?"https://"+e+"/recaptcha/enterprise.js?onload="+Fs+"&render=explicit":"https://"+e+"/recaptcha/api.js?onload="+Fs+"&render=explicit"}const za=uh(hh,{callbackName:Fs,globalName:dh,attributes:Bs().nonce?{nonce:Bs().nonce}:{}})(Wr),fh=()=>{const[s,e]=C.useState(!1),[t,r]=C.useState(!1),[n,i]=C.useState(null),{handleError:a,handleSuccess:o}=Z(),{register:l,handleSubmit:d,reset:h,formState:{errors:u}}=Ha(),f=async y=>{if(!n){a("Veuillez confirmer que vous n'êtes pas un robot");return}e(!0);try{const{error:b}=await H.from("contact_messages").insert([{name:y.name,email:y.email,subject:y.subject,message:y.message,status:"new"}]);if(b)throw b;r(!0),h(),i(null),o("Votre message a été envoyé avec succès !")}catch(b){a(b,"Erreur lors de l'envoi du message")}finally{e(!1)}},g=y=>{i(y)};return c.jsx("div",{className:"bg-primary-900 rounded-xl p-6 md:p-8",children:t?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("svg",{className:"mx-auto h-12 w-12 text-accent-500 mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsx("h3",{className:"text-xl font-bold mb-2",children:"Message envoyé !"}),c.jsx("p",{className:"text-gray-400 mb-6",children:"Merci de nous avoir contacté. Nous vous répondrons dans les plus brefs délais."}),c.jsx("button",{className:"bg-accent-600 hover:bg-accent-700 text-white font-medium py-2 px-6 rounded-lg transition-colors",onClick:()=>r(!1),children:"Envoyer un autre message"})]}):c.jsxs("form",{onSubmit:d(f),className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-300 mb-1",children:"Nom"}),c.jsx("input",{type:"text",id:"name",className:`w-full px-4 py-2.5 bg-primary-800 border ${u.name?"border-red-500":"border-primary-700"} rounded-lg focus:outline-none focus:ring-2 focus:ring-accent-500 text-white`,placeholder:"Votre nom",...l("name",{required:"Le nom est requis"})}),u.name&&c.jsx("p",{className:"mt-1 text-sm text-red-500",children:u.name.message})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),c.jsx("input",{type:"email",id:"email",className:`w-full px-4 py-2.5 bg-primary-800 border ${u.email?"border-red-500":"border-primary-700"} rounded-lg focus:outline-none focus:ring-2 focus:ring-accent-500 text-white`,placeholder:"votre@email.com",...l("email",{required:"L'email est requis",pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"Email invalide"}})}),u.email&&c.jsx("p",{className:"mt-1 text-sm text-red-500",children:u.email.message})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-300 mb-1",children:"Sujet"}),c.jsx("input",{type:"text",id:"subject",className:`w-full px-4 py-2.5 bg-primary-800 border ${u.subject?"border-red-500":"border-primary-700"} rounded-lg focus:outline-none focus:ring-2 focus:ring-accent-500 text-white`,placeholder:"Sujet de votre message",...l("subject",{required:"Le sujet est requis"})}),u.subject&&c.jsx("p",{className:"mt-1 text-sm text-red-500",children:u.subject.message})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-300 mb-1",children:"Message"}),c.jsx("textarea",{id:"message",rows:5,className:`w-full px-4 py-2.5 bg-primary-800 border ${u.message?"border-red-500":"border-primary-700"} rounded-lg focus:outline-none focus:ring-2 focus:ring-accent-500 text-white resize-none`,placeholder:"Votre message",...l("message",{required:"Le message est requis",minLength:{value:10,message:"Le message doit contenir au moins 10 caractères"}})}),u.message&&c.jsx("p",{className:"mt-1 text-sm text-red-500",children:u.message.message})]}),c.jsx("div",{children:c.jsx(za,{sitekey:"6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI",onChange:g,theme:"dark"})}),c.jsx("button",{type:"submit",disabled:s,className:`w-full py-3 px-4 rounded-lg font-medium transition-all ${s?"bg-accent-700 cursor-not-allowed":"bg-accent-600 hover:bg-accent-700 hover:shadow-[0_0_15px_rgba(185,158,119,0.3)]"} text-white`,children:s?"Envoi en cours...":"Envoyer"})]})})},ph=()=>{const s=e=>{switch(e){case"instagram":return c.jsx(Hi,{className:"h-6 w-6"});case"youtube":return c.jsx(Qi,{className:"h-6 w-6"});case"music":return c.jsx(Yi,{className:"h-6 w-6"});case"video":return c.jsx(Ys,{className:"h-6 w-6"});default:return null}};return c.jsx("div",{className:"pt-24 pb-20 bg-black",children:c.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[c.jsxs(K.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-16 text-center",children:[c.jsx("h1",{className:"text-4xl md:text-5xl font-heading font-bold mb-4 gold-gradient",children:"Contact"}),c.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Une question, un projet ou une idée de collaboration ? N'hésitez pas à nous contacter, nous vous répondrons dans les plus brefs délais."})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[c.jsxs(K.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.6},children:[c.jsx("h2",{className:"text-2xl font-heading font-bold mb-6 gold-gradient",children:"Envoyez-nous un message"}),c.jsx(fh,{})]}),c.jsxs(K.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{duration:.6},className:"lg:pl-10",children:[c.jsx("h2",{className:"text-2xl font-heading font-bold mb-6 gold-gradient",children:"Informations de contact"}),c.jsx("div",{className:"bg-primary-900 rounded-xl p-6 md:p-8 mb-8",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Contact"}),c.jsx("p",{className:"text-gray-400 mb-1",children:"blackroadmusic@hotmail.com"})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Réseaux Sociaux"}),c.jsx("div",{className:"flex flex-wrap gap-4",children:xa.map(e=>c.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"bg-primary-800 p-2.5 rounded-full text-white hover:bg-accent-700 transition-colors","aria-label":e.platform,children:s(e.icon)},e.id))})]})]})})]})]})]})})},mh=()=>c.jsx("div",{className:"pt-24 pb-20 bg-black",children:c.jsx("div",{className:"container mx-auto px-4 md:px-6",children:c.jsxs(K.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"prose prose-invert max-w-4xl mx-auto",children:[c.jsx("h1",{className:"text-4xl font-heading font-bold mb-8 gold-gradient",children:"Politique de Confidentialité"}),c.jsxs("p",{className:"text-gray-300 mb-8",children:["Dernière mise à jour : ",new Date().toLocaleDateString("fr-FR")]}),c.jsxs("section",{className:"mb-12",children:[c.jsx("h2",{className:"text-2xl font-heading font-bold mb-4 gold-gradient",children:"1. Collecte des Informations"}),c.jsx("p",{className:"text-gray-300 mb-4",children:"Black Road Music collecte les informations suivantes lorsque vous utilisez notre site web :"}),c.jsxs("ul",{className:"list-disc pl-6 text-gray-300 space-y-2",children:[c.jsx("li",{children:"Nom et prénom"}),c.jsx("li",{children:"Adresse e-mail"}),c.jsx("li",{children:"Messages envoyés via le formulaire de contact"}),c.jsx("li",{children:"Données de navigation (cookies)"})]})]}),c.jsxs("section",{className:"mb-12",children:[c.jsx("h2",{className:"text-2xl font-heading font-bold mb-4 gold-gradient",children:"2. Utilisation des Informations"}),c.jsx("p",{className:"text-gray-300 mb-4",children:"Les informations collectées sont utilisées pour :"}),c.jsxs("ul",{className:"list-disc pl-6 text-gray-300 space-y-2",children:[c.jsx("li",{children:"Répondre à vos demandes de contact"}),c.jsx("li",{children:"Améliorer notre site web et nos services"}),c.jsx("li",{children:"Vous informer sur nos actualités et offres (avec votre consentement)"}),c.jsx("li",{children:"Assurer la sécurité de notre site"})]})]}),c.jsxs("section",{className:"mb-12",children:[c.jsx("h2",{className:"text-2xl font-heading font-bold mb-4 gold-gradient",children:"3. Protection des Données"}),c.jsx("p",{className:"text-gray-300 mb-4",children:"Nous mettons en œuvre des mesures de sécurité pour protéger vos informations :"}),c.jsxs("ul",{className:"list-disc pl-6 text-gray-300 space-y-2",children:[c.jsx("li",{children:"Utilisation du protocole HTTPS"}),c.jsx("li",{children:"Protection contre les attaques par force brute"}),c.jsx("li",{children:"Accès restreint aux données personnelles"}),c.jsx("li",{children:"Mise à jour régulière de nos systèmes de sécurité"})]})]}),c.jsxs("section",{className:"mb-12",children:[c.jsx("h2",{className:"text-2xl font-heading font-bold mb-4 gold-gradient",children:"4. Vos Droits"}),c.jsx("p",{className:"text-gray-300 mb-4",children:"Conformément au RGPD, vous disposez des droits suivants :"}),c.jsxs("ul",{className:"list-disc pl-6 text-gray-300 space-y-2",children:[c.jsx("li",{children:"Droit d'accès à vos données"}),c.jsx("li",{children:"Droit de rectification"}),c.jsx("li",{children:"Droit à l'effacement"}),c.jsx("li",{children:"Droit à la limitation du traitement"}),c.jsx("li",{children:"Droit à la portabilité des données"}),c.jsx("li",{children:"Droit d'opposition"})]})]}),c.jsxs("section",{className:"mb-12",children:[c.jsx("h2",{className:"text-2xl font-heading font-bold mb-4 gold-gradient",children:"5. Cookies"}),c.jsx("p",{className:"text-gray-300 mb-4",children:"Notre site utilise des cookies pour améliorer votre expérience. Vous pouvez les désactiver dans les paramètres de votre navigateur."})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-heading font-bold mb-4 gold-gradient",children:"6. Contact"}),c.jsxs("p",{className:"text-gray-300",children:["Pour toute question concernant notre politique de confidentialité, contactez-nous à :",c.jsx("br",{}),"Email : blackroadmusic@hotmail.com",c.jsx("br",{})]})]})]})})}),gh=()=>c.jsx("div",{className:"pt-24 pb-20 bg-black",children:c.jsx("div",{className:"container mx-auto px-4 md:px-6",children:c.jsxs(K.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"prose prose-invert max-w-4xl mx-auto",children:[c.jsx("h1",{className:"text-4xl font-heading font-bold mb-8 gold-gradient",children:"Mentions Légales"}),c.jsxs("section",{className:"mb-12",children:[c.jsx("h2",{className:"text-2xl font-heading font-bold mb-4 gold-gradient",children:"1. Informations Légales"}),c.jsx("p",{className:"text-gray-300 mb-4",children:"Le site blackroadmusic.com est édité par :"}),c.jsx("div",{className:"text-gray-300 mb-6",children:c.jsx("p",{children:"Black Road Music"})}),c.jsxs("p",{className:"text-gray-300",children:["Directeur de la publication : KAAZTHENOVA",c.jsx("br",{}),"Email : blackroadmusic@hotmail.com",c.jsx("br",{})]})]}),c.jsxs("section",{className:"mb-12",children:[c.jsx("h2",{className:"text-2xl font-heading font-bold mb-4 gold-gradient",children:"2. Hébergement"}),c.jsxs("p",{className:"text-gray-300",children:["Le site est hébergé par :",c.jsx("br",{}),"[Vercel]",c.jsx("br",{})]})]}),c.jsxs("section",{className:"mb-12",children:[c.jsx("h2",{className:"text-2xl font-heading font-bold mb-4 gold-gradient",children:"3. Propriété Intellectuelle"}),c.jsx("p",{className:"text-gray-300 mb-4",children:"L'ensemble du contenu de ce site (textes, images, vidéos, logos, etc.) est protégé par le droit d'auteur et est la propriété exclusive de Black Road Music SARL."}),c.jsx("p",{className:"text-gray-300",children:"Toute reproduction, représentation, modification, publication, transmission, ou plus généralement toute exploitation non autorisée du site et de son contenu est strictement interdite."})]}),c.jsxs("section",{className:"mb-12",children:[c.jsx("h2",{className:"text-2xl font-heading font-bold mb-4 gold-gradient",children:"4. Données Personnelles"}),c.jsxs("p",{className:"text-gray-300",children:["Les informations concernant la collecte et le traitement des données personnelles sont détaillées dans notre ",c.jsx("a",{href:"/politique-de-confidentialite",className:"text-accent-400 hover:text-accent-300",children:"Politique de Confidentialité"}),"."]})]}),c.jsxs("section",{className:"mb-12",children:[c.jsx("h2",{className:"text-2xl font-heading font-bold mb-4 gold-gradient",children:"5. Cookies"}),c.jsxs("p",{className:"text-gray-300",children:["Le site utilise des cookies pour améliorer l'expérience utilisateur. Pour plus d'informations, consultez notre ",c.jsx("a",{href:"/politique-de-confidentialite#cookies",className:"text-accent-400 hover:text-accent-300",children:"Politique de Cookies"}),"."]})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-heading font-bold mb-4 gold-gradient",children:"6. Droit Applicable"}),c.jsx("p",{className:"text-gray-300",children:"Les présentes mentions légales sont régies par le droit français. En cas de litige, les tribunaux français seront seuls compétents."})]})]})})}),yh=dr((s,e)=>({bookings:[],messages:[],isLoading:!1,pagination:{page:1,pageSize:10,total:0},setPagination:t=>{s(r=>({pagination:{...r.pagination,...t}}))},fetchBookings:async()=>{s({isLoading:!0}),await Le.withErrorHandling(async()=>{const{pagination:t}=e(),r=(t.page-1)*t.pageSize,n=r+t.pageSize-1,{data:i,error:a,count:o}=await H.from("studio_bookings").select("*",{count:"exact"}).order("created_at",{ascending:!1}).range(r,n);if(a)throw a;s({bookings:i||[],pagination:{...e().pagination,total:o||0}})},"Erreur lors du chargement des réservations"),s({isLoading:!1})},fetchMessages:async()=>{s({isLoading:!0}),await Le.withErrorHandling(async()=>{const{data:t,error:r,count:n}=await H.from("contact_messages").select("*",{count:"exact"}).order("created_at",{ascending:!1});if(r)throw r;s({messages:t||[],pagination:{...e().pagination,total:n||0}})},"Erreur lors du chargement des messages"),s({isLoading:!1})},updateBookingStatus:async(t,r)=>{await Le.withErrorHandling(async()=>{const{error:n}=await H.from("studio_bookings").update({status:r}).eq("id",t);if(n)throw n;await e().fetchBookings(),Z.getState().handleSuccess("Statut de réservation mis à jour")},"Erreur mise à jour réservation")},deleteBooking:async t=>{await Le.withErrorHandling(async()=>{const{error:r}=await H.from("studio_bookings").delete().eq("id",t);if(r)throw r;await e().fetchBookings(),Z.getState().handleSuccess("Réservation supprimée")},"Erreur lors de la suppression de la réservation")},updateMessageStatus:async(t,r)=>{await Le.withErrorHandling(async()=>{const{error:n}=await H.from("contact_messages").update({status:r}).eq("id",t);if(n)throw n;await e().fetchMessages(),Z.getState().handleSuccess("Statut du message mis à jour")},"Erreur mise à jour message")},deleteMessage:async t=>{await Le.withErrorHandling(async()=>{const{error:r}=await H.from("contact_messages").delete().eq("id",t);if(r)throw r;await e().fetchMessages(),Z.getState().handleSuccess("Message supprimé")},"Erreur lors de la suppression du message")}})),vh=[{id:"music",name:"Industrie Musicale",criteria:{industry:["music","entertainment"],project_type:["album_cover","music_video","concert_poster"]},email_frequency:7,conversion_rate:.15},{id:"advertising",name:"Publicité & Marketing",criteria:{industry:["advertising","marketing"],project_type:["campaign","branding","social_media"]},email_frequency:5,conversion_rate:.2},{id:"luxury",name:"Marques de Luxe",criteria:{industry:["luxury","fashion"],budget_range:"high",project_type:["product_photography","brand_identity"]},email_frequency:10,conversion_rate:.25},{id:"sports",name:"Sport & Fitness",criteria:{industry:["sports","fitness"],project_type:["event_coverage","athlete_portraits"]},email_frequency:7,conversion_rate:.18}],bh={open:5,click:10,reply:20},wh=dr((s,e)=>({prospects:[],segments:vh,metrics:{total_prospects:0,conversion_rate:0,avg_response_time:0,pipeline_value:0,monthly_growth:0},loading:!1,loadProspects:async()=>{s({loading:!0}),await Le.withErrorHandling(async()=>{const{data:t,error:r}=await H.from("prospects").select("*").order("created_at",{ascending:!1});if(r)throw r;s({prospects:t||[],loading:!1})},"Erreur lors du chargement des prospects"),s({loading:!1})},saveProspect:async t=>{await Le.withErrorHandling(async()=>{const r=new Date().toISOString(),n=t.id?{...t,updated_at:r}:{...t,created_at:r,updated_at:r},{data:i,error:a}=t.id?await H.from("prospects").update(n).eq("id",t.id).select().single():await H.from("prospects").insert([n]).select().single();if(a)throw a;s(o=>({prospects:t.id?o.prospects.map(l=>l.id===t.id?i:l):[i,...o.prospects]})),Z.getState().handleSuccess(t.id?"Prospect mis à jour":"Prospect créé")},t.id?"Erreur lors de la mise à jour du prospect":"Erreur lors de la création du prospect")},deleteProspect:async t=>{await Le.withErrorHandling(async()=>{const{error:r}=await H.from("prospects").delete().eq("id",t);if(r)throw r;s(n=>({prospects:n.prospects.filter(i=>i.id!==t)})),Z.getState().handleSuccess("Prospect supprimé avec succès")},"Erreur lors de la suppression du prospect")},calculateDetailedLeadScore:async t=>{var o,l,d;const r=e().prospects.find(h=>h.id===t);if(!r)throw new Error("Prospect non trouvé");const n={engagement:(r.engagement_score||0)*2,company_fit:(o=r.segment_targeting)!=null&&o.length?20:5,budget_potential:((d=(l=r.enriched_data)==null?void 0:l.company_info)==null?void 0:d.size)==="large"?25:10,urgency:r.status==="interested"?20:10,response_history:r.last_contact_date?15:0},i=Object.values(n).reduce((h,u)=>h+u,0),a={total:Math.min(i,100),factors:n,last_calculated:new Date().toISOString()};return await e().saveProspect({id:t,lead_score:a.total}),a},updateProspectSegment:async(t,r)=>{if(!e().segments.find(i=>i.id===r))throw new Error("Segment non trouvé");await e().saveProspect({id:t,segment_targeting:[r]})},scheduleFollowUp:async(t,r,n)=>{await e().saveProspect({id:t,next_follow_up:r,notes:`Suivi programmé: ${n} le ${new Date(r).toLocaleDateString("fr-FR")}`})},getProspectsBySegment:t=>e().prospects.filter(r=>{var n;return(n=r.segment_targeting)==null?void 0:n.includes(t)}),getHighValueProspects:(t=70)=>e().prospects.filter(r=>(r.lead_score||0)>=t),loadMetrics:async()=>{await Le.withErrorHandling(async()=>{const t=e().prospects,r=t.length,n=t.filter(g=>(g.lead_score||0)>=60).length,i=t.filter(g=>g.status==="closed_won").length,a=r>0?i/r:0,o=new Date;o.setMonth(o.getMonth()-1);const l=t.filter(g=>new Date(g.created_at)>o).length,d=r>0?l/r:0,h={advertising:t.filter(g=>{var y,b,j,v;return((j=(b=(y=g.enriched_data)==null?void 0:y.company_info)==null?void 0:b.industry)==null?void 0:j.includes("advertising"))||((v=g.segment_targeting)==null?void 0:v.includes("advertising"))}).length,music:t.filter(g=>{var y,b,j,v;return((j=(b=(y=g.enriched_data)==null?void 0:y.company_info)==null?void 0:b.industry)==null?void 0:j.includes("music"))||((v=g.segment_targeting)==null?void 0:v.includes("music"))}).length,luxury:t.filter(g=>{var y,b,j,v;return((j=(b=(y=g.enriched_data)==null?void 0:y.company_info)==null?void 0:b.industry)==null?void 0:j.includes("luxury"))||((v=g.segment_targeting)==null?void 0:v.includes("luxury"))}).length,sports:t.filter(g=>{var y,b,j,v;return((j=(b=(y=g.enriched_data)==null?void 0:y.company_info)==null?void 0:b.industry)==null?void 0:j.includes("sports"))||((v=g.segment_targeting)==null?void 0:v.includes("sports"))}).length},u=t.reduce((g,y)=>{var w;const b=y.lead_score||0,j=((w=y.segment_targeting)==null?void 0:w[0])||"general",v={music:1,advertising:1.5,luxury:2,sports:1.2,general:.8},p=5e3,m=v[j]||.8;return g+p*m*(b/100)},0),f=t.filter(g=>g.last_contact_date&&g.created_at).reduce((g,y,b,j)=>{const v=new Date(y.created_at).getTime(),m=(new Date(y.last_contact_date).getTime()-v)/(1e3*60*60);return g+m/j.length},0)||24;s({metrics:{total_prospects:r,conversion_rate:a,avg_response_time:Math.round(f),pipeline_value:Math.round(u),monthly_growth:d,segment_breakdown:h,qualified_prospects:n}})},"Erreur lors du chargement des métriques")},enrichProspectData:async t=>{var a,o,l,d,h,u,f,g;const{data:r,error:n}=await H.from("prospects").select("*").eq("id",t).single();if(n||!r)throw new Error("Prospect non trouvé");const i={company_info:{size:((o=(a=r.enriched_data)==null?void 0:a.company_info)==null?void 0:o.size)||"unknown",industry:((d=(l=r.enriched_data)==null?void 0:l.company_info)==null?void 0:d.industry)||"unknown",location:((u=(h=r.enriched_data)==null?void 0:h.company_info)==null?void 0:u.location)||"France",website:r.website||((g=(f=r.enriched_data)==null?void 0:f.company_info)==null?void 0:g.website)},contact_info:{role:r.position||"Contact",seniority_level:"unknown",decision_maker:(r.lead_score||0)>70}};return await e().saveProspect({id:t,enriched_data:i}),i},bulkUpdateStatus:async(t,r)=>{await Le.withErrorHandling(async()=>{const{error:n}=await H.from("prospects").update({status:r,updated_at:new Date().toISOString()}).in("id",t);if(n)throw n;s(i=>({prospects:i.prospects.map(a=>t.includes(a.id)?{...a,status:r}:a)})),Z.getState().handleSuccess(`${t.length} prospects mis à jour`)},"Erreur lors de la mise à jour en lot des prospects")},getOptimalContactTime:async t=>{var a;const r=e().prospects.find(o=>o.id===t);if(!r)throw new Error("Prospect non trouvé");const n=(a=r.segment_targeting)==null?void 0:a[0];return{music:"14:00",luxury:"10:00",sports:"16:00",advertising:"11:00"}[n]||"10:00"},trackEmailEngagement:async(t,r)=>{const n=e().prospects.find(l=>l.id===t);if(!n)return;const i=n.engagement_score||0,a=bh[r],o=Math.min(i+a,100);await e().saveProspect({id:t,engagement_score:o,last_contact_date:new Date().toISOString()})},importProspectsFromApi:async t=>await Le.withErrorHandling(async()=>{const{ProspectApiService:n}=await oe(async()=>{const{ProspectApiService:o}=await import("./prospectApiService-DuRKMtOj.js");return{ProspectApiService:o}},__vite__mapDeps([15,1,16])),a=(await n.fetchProspects({limit:t.limit||50,quickFilters:{industry:t.industry||void 0,location:t.location||void 0,companySize:t.companySize||void 0},keywords:t.keywords?t.keywords.split(",").map(o=>o.trim()):void 0})).filter(o=>e().validateProspectData(o));for(const o of a){const l={email:o.email,first_name:o.first_name,last_name:o.last_name,company_name:o.company_name,position:o.position,source:"api_import",status:"new",lead_score:o.lead_score||0};await e().saveProspect(l)}return await e().loadProspects(),a},"Erreur lors de l'import automatisé")||[],validateProspectData:t=>!!(t.email&&t.email.includes("@")&&t.company_name&&t.first_name),getApiUsageStats:async()=>{var r;const{data:t}=await H.from("api_usage_logs").select("*").gte("created_at",new Date(Date.now()-2592e6).toISOString());return{monthlyUsage:(t==null?void 0:t.length)||0,remainingQuota:95-((t==null?void 0:t.length)||0),lastImport:(r=t==null?void 0:t[0])==null?void 0:r.created_at}},scheduleAutoImport:async(t,r)=>{console.log("Auto import scheduled:",{criteria:t,frequency:r})}})),_h=C.lazy(()=>oe(()=>import("./BookingsList-BnjMB-eg.js"),__vite__mapDeps([17,1,18,19,20,16,21,22,23]))),xh=C.lazy(()=>oe(()=>import("./MessagesList-DCUVLqI-.js"),__vite__mapDeps([24,1,18,19,20,16,21,25,26]))),jh=C.lazy(()=>oe(()=>import("./ProjectsAdmin-CGxM5iYL.js"),__vite__mapDeps([27,1,20,16,21,28,29,26,30,22]))),Eh=C.lazy(()=>oe(()=>import("./ArtistsAdmin-BOzZydhh.js"),__vite__mapDeps([31,1,20,16,21,28,29,30]))),kh=C.lazy(()=>oe(()=>import("./ServicesAdmin-DGmY20Xb.js"),__vite__mapDeps([32,1,20,16,21,28,29]))),Sh=C.lazy(()=>oe(()=>import("./ProspectionDashboard-dL8jucQG.js"),__vite__mapDeps([33,1,29,21,19,26,25,23,15,16]))),Ph=()=>c.jsxs("div",{className:"flex items-center justify-center py-12",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),c.jsx("span",{className:"ml-3 text-gray-300",children:"Chargement..."})]}),Oh=()=>{const s=qr(),{fetchBookings:e,fetchMessages:t}=yh(),{fetchProjects:r,fetchArtists:n,fetchServices:i}=Ht(),{loadProspects:a}=wh(),[o,l]=C.useState(!1);if(C.useEffect(()=>{const u=s.pathname;u.includes("/bookings")?e():u.includes("/messages")?t():u.includes("/projects")?r():u.includes("/artists")?n():u.includes("/services")?i():u.includes("/prospection")?a():e()},[s.pathname,e,t,r,n,i,a]),s.pathname==="/backstage")return c.jsx(zs,{to:"/backstage/bookings",replace:!0});const d=[{path:"/backstage/bookings",label:"Réservations",icon:Wi},{path:"/backstage/messages",label:"Messages",icon:Do},{path:"/backstage/projects",label:"Projets",icon:Ao},{path:"/backstage/artists",label:"Artistes",icon:Ji},{path:"/backstage/services",label:"Services",icon:Ki},{path:"/backstage/prospection",label:"Prospection",icon:qo}],h=()=>{const u=d.find(f=>f.path===s.pathname||f.path==="/backstage/prospection"&&s.pathname.startsWith("/backstage/prospection"));return u?u.label:"Dashboard"};return c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900",children:[c.jsxs("header",{className:"fixed top-16 left-0 right-0 z-50 bg-black/95 backdrop-blur-sm border-b border-gray-800",children:[c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"flex items-center justify-between h-16",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white",children:h()})}),c.jsx("button",{onClick:()=>l(!o),className:"md:hidden p-2 rounded-md text-gray-300 hover:text-white hover:bg-gray-700 transition-colors","aria-label":"Toggle mobile menu",children:o?c.jsx(Xi,{className:"w-6 h-6"}):c.jsx(zi,{className:"w-6 h-6"})})]}),c.jsx("nav",{className:"hidden md:block border-t border-gray-700",children:c.jsx("div",{className:"flex space-x-8 py-4",children:d.map(u=>{const f=u.icon,g=u.path===s.pathname||u.path==="/backstage/prospection"&&s.pathname.startsWith("/backstage/prospection");return c.jsxs(fe,{to:u.path,className:`flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ${g?"bg-blue-600 text-white":"text-gray-300 hover:text-white hover:bg-gray-700"}`,children:[c.jsx(f,{className:"w-5 h-5"}),c.jsx("span",{children:u.label})]},u.path)})})})]}),o&&c.jsx("div",{className:"md:hidden border-t border-gray-700",children:c.jsx("div",{className:"px-2 pt-2 pb-3 space-y-1",children:d.map(u=>{const f=u.icon,g=u.path===s.pathname||u.path==="/backstage/prospection"&&s.pathname.startsWith("/backstage/prospection");return c.jsxs(fe,{to:u.path,onClick:()=>l(!1),className:`flex items-center space-x-3 px-3 py-2 rounded-md text-base font-medium transition-colors ${g?"bg-blue-600 text-white":"text-gray-300 hover:text-white hover:bg-gray-700"}`,children:[c.jsx(f,{className:"w-6 h-6"}),c.jsx("span",{children:u.label})]},u.path)})})})]}),c.jsx("main",{className:`transition-all duration-300 ${o?"pt-80":"pt-32 md:pt-40"}`,children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsx("div",{className:"bg-white/5 backdrop-blur-sm rounded-lg shadow-xl border border-gray-700/50",children:c.jsx(C.Suspense,{fallback:c.jsx(Ph,{}),children:c.jsxs(Vi,{children:[c.jsx(Pe,{path:"/bookings",element:c.jsx(_h,{})}),c.jsx(Pe,{path:"/messages",element:c.jsx(xh,{})}),c.jsx(Pe,{path:"/projects",element:c.jsx(jh,{})}),c.jsx(Pe,{path:"/artists",element:c.jsx(Eh,{})}),c.jsx(Pe,{path:"/services",element:c.jsx(kh,{})}),c.jsx(Pe,{path:"/prospection",element:c.jsx(Sh,{})})]})})})})})]})};function de(s){const e=Object.prototype.toString.call(s);return s instanceof Date||typeof s=="object"&&e==="[object Date]"?new s.constructor(+s):typeof s=="number"||e==="[object Number]"||typeof s=="string"||e==="[object String]"?new Date(s):new Date(NaN)}function pe(s,e){return s instanceof Date?new s.constructor(e):new Date(e)}function on(s,e){const t=de(s);return isNaN(e)?pe(s,NaN):(e&&t.setDate(t.getDate()+e),t)}const Ya=6048e5,Th=864e5,Ch=6e4,Nh=36e5,Ah=1e3;let Rh={};function zt(){return Rh}function at(s,e){var o,l,d,h;const t=zt(),r=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((h=(d=t.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,n=de(s),i=n.getDay(),a=(i<r?7:0)+i-r;return n.setDate(n.getDate()-a),n.setHours(0,0,0,0),n}function Ft(s){return at(s,{weekStartsOn:1})}function Ga(s){const e=de(s),t=e.getFullYear(),r=pe(s,0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);const n=Ft(r),i=pe(s,0);i.setFullYear(t,0,4),i.setHours(0,0,0,0);const a=Ft(i);return e.getTime()>=n.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}function Di(s){const e=de(s);return e.setHours(0,0,0,0),e}function Mr(s){const e=de(s),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+s-+t}function Lh(s,e){const t=Di(s),r=Di(e),n=+t-Mr(t),i=+r-Mr(r);return Math.round((n-i)/Th)}function Dh(s){const e=Ga(s),t=pe(s,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),Ft(t)}function Mh(s){return s instanceof Date||typeof s=="object"&&Object.prototype.toString.call(s)==="[object Date]"}function Ih(s){if(!Mh(s)&&typeof s!="number")return!1;const e=de(s);return!isNaN(Number(e))}function $h(s){const e=de(s),t=pe(s,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const qh={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Uh=(s,e,t)=>{let r;const n=qh[s];return typeof n=="string"?r=n:e===1?r=n.one:r=n.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function qt(s){return(e={})=>{const t=e.width?String(e.width):s.defaultWidth;return s.formats[t]||s.formats[s.defaultWidth]}}const Fh={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Bh={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Vh={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Wh={date:qt({formats:Fh,defaultWidth:"full"}),time:qt({formats:Bh,defaultWidth:"full"}),dateTime:qt({formats:Vh,defaultWidth:"full"})},Hh={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},zh=(s,e,t,r)=>Hh[s];function Be(s){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let n;if(r==="formatting"&&s.formattingValues){const a=s.defaultFormattingWidth||s.defaultWidth,o=t!=null&&t.width?String(t.width):a;n=s.formattingValues[o]||s.formattingValues[a]}else{const a=s.defaultWidth,o=t!=null&&t.width?String(t.width):s.defaultWidth;n=s.values[o]||s.values[a]}const i=s.argumentCallback?s.argumentCallback(e):e;return n[i]}}const Yh={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Gh={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Kh={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Jh={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Xh={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Qh={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Zh=(s,e)=>{const t=Number(s),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},ef={ordinalNumber:Zh,era:Be({values:Yh,defaultWidth:"wide"}),quarter:Be({values:Gh,defaultWidth:"wide",argumentCallback:s=>s-1}),month:Be({values:Kh,defaultWidth:"wide"}),day:Be({values:Jh,defaultWidth:"wide"}),dayPeriod:Be({values:Xh,defaultWidth:"wide",formattingValues:Qh,defaultFormattingWidth:"wide"})};function Ve(s){return(e,t={})=>{const r=t.width,n=r&&s.matchPatterns[r]||s.matchPatterns[s.defaultMatchWidth],i=e.match(n);if(!i)return null;const a=i[0],o=r&&s.parsePatterns[r]||s.parsePatterns[s.defaultParseWidth],l=Array.isArray(o)?rf(o,u=>u.test(a)):tf(o,u=>u.test(a));let d;d=s.valueCallback?s.valueCallback(l):l,d=t.valueCallback?t.valueCallback(d):d;const h=e.slice(a.length);return{value:d,rest:h}}}function tf(s,e){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t)&&e(s[t]))return t}function rf(s,e){for(let t=0;t<s.length;t++)if(e(s[t]))return t}function Ka(s){return(e,t={})=>{const r=e.match(s.matchPattern);if(!r)return null;const n=r[0],i=e.match(s.parsePattern);if(!i)return null;let a=s.valueCallback?s.valueCallback(i[0]):i[0];a=t.valueCallback?t.valueCallback(a):a;const o=e.slice(n.length);return{value:a,rest:o}}}const sf=/^(\d+)(th|st|nd|rd)?/i,nf=/\d+/i,af={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},of={any:[/^b/i,/^(a|c)/i]},lf={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},cf={any:[/1/i,/2/i,/3/i,/4/i]},uf={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},df={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},hf={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ff={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},pf={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},mf={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},gf={ordinalNumber:Ka({matchPattern:sf,parsePattern:nf,valueCallback:s=>parseInt(s,10)}),era:Ve({matchPatterns:af,defaultMatchWidth:"wide",parsePatterns:of,defaultParseWidth:"any"}),quarter:Ve({matchPatterns:lf,defaultMatchWidth:"wide",parsePatterns:cf,defaultParseWidth:"any",valueCallback:s=>s+1}),month:Ve({matchPatterns:uf,defaultMatchWidth:"wide",parsePatterns:df,defaultParseWidth:"any"}),day:Ve({matchPatterns:hf,defaultMatchWidth:"wide",parsePatterns:ff,defaultParseWidth:"any"}),dayPeriod:Ve({matchPatterns:pf,defaultMatchWidth:"any",parsePatterns:mf,defaultParseWidth:"any"})},Ja={code:"en-US",formatDistance:Uh,formatLong:Wh,formatRelative:zh,localize:ef,match:gf,options:{weekStartsOn:0,firstWeekContainsDate:1}};function yf(s){const e=de(s);return Lh(e,$h(e))+1}function Xa(s){const e=de(s),t=+Ft(e)-+Dh(e);return Math.round(t/Ya)+1}function ln(s,e){var h,u,f,g;const t=de(s),r=t.getFullYear(),n=zt(),i=(e==null?void 0:e.firstWeekContainsDate)??((u=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((g=(f=n.locale)==null?void 0:f.options)==null?void 0:g.firstWeekContainsDate)??1,a=pe(s,0);a.setFullYear(r+1,0,i),a.setHours(0,0,0,0);const o=at(a,e),l=pe(s,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const d=at(l,e);return t.getTime()>=o.getTime()?r+1:t.getTime()>=d.getTime()?r:r-1}function vf(s,e){var o,l,d,h;const t=zt(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??t.firstWeekContainsDate??((h=(d=t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,n=ln(s,e),i=pe(s,0);return i.setFullYear(n,0,r),i.setHours(0,0,0,0),at(i,e)}function Qa(s,e){const t=de(s),r=+at(t,e)-+vf(t,e);return Math.round(r/Ya)+1}function se(s,e){const t=s<0?"-":"",r=Math.abs(s).toString().padStart(e,"0");return t+r}const tt={y(s,e){const t=s.getFullYear(),r=t>0?t:1-t;return se(e==="yy"?r%100:r,e.length)},M(s,e){const t=s.getMonth();return e==="M"?String(t+1):se(t+1,2)},d(s,e){return se(s.getDate(),e.length)},a(s,e){const t=s.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(s,e){return se(s.getHours()%12||12,e.length)},H(s,e){return se(s.getHours(),e.length)},m(s,e){return se(s.getMinutes(),e.length)},s(s,e){return se(s.getSeconds(),e.length)},S(s,e){const t=e.length,r=s.getMilliseconds(),n=Math.trunc(r*Math.pow(10,t-3));return se(n,e.length)}},Dt={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Mi={G:function(s,e,t){const r=s.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(s,e,t){if(e==="yo"){const r=s.getFullYear(),n=r>0?r:1-r;return t.ordinalNumber(n,{unit:"year"})}return tt.y(s,e)},Y:function(s,e,t,r){const n=ln(s,r),i=n>0?n:1-n;if(e==="YY"){const a=i%100;return se(a,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):se(i,e.length)},R:function(s,e){const t=Ga(s);return se(t,e.length)},u:function(s,e){const t=s.getFullYear();return se(t,e.length)},Q:function(s,e,t){const r=Math.ceil((s.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return se(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(s,e,t){const r=Math.ceil((s.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return se(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(s,e,t){const r=s.getMonth();switch(e){case"M":case"MM":return tt.M(s,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(s,e,t){const r=s.getMonth();switch(e){case"L":return String(r+1);case"LL":return se(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(s,e,t,r){const n=Qa(s,r);return e==="wo"?t.ordinalNumber(n,{unit:"week"}):se(n,e.length)},I:function(s,e,t){const r=Xa(s);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):se(r,e.length)},d:function(s,e,t){return e==="do"?t.ordinalNumber(s.getDate(),{unit:"date"}):tt.d(s,e)},D:function(s,e,t){const r=yf(s);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):se(r,e.length)},E:function(s,e,t){const r=s.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(s,e,t,r){const n=s.getDay(),i=(n-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return se(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(n,{width:"short",context:"formatting"});case"eeee":default:return t.day(n,{width:"wide",context:"formatting"})}},c:function(s,e,t,r){const n=s.getDay(),i=(n-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return se(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(n,{width:"narrow",context:"standalone"});case"cccccc":return t.day(n,{width:"short",context:"standalone"});case"cccc":default:return t.day(n,{width:"wide",context:"standalone"})}},i:function(s,e,t){const r=s.getDay(),n=r===0?7:r;switch(e){case"i":return String(n);case"ii":return se(n,e.length);case"io":return t.ordinalNumber(n,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(s,e,t){const n=s.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(s,e,t){const r=s.getHours();let n;switch(r===12?n=Dt.noon:r===0?n=Dt.midnight:n=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(s,e,t){const r=s.getHours();let n;switch(r>=17?n=Dt.evening:r>=12?n=Dt.afternoon:r>=4?n=Dt.morning:n=Dt.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(s,e,t){if(e==="ho"){let r=s.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return tt.h(s,e)},H:function(s,e,t){return e==="Ho"?t.ordinalNumber(s.getHours(),{unit:"hour"}):tt.H(s,e)},K:function(s,e,t){const r=s.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):se(r,e.length)},k:function(s,e,t){let r=s.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):se(r,e.length)},m:function(s,e,t){return e==="mo"?t.ordinalNumber(s.getMinutes(),{unit:"minute"}):tt.m(s,e)},s:function(s,e,t){return e==="so"?t.ordinalNumber(s.getSeconds(),{unit:"second"}):tt.s(s,e)},S:function(s,e){return tt.S(s,e)},X:function(s,e,t){const r=s.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return $i(r);case"XXXX":case"XX":return pt(r);case"XXXXX":case"XXX":default:return pt(r,":")}},x:function(s,e,t){const r=s.getTimezoneOffset();switch(e){case"x":return $i(r);case"xxxx":case"xx":return pt(r);case"xxxxx":case"xxx":default:return pt(r,":")}},O:function(s,e,t){const r=s.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Ii(r,":");case"OOOO":default:return"GMT"+pt(r,":")}},z:function(s,e,t){const r=s.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Ii(r,":");case"zzzz":default:return"GMT"+pt(r,":")}},t:function(s,e,t){const r=Math.trunc(s.getTime()/1e3);return se(r,e.length)},T:function(s,e,t){const r=s.getTime();return se(r,e.length)}};function Ii(s,e=""){const t=s>0?"-":"+",r=Math.abs(s),n=Math.trunc(r/60),i=r%60;return i===0?t+String(n):t+String(n)+e+se(i,2)}function $i(s,e){return s%60===0?(s>0?"-":"+")+se(Math.abs(s)/60,2):pt(s,e)}function pt(s,e=""){const t=s>0?"-":"+",r=Math.abs(s),n=se(Math.trunc(r/60),2),i=se(r%60,2);return t+n+e+i}const qi=(s,e)=>{switch(s){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Za=(s,e)=>{switch(s){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},bf=(s,e)=>{const t=s.match(/(P+)(p+)?/)||[],r=t[1],n=t[2];if(!n)return qi(s,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",qi(r,e)).replace("{{time}}",Za(n,e))},Vs={p:Za,P:bf},wf=/^D+$/,_f=/^Y+$/,xf=["D","DD","YY","YYYY"];function eo(s){return wf.test(s)}function to(s){return _f.test(s)}function Ws(s,e,t){const r=jf(s,e,t);if(console.warn(r),xf.includes(s))throw new RangeError(r)}function jf(s,e,t){const r=s[0]==="Y"?"years":"days of the month";return`Use \`${s.toLowerCase()}\` instead of \`${s}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Ef=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,kf=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Sf=/^'([^]*?)'?$/,Pf=/''/g,Of=/[a-zA-Z]/;function Tf(s,e,t){var h,u,f,g,y,b,j,v;const r=zt(),n=(t==null?void 0:t.locale)??r.locale??Ja,i=(t==null?void 0:t.firstWeekContainsDate)??((u=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:u.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(f=r.locale)==null?void 0:f.options)==null?void 0:g.firstWeekContainsDate)??1,a=(t==null?void 0:t.weekStartsOn)??((b=(y=t==null?void 0:t.locale)==null?void 0:y.options)==null?void 0:b.weekStartsOn)??r.weekStartsOn??((v=(j=r.locale)==null?void 0:j.options)==null?void 0:v.weekStartsOn)??0,o=de(s);if(!Ih(o))throw new RangeError("Invalid time value");let l=e.match(kf).map(p=>{const m=p[0];if(m==="p"||m==="P"){const w=Vs[m];return w(p,n.formatLong)}return p}).join("").match(Ef).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const m=p[0];if(m==="'")return{isToken:!1,value:Cf(p)};if(Mi[m])return{isToken:!0,value:p};if(m.match(Of))throw new RangeError("Format string contains an unescaped latin alphabet character `"+m+"`");return{isToken:!1,value:p}});n.localize.preprocessor&&(l=n.localize.preprocessor(o,l));const d={firstWeekContainsDate:i,weekStartsOn:a,locale:n};return l.map(p=>{if(!p.isToken)return p.value;const m=p.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&to(m)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&eo(m))&&Ws(m,e,String(s));const w=Mi[m[0]];return w(o,m,n.localize,d)}).join("")}function Cf(s){const e=s.match(Sf);return e?e[1].replace(Pf,"'"):s}function Nf(){return Object.assign({},zt())}function Af(s){let t=de(s).getDay();return t===0&&(t=7),t}function Rf(s,e){const t=de(s),r=de(e);return t.getTime()>r.getTime()}function Lf(s,e){const t=de(s),r=de(e);return+t<+r}function Df(s,e){const t=e instanceof Date?pe(e,0):new e(0);return t.setFullYear(s.getFullYear(),s.getMonth(),s.getDate()),t.setHours(s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()),t}const Mf=10;class ro{constructor(){q(this,"subPriority",0)}validate(e,t){return!0}}class If extends ro{constructor(e,t,r,n,i){super(),this.value=e,this.validateValue=t,this.setValue=r,this.priority=n,i&&(this.subPriority=i)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,r){return this.setValue(e,t,this.value,r)}}class $f extends ro{constructor(){super(...arguments);q(this,"priority",Mf);q(this,"subPriority",-1)}set(t,r){return r.timestampIsSet?t:pe(t,Df(t,Date))}}class ee{run(e,t,r,n){const i=this.parse(e,t,r,n);return i?{setter:new If(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(e,t,r){return!0}}class qf extends ee{constructor(){super(...arguments);q(this,"priority",140);q(this,"incompatibleTokens",["R","u","t","T"])}parse(t,r,n){switch(r){case"G":case"GG":case"GGG":return n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"});case"GGGGG":return n.era(t,{width:"narrow"});case"GGGG":default:return n.era(t,{width:"wide"})||n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"})}}set(t,r,n){return r.era=n,t.setFullYear(n,0,1),t.setHours(0,0,0,0),t}}const me={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},We={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function ge(s,e){return s&&{value:e(s.value),rest:s.rest}}function ue(s,e){const t=e.match(s);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function He(s,e){const t=e.match(s);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const r=t[1]==="+"?1:-1,n=t[2]?parseInt(t[2],10):0,i=t[3]?parseInt(t[3],10):0,a=t[5]?parseInt(t[5],10):0;return{value:r*(n*Nh+i*Ch+a*Ah),rest:e.slice(t[0].length)}}function so(s){return ue(me.anyDigitsSigned,s)}function he(s,e){switch(s){case 1:return ue(me.singleDigit,e);case 2:return ue(me.twoDigits,e);case 3:return ue(me.threeDigits,e);case 4:return ue(me.fourDigits,e);default:return ue(new RegExp("^\\d{1,"+s+"}"),e)}}function Ir(s,e){switch(s){case 1:return ue(me.singleDigitSigned,e);case 2:return ue(me.twoDigitsSigned,e);case 3:return ue(me.threeDigitsSigned,e);case 4:return ue(me.fourDigitsSigned,e);default:return ue(new RegExp("^-?\\d{1,"+s+"}"),e)}}function cn(s){switch(s){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function no(s,e){const t=e>0,r=t?e:1-e;let n;if(r<=50)n=s||100;else{const i=r+50,a=Math.trunc(i/100)*100,o=s>=i%100;n=s+a-(o?100:0)}return t?n:1-n}function io(s){return s%400===0||s%4===0&&s%100!==0}class Uf extends ee{constructor(){super(...arguments);q(this,"priority",130);q(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(t,r,n){const i=a=>({year:a,isTwoDigitYear:r==="yy"});switch(r){case"y":return ge(he(4,t),i);case"yo":return ge(n.ordinalNumber(t,{unit:"year"}),i);default:return ge(he(r.length,t),i)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,n){const i=t.getFullYear();if(n.isTwoDigitYear){const o=no(n.year,i);return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}const a=!("era"in r)||r.era===1?n.year:1-n.year;return t.setFullYear(a,0,1),t.setHours(0,0,0,0),t}}class Ff extends ee{constructor(){super(...arguments);q(this,"priority",130);q(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(t,r,n){const i=a=>({year:a,isTwoDigitYear:r==="YY"});switch(r){case"Y":return ge(he(4,t),i);case"Yo":return ge(n.ordinalNumber(t,{unit:"year"}),i);default:return ge(he(r.length,t),i)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,n,i){const a=ln(t,i);if(n.isTwoDigitYear){const l=no(n.year,a);return t.setFullYear(l,0,i.firstWeekContainsDate),t.setHours(0,0,0,0),at(t,i)}const o=!("era"in r)||r.era===1?n.year:1-n.year;return t.setFullYear(o,0,i.firstWeekContainsDate),t.setHours(0,0,0,0),at(t,i)}}class Bf extends ee{constructor(){super(...arguments);q(this,"priority",130);q(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(t,r){return Ir(r==="R"?4:r.length,t)}set(t,r,n){const i=pe(t,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),Ft(i)}}class Vf extends ee{constructor(){super(...arguments);q(this,"priority",130);q(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(t,r){return Ir(r==="u"?4:r.length,t)}set(t,r,n){return t.setFullYear(n,0,1),t.setHours(0,0,0,0),t}}class Wf extends ee{constructor(){super(...arguments);q(this,"priority",120);q(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,n){switch(r){case"Q":case"QQ":return he(r.length,t);case"Qo":return n.ordinalNumber(t,{unit:"quarter"});case"QQQ":return n.quarter(t,{width:"abbreviated",context:"formatting"})||n.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(t,{width:"wide",context:"formatting"})||n.quarter(t,{width:"abbreviated",context:"formatting"})||n.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=1&&r<=4}set(t,r,n){return t.setMonth((n-1)*3,1),t.setHours(0,0,0,0),t}}class Hf extends ee{constructor(){super(...arguments);q(this,"priority",120);q(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,n){switch(r){case"q":case"qq":return he(r.length,t);case"qo":return n.ordinalNumber(t,{unit:"quarter"});case"qqq":return n.quarter(t,{width:"abbreviated",context:"standalone"})||n.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(t,{width:"wide",context:"standalone"})||n.quarter(t,{width:"abbreviated",context:"standalone"})||n.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=1&&r<=4}set(t,r,n){return t.setMonth((n-1)*3,1),t.setHours(0,0,0,0),t}}class zf extends ee{constructor(){super(...arguments);q(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);q(this,"priority",110)}parse(t,r,n){const i=a=>a-1;switch(r){case"M":return ge(ue(me.month,t),i);case"MM":return ge(he(2,t),i);case"Mo":return ge(n.ordinalNumber(t,{unit:"month"}),i);case"MMM":return n.month(t,{width:"abbreviated",context:"formatting"})||n.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(t,{width:"wide",context:"formatting"})||n.month(t,{width:"abbreviated",context:"formatting"})||n.month(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=11}set(t,r,n){return t.setMonth(n,1),t.setHours(0,0,0,0),t}}class Yf extends ee{constructor(){super(...arguments);q(this,"priority",110);q(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(t,r,n){const i=a=>a-1;switch(r){case"L":return ge(ue(me.month,t),i);case"LL":return ge(he(2,t),i);case"Lo":return ge(n.ordinalNumber(t,{unit:"month"}),i);case"LLL":return n.month(t,{width:"abbreviated",context:"standalone"})||n.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(t,{width:"wide",context:"standalone"})||n.month(t,{width:"abbreviated",context:"standalone"})||n.month(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=11}set(t,r,n){return t.setMonth(n,1),t.setHours(0,0,0,0),t}}function Gf(s,e,t){const r=de(s),n=Qa(r,t)-e;return r.setDate(r.getDate()-n*7),r}class Kf extends ee{constructor(){super(...arguments);q(this,"priority",100);q(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(t,r,n){switch(r){case"w":return ue(me.week,t);case"wo":return n.ordinalNumber(t,{unit:"week"});default:return he(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,n,i){return at(Gf(t,n,i),i)}}function Jf(s,e){const t=de(s),r=Xa(t)-e;return t.setDate(t.getDate()-r*7),t}class Xf extends ee{constructor(){super(...arguments);q(this,"priority",100);q(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(t,r,n){switch(r){case"I":return ue(me.week,t);case"Io":return n.ordinalNumber(t,{unit:"week"});default:return he(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,n){return Ft(Jf(t,n))}}const Qf=[31,28,31,30,31,30,31,31,30,31,30,31],Zf=[31,29,31,30,31,30,31,31,30,31,30,31];class ep extends ee{constructor(){super(...arguments);q(this,"priority",90);q(this,"subPriority",1);q(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(t,r,n){switch(r){case"d":return ue(me.date,t);case"do":return n.ordinalNumber(t,{unit:"date"});default:return he(r.length,t)}}validate(t,r){const n=t.getFullYear(),i=io(n),a=t.getMonth();return i?r>=1&&r<=Zf[a]:r>=1&&r<=Qf[a]}set(t,r,n){return t.setDate(n),t.setHours(0,0,0,0),t}}class tp extends ee{constructor(){super(...arguments);q(this,"priority",90);q(this,"subpriority",1);q(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(t,r,n){switch(r){case"D":case"DD":return ue(me.dayOfYear,t);case"Do":return n.ordinalNumber(t,{unit:"date"});default:return he(r.length,t)}}validate(t,r){const n=t.getFullYear();return io(n)?r>=1&&r<=366:r>=1&&r<=365}set(t,r,n){return t.setMonth(0,n),t.setHours(0,0,0,0),t}}function un(s,e,t){var u,f,g,y;const r=zt(),n=(t==null?void 0:t.weekStartsOn)??((f=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:f.weekStartsOn)??r.weekStartsOn??((y=(g=r.locale)==null?void 0:g.options)==null?void 0:y.weekStartsOn)??0,i=de(s),a=i.getDay(),l=(e%7+7)%7,d=7-n,h=e<0||e>6?e-(a+d)%7:(l+d)%7-(a+d)%7;return on(i,h)}class rp extends ee{constructor(){super(...arguments);q(this,"priority",90);q(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(t,r,n){switch(r){case"E":case"EE":case"EEE":return n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,n,i){return t=un(t,n,i),t.setHours(0,0,0,0),t}}class sp extends ee{constructor(){super(...arguments);q(this,"priority",90);q(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(t,r,n,i){const a=o=>{const l=Math.floor((o-1)/7)*7;return(o+i.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return ge(he(r.length,t),a);case"eo":return ge(n.ordinalNumber(t,{unit:"day"}),a);case"eee":return n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"eeeee":return n.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,n,i){return t=un(t,n,i),t.setHours(0,0,0,0),t}}class np extends ee{constructor(){super(...arguments);q(this,"priority",90);q(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(t,r,n,i){const a=o=>{const l=Math.floor((o-1)/7)*7;return(o+i.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return ge(he(r.length,t),a);case"co":return ge(n.ordinalNumber(t,{unit:"day"}),a);case"ccc":return n.day(t,{width:"abbreviated",context:"standalone"})||n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"});case"ccccc":return n.day(t,{width:"narrow",context:"standalone"});case"cccccc":return n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return n.day(t,{width:"wide",context:"standalone"})||n.day(t,{width:"abbreviated",context:"standalone"})||n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=6}set(t,r,n,i){return t=un(t,n,i),t.setHours(0,0,0,0),t}}function ip(s,e){const t=de(s),r=Af(t),n=e-r;return on(t,n)}class ap extends ee{constructor(){super(...arguments);q(this,"priority",90);q(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(t,r,n){const i=a=>a===0?7:a;switch(r){case"i":case"ii":return he(r.length,t);case"io":return n.ordinalNumber(t,{unit:"day"});case"iii":return ge(n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"}),i);case"iiiii":return ge(n.day(t,{width:"narrow",context:"formatting"}),i);case"iiiiii":return ge(n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"}),i);case"iiii":default:return ge(n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"}),i)}}validate(t,r){return r>=1&&r<=7}set(t,r,n){return t=ip(t,n),t.setHours(0,0,0,0),t}}class op extends ee{constructor(){super(...arguments);q(this,"priority",80);q(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(t,r,n){switch(r){case"a":case"aa":case"aaa":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,n){return t.setHours(cn(n),0,0,0),t}}class lp extends ee{constructor(){super(...arguments);q(this,"priority",80);q(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(t,r,n){switch(r){case"b":case"bb":case"bbb":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,n){return t.setHours(cn(n),0,0,0),t}}class cp extends ee{constructor(){super(...arguments);q(this,"priority",80);q(this,"incompatibleTokens",["a","b","t","T"])}parse(t,r,n){switch(r){case"B":case"BB":case"BBB":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,n){return t.setHours(cn(n),0,0,0),t}}class up extends ee{constructor(){super(...arguments);q(this,"priority",70);q(this,"incompatibleTokens",["H","K","k","t","T"])}parse(t,r,n){switch(r){case"h":return ue(me.hour12h,t);case"ho":return n.ordinalNumber(t,{unit:"hour"});default:return he(r.length,t)}}validate(t,r){return r>=1&&r<=12}set(t,r,n){const i=t.getHours()>=12;return i&&n<12?t.setHours(n+12,0,0,0):!i&&n===12?t.setHours(0,0,0,0):t.setHours(n,0,0,0),t}}class dp extends ee{constructor(){super(...arguments);q(this,"priority",70);q(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(t,r,n){switch(r){case"H":return ue(me.hour23h,t);case"Ho":return n.ordinalNumber(t,{unit:"hour"});default:return he(r.length,t)}}validate(t,r){return r>=0&&r<=23}set(t,r,n){return t.setHours(n,0,0,0),t}}class hp extends ee{constructor(){super(...arguments);q(this,"priority",70);q(this,"incompatibleTokens",["h","H","k","t","T"])}parse(t,r,n){switch(r){case"K":return ue(me.hour11h,t);case"Ko":return n.ordinalNumber(t,{unit:"hour"});default:return he(r.length,t)}}validate(t,r){return r>=0&&r<=11}set(t,r,n){return t.getHours()>=12&&n<12?t.setHours(n+12,0,0,0):t.setHours(n,0,0,0),t}}class fp extends ee{constructor(){super(...arguments);q(this,"priority",70);q(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(t,r,n){switch(r){case"k":return ue(me.hour24h,t);case"ko":return n.ordinalNumber(t,{unit:"hour"});default:return he(r.length,t)}}validate(t,r){return r>=1&&r<=24}set(t,r,n){const i=n<=24?n%24:n;return t.setHours(i,0,0,0),t}}class pp extends ee{constructor(){super(...arguments);q(this,"priority",60);q(this,"incompatibleTokens",["t","T"])}parse(t,r,n){switch(r){case"m":return ue(me.minute,t);case"mo":return n.ordinalNumber(t,{unit:"minute"});default:return he(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,n){return t.setMinutes(n,0,0),t}}class mp extends ee{constructor(){super(...arguments);q(this,"priority",50);q(this,"incompatibleTokens",["t","T"])}parse(t,r,n){switch(r){case"s":return ue(me.second,t);case"so":return n.ordinalNumber(t,{unit:"second"});default:return he(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,n){return t.setSeconds(n,0),t}}class gp extends ee{constructor(){super(...arguments);q(this,"priority",30);q(this,"incompatibleTokens",["t","T"])}parse(t,r){const n=i=>Math.trunc(i*Math.pow(10,-r.length+3));return ge(he(r.length,t),n)}set(t,r,n){return t.setMilliseconds(n),t}}class yp extends ee{constructor(){super(...arguments);q(this,"priority",10);q(this,"incompatibleTokens",["t","T","x"])}parse(t,r){switch(r){case"X":return He(We.basicOptionalMinutes,t);case"XX":return He(We.basic,t);case"XXXX":return He(We.basicOptionalSeconds,t);case"XXXXX":return He(We.extendedOptionalSeconds,t);case"XXX":default:return He(We.extended,t)}}set(t,r,n){return r.timestampIsSet?t:pe(t,t.getTime()-Mr(t)-n)}}class vp extends ee{constructor(){super(...arguments);q(this,"priority",10);q(this,"incompatibleTokens",["t","T","X"])}parse(t,r){switch(r){case"x":return He(We.basicOptionalMinutes,t);case"xx":return He(We.basic,t);case"xxxx":return He(We.basicOptionalSeconds,t);case"xxxxx":return He(We.extendedOptionalSeconds,t);case"xxx":default:return He(We.extended,t)}}set(t,r,n){return r.timestampIsSet?t:pe(t,t.getTime()-Mr(t)-n)}}class bp extends ee{constructor(){super(...arguments);q(this,"priority",40);q(this,"incompatibleTokens","*")}parse(t){return so(t)}set(t,r,n){return[pe(t,n*1e3),{timestampIsSet:!0}]}}class wp extends ee{constructor(){super(...arguments);q(this,"priority",20);q(this,"incompatibleTokens","*")}parse(t){return so(t)}set(t,r,n){return[pe(t,n),{timestampIsSet:!0}]}}const _p={G:new qf,y:new Uf,Y:new Ff,R:new Bf,u:new Vf,Q:new Wf,q:new Hf,M:new zf,L:new Yf,w:new Kf,I:new Xf,d:new ep,D:new tp,E:new rp,e:new sp,c:new np,i:new ap,a:new op,b:new lp,B:new cp,h:new up,H:new dp,K:new hp,k:new fp,m:new pp,s:new mp,S:new gp,X:new yp,x:new vp,t:new bp,T:new wp},xp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,jp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ep=/^'([^]*?)'?$/,kp=/''/g,Sp=/\S/,Pp=/[a-zA-Z]/;function Ui(s,e,t,r){var b,j,v,p,m,w,_,S;const n=Nf(),i=(r==null?void 0:r.locale)??n.locale??Ja,a=(r==null?void 0:r.firstWeekContainsDate)??((j=(b=r==null?void 0:r.locale)==null?void 0:b.options)==null?void 0:j.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(v=n.locale)==null?void 0:v.options)==null?void 0:p.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((w=(m=r==null?void 0:r.locale)==null?void 0:m.options)==null?void 0:w.weekStartsOn)??n.weekStartsOn??((S=(_=n.locale)==null?void 0:_.options)==null?void 0:S.weekStartsOn)??0,l={firstWeekContainsDate:a,weekStartsOn:o,locale:i},d=[new $f],h=e.match(jp).map(k=>{const R=k[0];if(R in Vs){const O=Vs[R];return O(k,i.formatLong)}return k}).join("").match(xp),u=[];for(let k of h){!(r!=null&&r.useAdditionalWeekYearTokens)&&to(k)&&Ws(k,e,s),!(r!=null&&r.useAdditionalDayOfYearTokens)&&eo(k)&&Ws(k,e,s);const R=k[0],O=_p[R];if(O){const{incompatibleTokens:B}=O;if(Array.isArray(B)){const L=u.find(A=>B.includes(A.token)||A.token===R);if(L)throw new RangeError(`The format string mustn't contain \`${L.fullToken}\` and \`${k}\` at the same time`)}else if(O.incompatibleTokens==="*"&&u.length>0)throw new RangeError(`The format string mustn't contain \`${k}\` and any other token at the same time`);u.push({token:R,fullToken:k});const I=O.run(s,k,i.match,l);if(!I)return pe(t,NaN);d.push(I.setter),s=I.rest}else{if(R.match(Pp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+R+"`");if(k==="''"?k="'":R==="'"&&(k=Op(k)),s.indexOf(k)===0)s=s.slice(k.length);else return pe(t,NaN)}}if(s.length>0&&Sp.test(s))return pe(t,NaN);const f=d.map(k=>k.priority).sort((k,R)=>R-k).filter((k,R,O)=>O.indexOf(k)===R).map(k=>d.filter(R=>R.priority===k).sort((R,O)=>O.subPriority-R.subPriority)).map(k=>k[0]);let g=de(t);if(isNaN(g.getTime()))return pe(t,NaN);const y={};for(const k of f){if(!k.validate(g,l))return pe(t,NaN);const R=k.set(g,y,l);Array.isArray(R)?(g=R[0],Object.assign(y,R[1])):g=R}return pe(t,g)}function Op(s){return s.match(Ep)[1].replace(kp,"'")}const Tp={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},Cp=(s,e,t)=>{let r;const n=Tp[s];return typeof n=="string"?r=n:e===1?r=n.one:r=n.other.replace("{{count}}",String(e)),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"dans "+r:"il y a "+r:r},Np={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},Ap={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Rp={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Lp={date:qt({formats:Np,defaultWidth:"full"}),time:qt({formats:Ap,defaultWidth:"full"}),dateTime:qt({formats:Rp,defaultWidth:"full"})},Dp={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},Mp=(s,e,t,r)=>Dp[s],Ip={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},$p={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},qp={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},Up={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},Fp={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},Bp=(s,e)=>{const t=Number(s),r=e==null?void 0:e.unit;if(t===0)return"0";const n=["year","week","hour","minute","second"];let i;return t===1?i=r&&n.includes(r)?"ère":"er":i="ème",t+i},Vp=["MMM","MMMM"],Wp={preprocessor:(s,e)=>s.getDate()===1||!e.some(r=>r.isToken&&Vp.includes(r.value))?e:e.map(r=>r.isToken&&r.value==="do"?{isToken:!0,value:"d"}:r),ordinalNumber:Bp,era:Be({values:Ip,defaultWidth:"wide"}),quarter:Be({values:$p,defaultWidth:"wide",argumentCallback:s=>s-1}),month:Be({values:qp,defaultWidth:"wide"}),day:Be({values:Up,defaultWidth:"wide"}),dayPeriod:Be({values:Fp,defaultWidth:"wide"})},Hp=/^(\d+)(ième|ère|ème|er|e)?/i,zp=/\d+/i,Yp={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},Gp={any:[/^av/i,/^ap/i]},Kp={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},Jp={any:[/1/i,/2/i,/3/i,/4/i]},Xp={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},Qp={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},Zp={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},em={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},tm={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},rm={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},sm={ordinalNumber:Ka({matchPattern:Hp,parsePattern:zp,valueCallback:s=>parseInt(s)}),era:Ve({matchPatterns:Yp,defaultMatchWidth:"wide",parsePatterns:Gp,defaultParseWidth:"any"}),quarter:Ve({matchPatterns:Kp,defaultMatchWidth:"wide",parsePatterns:Jp,defaultParseWidth:"any",valueCallback:s=>s+1}),month:Ve({matchPatterns:Xp,defaultMatchWidth:"wide",parsePatterns:Qp,defaultParseWidth:"any"}),day:Ve({matchPatterns:Zp,defaultMatchWidth:"wide",parsePatterns:em,defaultParseWidth:"any"}),dayPeriod:Ve({matchPatterns:tm,defaultMatchWidth:"any",parsePatterns:rm,defaultParseWidth:"any"})},Fi={code:"fr",formatDistance:Cp,formatLong:Lp,formatRelative:Mp,localize:Wp,match:sm,options:{weekStartsOn:1,firstWeekContainsDate:4}},dn=3600*1e3,nm=5,$r=new Map,im=(s,e=nm)=>{const t=Date.now(),r=$r.get(s);return!r||t-r.timestamp>dn?($r.set(s,{count:1,timestamp:t}),!0):r.count>=e?!1:(r.count++,!0)},Em=s=>s.size>5*1024*1024?"L'image ne doit pas dépasser 5MB":["image/jpeg","image/png","image/webp"].includes(s.type)?s.name.includes("..")||s.name.includes("/")?"Nom de fichier invalide":null:"Le fichier doit être une image (JPG, PNG ou WebP)",am=async(s,e,t,r)=>{const{data:n}=await H.from("studio_bookings").select("id").eq("studio_type",t).eq("status","confirmed").or(`start_datetime.lte.${e.toISOString()},end_datetime.gte.${s.toISOString()}`);return n?n.length>0:!1},om=()=>{const s=Date.now();for(const[e,t]of $r.entries())s-t.timestamp>dn&&$r.delete(e)};typeof window<"u"&&setInterval(om,dn);const lm=()=>{const[s,e]=C.useState(!1),[t,r]=C.useState(!1),[n,i]=C.useState(null),{register:a,handleSubmit:o,formState:{errors:l},reset:d}=Ha(),{handleError:h,handleSuccess:u}=Z(),f=(y,b,j)=>{const v=Ui(`${j} ${y}`,"yyyy-MM-dd HH:mm",new Date,{locale:Fi});let p=Ui(`${j} ${b}`,"yyyy-MM-dd HH:mm",new Date,{locale:Fi});return Lf(p,v)&&(p=on(p,1)),{startDateTime:v,endDateTime:p,isValid:Rf(p,v)}},g=async y=>{if(!n){h("Veuillez confirmer que vous n'êtes pas un robot");return}if(!im(y.client_name)){h("Vous avez atteint la limite de réservations. Veuillez réessayer plus tard.");return}e(!0);try{const{startDateTime:b,endDateTime:j,isValid:v}=f(y.start_time,y.end_time,y.date);if(!v)throw new Error("L'heure de fin doit être après l'heure de début");if(await am(b,j,y.studio_type))throw new Error("Ce créneau horaire n'est pas disponible");const{data:{session:m}}=await H.auth.getSession();if(!m){const{error:S}=await H.auth.signInAnonymously();if(S)throw S}const{data:{session:w}}=await H.auth.getSession();if(!w)throw new Error("Impossible de créer une session");const{error:_}=await H.from("studio_bookings").insert([{...y,user_id:w.user.id,status:"pending",start_datetime:b.toISOString(),end_datetime:j.toISOString()}]);if(_)throw _;r(!0),d(),i(null),u("Votre réservation a été enregistrée avec succès !")}catch(b){h(b,"Erreur lors de la réservation")}finally{e(!1)}};return c.jsx("div",{className:"pt-24 pb-20 bg-black",children:c.jsx("div",{className:"container mx-auto px-4 md:px-6",children:c.jsxs(K.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"max-w-2xl mx-auto",children:[c.jsx("h1",{className:"text-4xl font-heading font-bold mb-6 gold-gradient",children:"Réserver le Studio"}),t?c.jsxs("div",{className:"bg-primary-900 rounded-xl p-8 text-center",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Réservation Envoyée !"}),c.jsx("p",{className:"text-gray-300 mb-6",children:"Nous avons bien reçu votre demande de réservation. Notre équipe la traitera dans les plus brefs délais."}),c.jsx("button",{onClick:()=>r(!1),className:"bg-accent-600 hover:bg-accent-700 text-white px-6 py-2 rounded-lg transition-colors",children:"Nouvelle réservation"})]}):c.jsxs("form",{onSubmit:o(g),className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Client"}),c.jsx("input",{type:"text",className:"w-full px-4 py-2 bg-primary-800 border border-primary-700 rounded-lg focus:ring-2 focus:ring-accent-500 text-white",placeholder:"Nom du client ou de l'artiste",...a("client_name",{required:"Le nom du client est requis"})}),l.client_name&&c.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.client_name.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Date"}),c.jsx("input",{type:"date",min:Tf(new Date,"yyyy-MM-dd"),className:"w-full px-4 py-2 bg-primary-800 border border-primary-700 rounded-lg focus:ring-2 focus:ring-accent-500 text-white",...a("date",{required:"La date est requise"})}),l.date&&c.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.date.message})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Heure de début"}),c.jsx("input",{type:"time",className:"w-full px-4 py-2 bg-primary-800 border border-primary-700 rounded-lg focus:ring-2 focus:ring-accent-500 text-white",...a("start_time",{required:"L'heure de début est requise"})}),l.start_time&&c.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.start_time.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Heure de fin"}),c.jsx("input",{type:"time",className:"w-full px-4 py-2 bg-primary-800 border border-primary-700 rounded-lg focus:ring-2 focus:ring-accent-500 text-white",...a("end_time",{required:"L'heure de fin est requise"})}),l.end_time&&c.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.end_time.message})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Type de session"}),c.jsxs("select",{className:"w-full px-4 py-2 bg-primary-800 border border-primary-700 rounded-lg focus:ring-2 focus:ring-accent-500 text-white",...a("studio_type",{required:"Le type de session est requis"}),children:[c.jsx("option",{value:"recording",children:"Enregistrement"}),c.jsx("option",{value:"mixing",children:"Mixage"}),c.jsx("option",{value:"mastering",children:"Mastering"}),c.jsx("option",{value:"composition",children:"Composition"}),c.jsx("option",{value:"photo",children:"Shooting Photo"})]}),l.studio_type&&c.jsx("p",{className:"mt-1 text-sm text-red-500",children:l.studio_type.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Notes supplémentaires"}),c.jsx("textarea",{rows:4,className:"w-full px-4 py-2 bg-primary-800 border border-primary-700 rounded-lg focus:ring-2 focus:ring-accent-500 text-white resize-none",placeholder:"Détails sur votre projet, besoins spécifiques...",...a("notes")})]}),c.jsx("div",{children:c.jsx(za,{sitekey:"6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI",onChange:y=>i(y),theme:"dark"})}),c.jsx("button",{type:"submit",disabled:s,className:`w-full py-3 px-4 rounded-lg font-medium transition-all ${s?"bg-accent-700 cursor-not-allowed":"bg-accent-600 hover:bg-accent-700"} text-white`,children:s?"Envoi en cours...":"Réserver"})]})]})})})},cm=()=>{var u;const[s,e]=C.useState(""),[t,r]=C.useState(""),{signIn:n,isAuthenticated:i,isAdmin:a,isLoading:o}=pr(),l=Hs(),d=qr(),h=async f=>{var g;f.preventDefault();try{await n(s,t);const y=((g=d.state)==null?void 0:g.from)||"/backstage/bookings";l(y,{replace:!0})}catch{}};if(i&&a){const f=((u=d.state)==null?void 0:u.from)||"/backstage/bookings";return c.jsx(zs,{to:f,replace:!0})}return c.jsx("div",{className:"pt-24 pb-20 bg-black min-h-screen",children:c.jsx("div",{className:"container mx-auto px-4 md:px-6",children:c.jsxs(K.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"max-w-md mx-auto",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-accent-600/10 mb-4",children:c.jsx(Lo,{className:"w-8 h-8 text-accent-400"})}),c.jsx("h1",{className:"text-4xl font-heading font-bold mb-4 gold-gradient",children:"Espace Administration"}),c.jsx("p",{className:"text-gray-400",children:"Accédez à votre espace de gestion sécurisé"})]}),c.jsxs("form",{onSubmit:h,className:"bg-primary-900 rounded-xl p-8 space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),c.jsx("input",{type:"email",value:s,onChange:f=>e(f.target.value),className:"w-full px-4 py-2 bg-primary-800 border border-primary-700 rounded-lg focus:ring-2 focus:ring-accent-500 text-white",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Mot de passe"}),c.jsx("input",{type:"password",value:t,onChange:f=>r(f.target.value),className:"w-full px-4 py-2 bg-primary-800 border border-primary-700 rounded-lg focus:ring-2 focus:ring-accent-500 text-white",required:!0})]}),c.jsx("button",{type:"submit",disabled:o,className:`w-full py-3 px-4 rounded-lg font-medium transition-all ${o?"bg-accent-700 cursor-not-allowed":"bg-accent-600 hover:bg-accent-700"} text-white`,children:o?"Connexion...":"Se connecter"})]})]})})})},um=({children:s})=>{const{isAuthenticated:e,isAdmin:t,isLoading:r}=pr(),n=Hs(),i=qr();return C.useEffect(()=>{!r&&!e&&n("/backstage/login",{state:{from:i.pathname}})},[e,r,i]),r?c.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:c.jsx("div",{className:"text-accent-400",children:"Chargement..."})}):!e||!t?c.jsx(zs,{to:"/backstage/login",state:{from:i.pathname},replace:!0}):c.jsx(c.Fragment,{children:s})},dm=({onSuccess:s,onError:e})=>{const{handleError:t,handleSuccess:r}=Z(),[n]=yo(),[i,a]=C.useState(!1),[o,l]=C.useState(!1),[d,h]=C.useState(null),u=n.get("prospect"),f=n.get("campaign"),g=C.useCallback(async()=>{if(!u){const b="Paramètres manquants pour le désabonnement";t(b),h(b),e==null||e(b);return}a(!0),h(null);try{const{data:b,error:j}=await H.from("prospects").select("id, status").eq("id",u).single();if(j)throw new Error("Prospect non trouvé");if(b.status==="unsubscribed"){l(!0),s==null||s();return}const{error:v}=await H.from("prospects").update({status:"unsubscribed",updated_at:new Date().toISOString()}).eq("id",u);if(v)throw v;const{error:p}=await H.from("email_tracking").insert({prospect_id:u,status:"unsubscribed",sent_at:new Date().toISOString(),campaign_id:f,subject:"Désabonnement"});p&&t(p,"Avertissement lors de l'enregistrement du tracking"),l(!0),r("Désabonnement effectué avec succès"),s==null||s()}catch(b){const j=b instanceof Error?b.message:"Erreur lors du désabonnement";t(j),h(j),e==null||e(j)}finally{a(!1)}},[u,f,s,e,t,r]),y=C.useCallback(()=>{h(null),g()},[g]);return C.useEffect(()=>{u&&!o&&!i&&!d&&g()},[u,o,i,d,g]),i?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Traitement de votre demande..."})]})}):o?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"max-w-md mx-auto text-center p-8 bg-white rounded-lg shadow-lg",children:[c.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Désabonnement confirmé"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Vous avez été désabonné avec succès de nos communications. Nous respectons votre choix."}),c.jsx("p",{className:"text-sm text-gray-500",children:"Si vous changez d'avis, vous pouvez toujours nous contacter directement."})]})}):d?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:c.jsxs("div",{className:"max-w-md mx-auto text-center p-8 bg-white rounded-lg shadow-lg",children:[c.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Erreur"}),c.jsx("p",{className:"text-gray-600 mb-6",children:d}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("button",{onClick:y,className:"w-full bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Réessayer"}),c.jsx("button",{onClick:()=>window.location.href="/",className:"w-full bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"Retour à l'accueil"})]})]})}):null};function hm(){const{initialize:s}=pr();return C.useEffect(()=>{s()},[]),c.jsxs(Ju,{children:[c.jsxs(Vi,{children:[c.jsx(Pe,{path:"/",element:c.jsx(Sd,{})}),c.jsx(Pe,{path:"/projets",element:c.jsx(Pd,{})}),c.jsx(Pe,{path:"/services",element:c.jsx(Td,{})}),c.jsx(Pe,{path:"/contact",element:c.jsx(ph,{})}),c.jsx(Pe,{path:"/politique-de-confidentialite",element:c.jsx(mh,{})}),c.jsx(Pe,{path:"/mentions-legales",element:c.jsx(gh,{})}),c.jsx(Pe,{path:"/reserver",element:c.jsx(lm,{})}),c.jsx(Pe,{path:"/unsubscribe",element:c.jsx(dm,{})}),c.jsx(Pe,{path:"/backstage/login",element:c.jsx(cm,{})}),c.jsx(Pe,{path:"/backstage/*",element:c.jsx(um,{children:c.jsx(Oh,{})})})]}),c.jsx(Yu,{})]})}class fm{constructor(){q(this,"registration",null);q(this,"isSupported");q(this,"networkCallbacks",new Set);q(this,"updateBanner",null);this.isSupported="serviceWorker"in navigator,this.setupNetworkListeners()}async register(){if(!this.isSupported)return console.log("[SW Manager] Service Worker non supporté"),!1;try{return this.registration=await navigator.serviceWorker.register("/sw.js",{scope:"/"}),console.log("[SW Manager] Service Worker enregistré:",this.registration.scope),this.registration.addEventListener("updatefound",()=>{this.handleUpdateFound()}),this.registration.waiting&&this.showUpdateAvailable(),navigator.serviceWorker.addEventListener("controllerchange",()=>{console.log("[SW Manager] Nouveau service worker actif")}),!0}catch(e){return console.error("[SW Manager] Erreur d'enregistrement:",e),!1}}handleUpdateFound(){if(!this.registration)return;const e=this.registration.installing;e&&(console.log("[SW Manager] Nouvelle version en cours d'installation"),e.addEventListener("statechange",()=>{e.state==="installed"&&navigator.serviceWorker.controller&&(console.log("[SW Manager] Nouvelle version prête"),this.showUpdateAvailable())}))}showUpdateAvailable(){if(this.updateBanner)return;this.updateBanner=document.createElement("div"),this.updateBanner.className="fixed top-0 left-0 right-0 bg-blue-600 text-white p-4 z-50 text-center shadow-lg",this.updateBanner.innerHTML=`
      <div class="flex items-center justify-center space-x-4">
        <p class="text-sm font-medium">Une nouvelle version est disponible !</p>
        <button id="sw-update-btn" class="bg-white text-blue-600 px-3 py-1 rounded text-sm font-medium hover:bg-gray-100 transition-colors">
          Mettre à jour
        </button>
        <button id="sw-dismiss-btn" class="text-white hover:text-gray-200 text-lg font-bold">
          ✕
        </button>
      </div>
    `,document.body.appendChild(this.updateBanner);const e=document.getElementById("sw-update-btn"),t=document.getElementById("sw-dismiss-btn");e==null||e.addEventListener("click",()=>{this.applyUpdate()}),t==null||t.addEventListener("click",()=>{this.dismissUpdate()}),setTimeout(()=>{this.updateBanner&&this.dismissUpdate()},1e4)}dismissUpdate(){this.updateBanner&&(this.updateBanner.remove(),this.updateBanner=null)}async applyUpdate(){var e;if(!((e=this.registration)!=null&&e.waiting)){console.warn("[SW Manager] Aucune mise à jour en attente");return}try{this.registration.waiting.postMessage({type:"SKIP_WAITING"}),this.dismissUpdate();const t=document.createElement("div");t.className="fixed top-0 left-0 right-0 bg-green-600 text-white p-2 z-50 text-center text-sm",t.textContent="Mise à jour en cours...",document.body.appendChild(t),navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()},{once:!0})}catch(t){console.error("[SW Manager] Erreur lors de la mise à jour:",t)}}async getCacheSize(){var e;return(e=this.registration)!=null&&e.active?new Promise((t,r)=>{const n=new MessageChannel,i=setTimeout(()=>{r(new Error("Timeout lors de la récupération de la taille du cache"))},5e3);n.port1.onmessage=o=>{clearTimeout(i);const l=o.data;t(l.cacheSize||l.size||0)};const a={type:"GET_CACHE_SIZE"};this.registration.active.postMessage(a,[n.port2])}):(console.warn("[SW Manager] Aucun service worker actif"),0)}async clearCache(){if(!("caches"in window)){console.warn("[SW Manager] Cache API non supportée");return}try{const e=await caches.keys();await Promise.all(e.map(t=>caches.delete(t))),console.log("[SW Manager] Cache vidé:",e.length,"caches supprimés")}catch(e){throw console.error("[SW Manager] Erreur lors du vidage du cache:",e),e}}isOnline(){return navigator.onLine}getNetworkStatus(){return{isOnline:navigator.onLine,lastOnline:navigator.onLine?new Date:void 0}}onNetworkChange(e){return this.networkCallbacks.add(e),()=>{this.networkCallbacks.delete(e)}}setupNetworkListeners(){const e=()=>{console.log("[SW Manager] Connexion rétablie"),this.networkCallbacks.forEach(r=>r(!0))},t=()=>{console.log("[SW Manager] Connexion perdue"),this.networkCallbacks.forEach(r=>r(!1))};window.addEventListener("online",e),window.addEventListener("offline",t)}async unregister(){if(!this.registration)return!1;try{const e=await this.registration.unregister();return console.log("[SW Manager] Service Worker désenregistré"),this.registration=null,e}catch(e){return console.error("[SW Manager] Erreur lors du désenregistrement:",e),!1}}getRegistration(){return this.registration}isRegistered(){return this.registration!==null}}const pm=new fm;pm.register().then(s=>{s&&console.log("✅ Service Worker activé")});To.createRoot(document.getElementById("root")).render(c.jsx(Q.StrictMode,{children:c.jsx(vo,{children:c.jsx(hm,{})})}));export{Wi as C,Ao as F,Ro as I,Do as M,Gi as P,Ki as S,qo as T,Ji as U,Ys as V,Xi as X,oe as _,Fi as a,Z as b,we as c,Ht as d,Yi as e,Tf as f,zi as g,ah as h,wh as i,c as j,Le as k,dr as l,md as m,dd as n,Br as r,H as s,yh as u,Em as v};
//# sourceMappingURL=index-DN8h3Y9b.js.map
