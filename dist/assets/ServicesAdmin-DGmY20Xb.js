import{c as W,d as Y,b as Z,j as e,S as P,X as R}from"./index-DN8h3Y9b.js";import{r as t}from"./react-vendor-VkFUI6JC.js";import{C as z}from"./ConfirmDialog-BT3SwRyR.js";import{P as ee,A as se,D as re}from"./DragDropReorder-Czt_8iWJ.js";import{m as G}from"./ui-vendor-jY-liuQK.js";import{T as te}from"./trash-2-BwtB9nAO.js";import{P as H}from"./save-CY1Hemzt.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=W("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),me=()=>{const{services:c,createService:j,updateService:y,deleteService:N,fetchServices:w,updateServiceOrder:C}=Y(),{handleError:S,handleSuccess:m}=Z(),[x,n]=t.useState("list"),[d,k]=t.useState(!1),[g,D]=t.useState(null),[a,l]=t.useState({features:[]}),[u,p]=t.useState(""),[L,h]=t.useState(!1),[f,E]=t.useState(null),[$,b]=t.useState(!1),[K,T]=t.useState(!1);t.useEffect(()=>{w()},[w]);const U=c.length,V=c.filter(s=>s.price&&s.price!=="Gratuit"&&s.price!=="Sur devis").length,i=t.useCallback(()=>{l({features:[]}),p(""),k(!1),D(null)},[]),F=t.useCallback(s=>{l(s),k(!0),D(s.id),n("form")},[]),A=t.useCallback(s=>{E(s),h(!0)},[]),X=t.useCallback(async()=>{f&&(await N(f),h(!1),E(null))},[f,N]),q=t.useCallback(()=>{u.trim()&&(l(s=>({...s,features:[...s.features||[],u.trim()]})),p(""))},[u]),_=t.useCallback(s=>{l(r=>{var o;return{...r,features:((o=r.features)==null?void 0:o.filter((O,v)=>v!==s))||[]}})},[]),B=t.useCallback(async s=>{s.preventDefault();try{d&&g?(await y(g,a),m("Service mis Ã  jour avec succÃ¨s")):(await j(a),m("Service crÃ©Ã© avec succÃ¨s")),i(),n("list")}catch(r){S(r,"Erreur lors de la sauvegarde du service")}},[a,d,g,y,j,i,S,m]),I=t.useCallback(()=>{Object.keys(a).some(r=>{var o;return r==="features"?(((o=a.features)==null?void 0:o.length)||0)>0:a[r]})?b(!0):(i(),n("list"))},[a,i]),J=t.useCallback(()=>{i(),n("list"),b(!1)},[i]),Q=t.useCallback(async s=>{for(let r=0;r<s.length;r++)await C(s[r].id,r+1)},[C]),M=t.useCallback(s=>{const r=Number((s.price||"").replace(/[^\d.-]/g,""))||0,o=r>0?Math.round(r*.15):0;return e.jsx(G.div,{whileHover:{scale:1.02},className:"bg-gradient-to-br from-gray-800 to-gray-900 p-6 rounded-xl border border-gray-700 hover:border-purple-500/50 transition-all duration-300",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-4xl mb-4",children:s.icon}),e.jsx("h3",{className:"text-xl font-bold mb-2 text-white",children:s.title}),e.jsx("p",{className:"text-gray-400 mb-4",children:s.description}),s.features&&s.features.length>0&&e.jsx("ul",{className:"space-y-2 mb-4",children:s.features.map((O,v)=>e.jsxs("li",{className:"flex items-center text-gray-300",children:[e.jsx("span",{className:"text-green-400 mr-2",children:"âœ“"}),e.jsx("span",{children:O})]},v))}),e.jsx("div",{className:"text-lg font-semibold text-purple-400 mb-2",children:s.price||"Sur devis"}),o>0&&e.jsxs("div",{className:"text-sm text-green-400",children:["ðŸ’° Ã‰conomisez ~",o,"â‚¬"]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs("button",{onClick:()=>F(s),className:"flex items-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[e.jsx(ee,{className:"w-4 h-4"}),"Modifier"]}),e.jsxs("button",{onClick:()=>A(s.id),className:"flex items-center gap-2 px-3 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:[e.jsx(te,{className:"w-4 h-4"}),"Supprimer"]})]})]})},s.id)},[F,A]);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-900/20 to-blue-900/20 border-b border-gray-700",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Gestion des Services"}),e.jsx("p",{className:"text-gray-400",children:"GÃ©rez les services proposÃ©s par votre studio"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"bg-gradient-to-br from-purple-900/30 to-purple-800/30 border border-purple-700/50 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(P,{className:"w-8 h-8 text-purple-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:U}),e.jsx("div",{className:"text-sm text-gray-400",children:"Services totaux"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-900/30 to-green-800/30 border border-green-700/50 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ae,{className:"w-8 h-8 text-green-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:V}),e.jsx("div",{className:"text-sm text-gray-400",children:"Services payants"})]})]})})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-6",children:[e.jsx("button",{onClick:()=>n("list"),className:`px-4 py-2 rounded-lg font-medium transition-all ${x==="list"?"bg-purple-600 text-white shadow-lg":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:"Liste des services"}),e.jsxs("button",{onClick:()=>{i(),n("form")},className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${x==="form"?"bg-purple-600 text-white shadow-lg":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:[e.jsx(H,{className:"w-4 h-4"}),"Nouveau service"]}),c.length>1&&e.jsxs("button",{onClick:()=>T(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-800 text-gray-300 hover:bg-gray-700 rounded-lg font-medium transition-all",children:[e.jsx(se,{className:"w-4 h-4"}),"RÃ©organiser"]})]})]})}),e.jsx("div",{className:"p-6",children:x==="list"?e.jsx("div",{children:c.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(P,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-400 mb-2",children:"Aucun service configurÃ©"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Commencez par ajouter votre premier service"}),e.jsxs("button",{onClick:()=>{i(),n("form")},className:"flex items-center gap-2 px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors mx-auto",children:[e.jsx(H,{className:"w-5 h-5"}),"Ajouter un service"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(M)})}):e.jsx(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-xl border border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:d?"Modifier le service":"Nouveau service"}),e.jsx("button",{onClick:I,className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(R,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:B,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Titre du service *"}),e.jsx("input",{type:"text",value:a.title||"",onChange:s=>l(r=>({...r,title:s.target.value})),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-colors",placeholder:"Ex: Production musicale",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description *"}),e.jsx("textarea",{value:a.description||"",onChange:s=>l(r=>({...r,description:s.target.value})),rows:4,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-colors resize-none",placeholder:"DÃ©crivez votre service...",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"IcÃ´ne (emoji) *"}),e.jsx("input",{type:"text",value:a.icon||"",onChange:s=>l(r=>({...r,icon:s.target.value})),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-colors",placeholder:"ðŸŽµ",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Prix"}),e.jsx("input",{type:"text",value:a.price||"",onChange:s=>l(r=>({...r,price:s.target.value})),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-colors",placeholder:"Ex: 150â‚¬/heure"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"CaractÃ©ristiques"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:u,onChange:s=>p(s.target.value),onKeyPress:s=>s.key==="Enter"&&(s.preventDefault(),q()),className:"flex-1 px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-colors",placeholder:"Nouvelle caractÃ©ristique"}),e.jsx("button",{type:"button",onClick:q,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",children:"Ajouter"})]}),a.features&&a.features.length>0&&e.jsx("div",{className:"space-y-2",children:a.features.map((s,r)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-700/50 px-3 py-2 rounded-lg",children:[e.jsx("span",{className:"text-gray-300",children:s}),e.jsx("button",{type:"button",onClick:()=>_(r),className:"text-red-400 hover:text-red-300 transition-colors",children:e.jsx(R,{className:"w-4 h-4"})})]},r))})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors",children:d?"Mettre Ã  jour":"CrÃ©er le service"}),e.jsx("button",{type:"button",onClick:I,className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors",children:"Annuler"})]})]})]})})}),e.jsx(z,{isOpen:L,onClose:()=>h(!1),onConfirm:X,title:"Supprimer le service",message:"ÃŠtes-vous sÃ»r de vouloir supprimer ce service ? Cette action est irrÃ©versible.",confirmText:"Supprimer",cancelText:"Annuler",type:"danger"}),e.jsx(z,{isOpen:$,onClose:()=>b(!1),onConfirm:J,title:"Fermer le formulaire",message:"Vous avez des modifications non sauvegardÃ©es. ÃŠtes-vous sÃ»r de vouloir fermer ?",confirmText:"Fermer",cancelText:"Continuer l'Ã©dition",type:"warning"}),e.jsx(re,{items:c,onReorder:Q,renderItem:M,getItemId:s=>s.id,title:"les services",isOpen:K,onClose:()=>T(!1)})]})};export{me as default};
//# sourceMappingURL=ServicesAdmin-DGmY20Xb.js.map
